assert(load(Base64Decode("cmVxdWlyZSAib2xkMmRnZW8iDQoNCmNsYXNzICdDb2xsaXNpb25QRScNCiAgICBIRVJPX0FMTCA9IDENCiAgICBIRVJPX0VORU1ZID0gMg0KICAgIEhFUk9fQUxMWSA9IDMNCg0KICAgIGZ1bmN0aW9uIFNheUhlbGxvKCkNCiAgICAgICAgLS0gUHJpbnQgdG8gdGhlIGNoYXQgYXJlYQ0KICAgICAgICBQcmludENoYXQoIkVsbywgTWFzeiBza3J5cHQgbmEgb21pamFuaWUiLCAjRkYwMEZGKQ0KICAgIGVuZA0KICAgICANCiAgICBmdW5jdGlvbiBPbkxvYWQoKQ0KICAgIAlTYXlIZWxsbygpDQogICAgZW5kDQogDQogICAgZnVuY3Rpb24gQ29sbGlzaW9uUEU6X19pbml0KHNSYW5nZSwgcHJvalNwZWVkLCBzRGVsYXksIHNXaWR0aCkNCiAgICAgICAgdW5pcXVlSWQgPSB1bmlxdWVJZCArIDENCiAgICAgICAgc2VsZi51bmlxdWVJZCA9IHVuaXF1ZUlkDQogDQogICAgICAgIHNlbGYuc1JhbmdlID0gc1JhbmdlDQogICAgICAgIHNlbGYucHJvalNwZWVkID0gcHJvalNwZWVkDQogICAgICAgIHNlbGYuc0RlbGF5ID0gc0RlbGF5DQogICAgICAgIHNlbGYuc1dpZHRoID0gc1dpZHRoLzINCiANCiAgICAgICAgc2VsZi5lbmVteU1pbmlvbnMgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9BTExZLCAyMDAwLCBteUhlcm8sIE1JTklPTl9TT1JUX0hFQUxUSF9BU0MpDQogICAgICAgIHNlbGYubWluaW9udXBkYXRlID0gMA0KICAgIGVuZA0KIA0KICAgIGZ1bmN0aW9uIENvbGxpc2lvblBFOkdldE1pbmlvbkNvbGxpc2lvbihwU3RhcnQsIHBFbmQpDQogICAgICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogDQogICAgICAgIGxvY2FsIGRpc3RhbmNlID0gIEdldERpc3RhbmNlKHBTdGFydCwgcEVuZCkNCiAgICAgICAgbG9jYWwgcHJlZGljdGlvbiA9IFRhcmdldFByZWRpY3Rpb25WSVAoc2VsZi5zUmFuZ2UsIHNlbGYucHJvalNwZWVkLCBzZWxmLnNEZWxheSwgc2VsZi5zV2lkdGgpDQogICAgICAgIGxvY2FsIG1Db2xsaXNpb24gPSB7fQ0KIA0KICAgICAgICBpZiBkaXN0YW5jZSA+IHNlbGYuc1JhbmdlIHRoZW4NCiAgICAgICAgICAgIGRpc3RhbmNlID0gc2VsZi5zUmFuZ2UNCiAgICAgICAgZW5kDQogDQogICAgICAgIGxvY2FsIFYgPSBWZWN0b3IocEVuZCkgLSBWZWN0b3IocFN0YXJ0KQ0KICAgICAgICBsb2NhbCBrID0gVjpub3JtYWxpemVkKCkNCiAgICAgICAgbG9jYWwgUCA9IFY6cGVycGVuZGljdWxhcjIoKTpub3JtYWxpemVkKCkNCiANCiAgICAgICAgbG9jYWwgdCxpLHUgPSBrOnVucGFjaygpDQogICAgICAgIGxvY2FsIHgseSx6ID0gUDp1bnBhY2soKQ0KIA0KICAgICAgICBsb2NhbCBzdGFydExlZnRYID0gcFN0YXJ0LnggKyAoeCAqc2VsZi5zV2lkdGgpDQogICAgICAgIGxvY2FsIHN0YXJ0TGVmdFkgPSBwU3RhcnQueSArICh5ICpzZWxmLnNXaWR0aCkNCiAgICAgICAgbG9jYWwgc3RhcnRMZWZ0WiA9IHBTdGFydC56ICsgKHogKnNlbGYuc1dpZHRoKQ0KICAgICAgICBsb2NhbCBlbmRMZWZ0WCA9IHBTdGFydC54ICsgKHggKiBzZWxmLnNXaWR0aCkgKyAodCAqIGRpc3RhbmNlKQ0KICAgICAgICBsb2NhbCBlbmRMZWZ0WSA9IHBTdGFydC55ICsgKHkgKiBzZWxmLnNXaWR0aCkgKyAoaSAqIGRpc3RhbmNlKQ0KICAgICAgICBsb2NhbCBlbmRMZWZ0WiA9IHBTdGFydC56ICsgKHogKiBzZWxmLnNXaWR0aCkgKyAodSAqIGRpc3RhbmNlKQ0KICAgICAgIA0KICAgICAgICBsb2NhbCBzdGFydFJpZ2h0WCA9IHBTdGFydC54IC0gKHggKiBzZWxmLnNXaWR0aCkNCiAgICAgICAgbG9jYWwgc3RhcnRSaWdodFkgPSBwU3RhcnQueSAtICh5ICogc2VsZi5zV2lkdGgpDQogICAgICAgIGxvY2FsIHN0YXJ0UmlnaHRaID0gcFN0YXJ0LnogLSAoeiAqIHNlbGYuc1dpZHRoKQ0KICAgICAgICBsb2NhbCBlbmRSaWdodFggPSBwU3RhcnQueCAtICh4ICogc2VsZi5zV2lkdGgpICsgKHQgKiBkaXN0YW5jZSkNCiAgICAgICAgbG9jYWwgZW5kUmlnaHRZID0gcFN0YXJ0LnkgLSAoeSAqIHNlbGYuc1dpZHRoKSArIChpICogZGlzdGFuY2UpDQogICAgICAgIGxvY2FsIGVuZFJpZ2h0WiA9IHBTdGFydC56IC0gKHogKiBzZWxmLnNXaWR0aCkrICh1ICogZGlzdGFuY2UpDQogDQogICAgICAgIGxvY2FsIHN0YXJ0TGVmdCA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjMoc3RhcnRMZWZ0WCwgc3RhcnRMZWZ0WSwgc3RhcnRMZWZ0WikpDQogICAgICAgIGxvY2FsIGVuZExlZnQgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKGVuZExlZnRYLCBlbmRMZWZ0WSwgZW5kTGVmdFopKQ0KICAgICAgICBsb2NhbCBzdGFydFJpZ2h0ID0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyhzdGFydFJpZ2h0WCwgc3RhcnRSaWdodFksIHN0YXJ0UmlnaHRaKSkNCiAgICAgICAgbG9jYWwgZW5kUmlnaHQgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKGVuZFJpZ2h0WCwgZW5kUmlnaHRZLCBlbmRSaWdodFopKQ0KICAgICAgIA0KICAgICAgICBsb2NhbCBwb2x5ID0gUG9seWdvbihQb2ludChzdGFydExlZnQueCwgc3RhcnRMZWZ0LnkpLCAgUG9pbnQoZW5kTGVmdC54LCBlbmRMZWZ0LnkpLCBQb2ludChzdGFydFJpZ2h0LngsIHN0YXJ0UmlnaHQueSksICAgUG9pbnQoZW5kUmlnaHQueCwgZW5kUmlnaHQueSkpDQogDQogICAgICAgICBmb3IgaW5kZXgsIG1pbmlvbiBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICAgICAgaWYgbWluaW9uIH49IG5pbCBhbmQgbWluaW9uLnZhbGlkIGFuZCBub3QgbWluaW9uLmRlYWQgdGhlbg0KICAgICAgICAgICAgICAgIGlmIEdldERpc3RhbmNlKHBTdGFydCwgbWluaW9uKSA8IGRpc3RhbmNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgcG9zLCB0LCB2ZWMgPSBwcmVkaWN0aW9uOkdldFByZWRpY3Rpb24obWluaW9uKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBsaW5lU2VnbWVudExlZnQgPSBMaW5lU2VnbWVudChQb2ludChzdGFydExlZnRYLHN0YXJ0TGVmdFopLCBQb2ludChlbmRMZWZ0WCwgZW5kTGVmdFopKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBsaW5lU2VnbWVudFJpZ2h0ID0gTGluZVNlZ21lbnQoUG9pbnQoc3RhcnRSaWdodFgsc3RhcnRSaWdodFopLCBQb2ludChlbmRSaWdodFgsIGVuZFJpZ2h0WikpDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRvU2NyZWVuLCB0b1BvaW50DQogICAgICAgICAgICAgICAgICAgIGlmIHBvcyB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdG9TY3JlZW4gPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKG1pbmlvbi54LCBtaW5pb24ueSwgbWluaW9uLnopKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdG9Qb2ludCA9IFBvaW50KHRvU2NyZWVuLngsIHRvU2NyZWVuLnkpDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvU2NyZWVuID0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyhtaW5pb24ueCwgbWluaW9uLnksIG1pbmlvbi56KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvUG9pbnQgPSBQb2ludCh0b1NjcmVlbi54LCB0b1NjcmVlbi55KQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiANCiANCiAgICAgICAgICAgICAgICAgICAgaWYgcG9seTpjb250YWlucyh0b1BvaW50KSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobUNvbGxpc2lvbiwgbWluaW9uKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwb3Mgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZTEgPSBQb2ludChwb3MueCwgcG9zLnopOmRpc3RhbmNlKGxpbmVTZWdtZW50TGVmdCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZTIgPSBQb2ludChwb3MueCwgcG9zLnopOmRpc3RhbmNlKGxpbmVTZWdtZW50UmlnaHQpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UxID0gUG9pbnQobWluaW9uLngsIG1pbmlvbi56KTpkaXN0YW5jZShsaW5lU2VnbWVudExlZnQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UyID0gUG9pbnQobWluaW9uLngsIG1pbmlvbi56KTpkaXN0YW5jZShsaW5lU2VnbWVudFJpZ2h0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UxIDwgKGdldEhpdEJveFJhZGl1cyhtaW5pb24pKjIrMTApIG9yIGRpc3RhbmNlMiA8IChnZXRIaXRCb3hSYWRpdXMobWluaW9uKSAqMisxMCkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobUNvbGxpc2lvbiwgbWluaW9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiAjbUNvbGxpc2lvbiA+IDAgdGhlbiByZXR1cm4gdHJ1ZSwgbUNvbGxpc2lvbiBlbHNlIHJldHVybiBmYWxzZSwgbUNvbGxpc2lvbiBlbmQNCiAgICBlbmQNCiANCiAgICBmdW5jdGlvbiBDb2xsaXNpb25QRTpHZXRIZXJvQ29sbGlzaW9uKHBTdGFydCwgcEVuZCwgbW9kZSkNCiAgICAgICAgaWYgbW9kZSA9PSBuaWwgdGhlbiBtb2RlID0gSEVST19FTkVNWSBlbmQNCiAgICAgICAgbG9jYWwgaGVyb3MgPSB7fQ0KIA0KICAgICAgICBmb3IgaSA9IDEsIGhlcm9NYW5hZ2VyLmlDb3VudCBkbw0KICAgICAgICAgICAgbG9jYWwgaGVybyA9IGhlcm9NYW5hZ2VyOkdldEhlcm8oaSkNCiAgICAgICAgICAgIGlmIChtb2RlID09IEhFUk9fRU5FTVkgb3IgbW9kZSA9PSBIRVJPX0FMTCkgYW5kIGhlcm8udGVhbSB+PSBteUhlcm8udGVhbSB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGhlcm9zLCBoZXJvKQ0KICAgICAgICAgICAgZWxzZWlmIChtb2RlID09IEhFUk9fQUxMWSBvciBtb2RlID09IEhFUk9fQUxMKSBhbmQgaGVyby50ZWFtID09IG15SGVyby50ZWFtIGFuZCBub3QgaGVyby5pc01lIHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoaGVyb3MsIGhlcm8pDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogDQogICAgICAgIGxvY2FsIGRpc3RhbmNlID0gIEdldERpc3RhbmNlKHBTdGFydCwgcEVuZCkNCiAgICAgICAgbG9jYWwgcHJlZGljdGlvbiA9IFRhcmdldFByZWRpY3Rpb25WSVAoc2VsZi5zUmFuZ2UsIHNlbGYucHJvalNwZWVkLCBzZWxmLnNEZWxheSwgc2VsZi5zV2lkdGgpDQogICAgICAgIGxvY2FsIGhDb2xsaXNpb24gPSB7fQ0KIA0KICAgICAgICBpZiBkaXN0YW5jZSA+IHNlbGYuc1JhbmdlIHRoZW4NCiAgICAgICAgICAgIGRpc3RhbmNlID0gc2VsZi5zUmFuZ2UNCiAgICAgICAgZW5kDQogDQogICAgICAgIGxvY2FsIFYgPSBWZWN0b3IocEVuZCkgLSBWZWN0b3IocFN0YXJ0KQ0KICAgICAgICBsb2NhbCBrID0gVjpub3JtYWxpemVkKCkNCiAgICAgICAgbG9jYWwgUCA9IFY6cGVycGVuZGljdWxhcjIoKTpub3JtYWxpemVkKCkNCiANCiAgICAgICAgbG9jYWwgdCxpLHUgPSBrOnVucGFjaygpDQogICAgICAgIGxvY2FsIHgseSx6ID0gUDp1bnBhY2soKQ0KIA0KICAgICAgICBsb2NhbCBzdGFydExlZnRYID0gcFN0YXJ0LnggKyAoeCAqc2VsZi5zV2lkdGgpDQogICAgICAgIGxvY2FsIHN0YXJ0TGVmdFkgPSBwU3RhcnQueSArICh5ICpzZWxmLnNXaWR0aCkNCiAgICAgICAgbG9jYWwgc3RhcnRMZWZ0WiA9IHBTdGFydC56ICsgKHogKnNlbGYuc1dpZHRoKQ0KICAgICAgICBsb2NhbCBlbmRMZWZ0WCA9IHBTdGFydC54ICsgKHggKiBzZWxmLnNXaWR0aCkgKyAodCAqIGRpc3RhbmNlKQ0KICAgICAgICBsb2NhbCBlbmRMZWZ0WSA9IHBTdGFydC55ICsgKHkgKiBzZWxmLnNXaWR0aCkgKyAoaSAqIGRpc3RhbmNlKQ0KICAgICAgICBsb2NhbCBlbmRMZWZ0WiA9IHBTdGFydC56ICsgKHogKiBzZWxmLnNXaWR0aCkgKyAodSAqIGRpc3RhbmNlKQ0KICAgICAgIA0KICAgICAgICBsb2NhbCBzdGFydFJpZ2h0WCA9IHBTdGFydC54IC0gKHggKiBzZWxmLnNXaWR0aCkNCiAgICAgICAgbG9jYWwgc3RhcnRSaWdodFkgPSBwU3RhcnQueSAtICh5ICogc2VsZi5zV2lkdGgpDQogICAgICAgIGxvY2FsIHN0YXJ0UmlnaHRaID0gcFN0YXJ0LnogLSAoeiAqIHNlbGYuc1dpZHRoKQ0KICAgICAgICBsb2NhbCBlbmRSaWdodFggPSBwU3RhcnQueCAtICh4ICogc2VsZi5zV2lkdGgpICsgKHQgKiBkaXN0YW5jZSkNCiAgICAgICAgbG9jYWwgZW5kUmlnaHRZID0gcFN0YXJ0LnkgLSAoeSAqIHNlbGYuc1dpZHRoKSArIChpICogZGlzdGFuY2UpDQogICAgICAgIGxvY2FsIGVuZFJpZ2h0WiA9IHBTdGFydC56IC0gKHogKiBzZWxmLnNXaWR0aCkrICh1ICogZGlzdGFuY2UpDQogDQogICAgICAgIGxvY2FsIHN0YXJ0TGVmdCA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjMoc3RhcnRMZWZ0WCwgc3RhcnRMZWZ0WSwgc3RhcnRMZWZ0WikpDQogICAgICAgIGxvY2FsIGVuZExlZnQgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKGVuZExlZnRYLCBlbmRMZWZ0WSwgZW5kTGVmdFopKQ0KICAgICAgICBsb2NhbCBzdGFydFJpZ2h0ID0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyhzdGFydFJpZ2h0WCwgc3RhcnRSaWdodFksIHN0YXJ0UmlnaHRaKSkNCiAgICAgICAgbG9jYWwgZW5kUmlnaHQgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKGVuZFJpZ2h0WCwgZW5kUmlnaHRZLCBlbmRSaWdodFopKQ0KICAgICAgIA0KICAgICAgICBsb2NhbCBwb2x5ID0gUG9seWdvbihQb2ludChzdGFydExlZnQueCwgc3RhcnRMZWZ0LnkpLCAgUG9pbnQoZW5kTGVmdC54LCBlbmRMZWZ0LnkpLCBQb2ludChzdGFydFJpZ2h0LngsIHN0YXJ0UmlnaHQueSksICAgUG9pbnQoZW5kUmlnaHQueCwgZW5kUmlnaHQueSkpDQogDQogICAgICAgIGZvciBpbmRleCwgaGVybyBpbiBwYWlycyhoZXJvcykgZG8NCiAgICAgICAgICAgIGlmIGhlcm8gfj0gbmlsIGFuZCBoZXJvLnZhbGlkIGFuZCBub3QgaGVyby5kZWFkIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBHZXREaXN0YW5jZShwU3RhcnQsIGhlcm8pIDwgZGlzdGFuY2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBwb3MsIHQsIHZlYyA9IHByZWRpY3Rpb246R2V0UHJlZGljdGlvbihoZXJvKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBsaW5lU2VnbWVudExlZnQgPSBMaW5lU2VnbWVudChQb2ludChzdGFydExlZnRYLHN0YXJ0TGVmdFopLCBQb2ludChlbmRMZWZ0WCwgZW5kTGVmdFopKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBsaW5lU2VnbWVudFJpZ2h0ID0gTGluZVNlZ21lbnQoUG9pbnQoc3RhcnRSaWdodFgsc3RhcnRSaWdodFopLCBQb2ludChlbmRSaWdodFgsIGVuZFJpZ2h0WikpDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRvU2NyZWVuLCB0b1BvaW50DQogICAgICAgICAgICAgICAgICAgIGlmIHBvcyB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdG9TY3JlZW4gPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHBvcy54LCBoZXJvLnksIHBvcy56KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvUG9pbnQgPSBQb2ludCh0b1NjcmVlbi54LCB0b1NjcmVlbi55KQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICB0b1NjcmVlbiA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjMoaGVyby54LCBoZXJvLnksIGhlcm8ueikpDQogICAgICAgICAgICAgICAgICAgICAgICB0b1BvaW50ID0gUG9pbnQodG9TY3JlZW4ueCwgdG9TY3JlZW4ueSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogDQogDQogICAgICAgICAgICAgICAgICAgIGlmIHBvbHk6Y29udGFpbnModG9Qb2ludCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGhDb2xsaXNpb24sIGhlcm8pDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBvcyB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlMSA9IFBvaW50KHBvcy54LCBwb3Mueik6ZGlzdGFuY2UobGluZVNlZ21lbnRMZWZ0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlMiA9IFBvaW50KHBvcy54LCBwb3Mueik6ZGlzdGFuY2UobGluZVNlZ21lbnRSaWdodCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZTEgPSBQb2ludChoZXJvLngsIGhlcm8ueik6ZGlzdGFuY2UobGluZVNlZ21lbnRMZWZ0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlMiA9IFBvaW50KGhlcm8ueCwgaGVyby56KTpkaXN0YW5jZShsaW5lU2VnbWVudFJpZ2h0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UxIDwgKGdldEhpdEJveFJhZGl1cyhoZXJvKSoyKzEwKSBvciBkaXN0YW5jZTIgPCAoZ2V0SGl0Qm94UmFkaXVzKGhlcm8pICoyKzEwKSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChoQ29sbGlzaW9uLCBoZXJvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiAjaENvbGxpc2lvbiA+IDAgdGhlbiByZXR1cm4gdHJ1ZSwgaENvbGxpc2lvbiBlbHNlIHJldHVybiBmYWxzZSwgaENvbGxpc2lvbiBlbmQNCiAgICBlbmQNCiANCiAgICBmdW5jdGlvbiBDb2xsaXNpb25QRTpHZXRDb2xsaXNpb24ocFN0YXJ0LCBwRW5kKQ0KICAgICAgICBsb2NhbCBiICwgbWluaW9ucyA9IHNlbGY6R2V0TWluaW9uQ29sbGlzaW9uKHBTdGFydCwgcEVuZCkNCiAgICAgICAgbG9jYWwgdCAsIGhlcm9zID0gc2VsZjpHZXRIZXJvQ29sbGlzaW9uKHBTdGFydCwgcEVuZCwgSEVST19FTkVNWSkNCiANCiAgICAgICAgaWYgbm90IGIgdGhlbiByZXR1cm4gdCwgaGVyb3MgZW5kDQogICAgICAgIGlmIG5vdCB0IHRoZW4gcmV0dXJuIGIsIG1pbmlvbnMgZW5kDQogDQogICAgICAgIGxvY2FsIGFsbCA9IHt9DQogDQogICAgICAgIGZvciBpbmRleCwgaGVybyBpbiBwYWlycyhoZXJvcykgZG8NCiAgICAgICAgICAgIHRhYmxlLmluc2VydChhbGwsIGhlcm8pDQogICAgICAgIGVuZA0KIA0KICAgICAgICBmb3IgaW5kZXgsIG1pbmlvbiBpbiBwYWlycyhtaW5pb25zKSBkbw0KICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGFsbCwgbWluaW9uKQ0KICAgICAgICBlbmQNCiANCiAgICAgICAgcmV0dXJuIHRydWUsIGFsbA0KICAgIGVuZA0KDQoNCiAgICBmdW5jdGlvbiBnZXRIaXRCb3hSYWRpdXModGFyZ2V0KQ0KICAgICAgICByZXR1cm4gR2V0RGlzdGFuY2UodGFyZ2V0LCB0YXJnZXQubWluQkJveCkvMg0KICAgIGVuZA0KICAgIGxvY2FsIHZlcnNpb25tZXNzYWdlID0gIjxmb250IGNvbG9yPVwiIzgxQkVGN1wiID5UaGFuayBmb3IgdXNpbmcgRnJlRXZhZGUgUGluZ291aW4sIGhhdmUgYSBuaWNlIGRheSE8L2ZvbnQ+Ig0KDQoNCl9HLmV2YWRlID0gZmFsc2UNCm1vdmVCdWZmZXIgPSAyNQ0Kc21vb3RoaW5nID0gNzUNCmRhc2hyYW5nZSA9IDANCg0KDQpjaGFtcGlvbnMgPSB7fQ0KY2hhbXBpb25zMiA9IHsNCiAgICBbIkx1eCJdID0ge2NoYXJOYW1lID0gIkx1eCIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiTGlnaHQgQmluZGluZyJdID0gIHtuYW1lID0gIkxpZ2h0QmluZGluZyIsIHNwZWxsTmFtZSA9ICJMdXhMaWdodEJpbmRpbmciLCBzcGVsbERlbGF5ID0gMzAwLCBwcm9qZWN0aWxlTmFtZSA9ICJMdXhMaWdodEJpbmRpbmdfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxMjAwLCByYW5nZSA9IDEzMDAsIHJhZGl1cyA9IDgwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgWyJMdXggTGlnaHRTdHJpa2UgS3VnZWwiXSA9IHtuYW1lID0gIkx1eExpZ2h0U3RyaWtlS3VnZWwiLCBzcGVsbE5hbWUgPSAiTHV4TGlnaHRTdHJpa2VLdWdlbCIsIHNwZWxsRGVsYXkgPSAzMDAsIHByb2plY3RpbGVOYW1lID0gIkx1eExpZ2h0c3RyaWtlX21pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTMwMCwgcmFuZ2UgPSAxMTAwLCByYWRpdXMgPSAzMDAsIHR5cGUgPSAiY2lyY2xlIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAiZmFsc2UifSwNCiAgICAgICAgWyJMdXggTWFsaWNlIENhbm5vbiJdID0gIHtuYW1lID0gIkx1eE1hbGljZUNhbm5vbiIsIHNwZWxsTmFtZSA9ICJMdXhNYWxpY2VDYW5ub24iLCBzcGVsbERlbGF5ID0gNTAwLCBwcm9qZWN0aWxlTmFtZSA9ICJMdXhNYWxpY2VDYW5ub25fY2FzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSA1MDAwMCwgcmFuZ2UgPSAzMDAwLCByYWRpdXMgPSA4MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiTmlkYWxlZSJdID0ge2NoYXJOYW1lID0gIk5pZGFsZWUiLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIkphdmVsaW4gVG9zcyJdID0ge25hbWUgPSAiSmF2ZWxpblRvc3MiLCBzcGVsbE5hbWUgPSAiSmF2ZWxpblRvc3MiLCBzcGVsbERlbGF5ID0gMzAwLCBwcm9qZWN0aWxlTmFtZSA9ICJuaWRhbGVlX2phdmVsaW5Ub3NzX21pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTMwMCwgcmFuZ2UgPSAxNTAwLCByYWRpdXMgPSA4MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJ0cnVlIiwgc2hpZWxkbm93ID0gInRydWUifQ0KICAgICAgICB9fSwNCiAgICBbIktlbm5lbiJdID0ge2NoYXJOYW1lID0gIktlbm5lbiIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiVGh1bmRlcmluZyBTaHVyaWtlbiJdID0ge25hbWUgPSAiVGh1bmRlcmluZ1NodXJpa2VuIiwgc3BlbGxOYW1lID0gIktlbm5lblNodXJpa2VuSHVybE1pc3NpbGUxIiwgc3BlbGxEZWxheSA9IDMwMCwgcHJvamVjdGlsZU5hbWUgPSAia2VubmVuX3RzX21pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTY1MCwgcmFuZ2UgPSAxMDUwLCByYWRpdXMgPSA1MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAidHJ1ZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0NCiAgICAgICAgfX0sDQogICAgWyJBbXVtdSJdID0ge2NoYXJOYW1lID0gIkFtdW11Iiwgc2tpbGxzaG90cyA9IHsNCiAgICAgICAgWyJCYW5kYWdlIFRvc3MiXSA9IHtuYW1lID0gIkJhbmRhZ2VUb3NzIiwgc3BlbGxOYW1lID0gIkJhbmRhZ2VUb3NzIiwgc3BlbGxEZWxheSA9IDMwMCwgcHJvamVjdGlsZU5hbWUgPSAiQmFuZGFnZV9iZWFtLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAyMDAwLCByYW5nZSA9IDExMDAsIHJhZGl1cyA9IDgwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gInRydWUiLCBzaGllbGRub3cgPSAidHJ1ZSJ9DQogICAgICAgIH19LA0KICAgIFsiTGVlIFNpbiJdID0ge2NoYXJOYW1lID0gIkxlZVNpbiIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiU29uaWMgV2F2ZSJdID0ge25hbWUgPSAiU29uaWNXYXZlIiwgc3BlbGxOYW1lID0gIkJsaW5kTW9ua1FPbmUiLCBzcGVsbERlbGF5ID0gMzAwLCBwcm9qZWN0aWxlTmFtZSA9ICJibGluZE1vbmtfUV9taXNfMDEudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDE4MDAsIHJhbmdlID0gOTc1LCByYWRpdXMgPSA4MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJ0cnVlIiwgc2hpZWxkbm93ID0gInRydWUifQ0KICAgICAgICB9fSwNCiAgICBbIk1vcmdhbmEiXSA9IHtjaGFyTmFtZSA9ICJNb3JnYW5hIiwgc2tpbGxzaG90cyA9IHsNCiAgICAgICAgWyJEYXJrIEJpbmRpbmcgTWlzc2lsZSJdID0ge25hbWUgPSAiRGFya0JpbmRpbmciLCBzcGVsbE5hbWUgPSAiRGFya0JpbmRpbmdNaXNzaWxlIiwgc3BlbGxEZWxheSA9IDMwMCwgcHJvamVjdGlsZU5hbWUgPSAiRGFya0JpbmRpbmdfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxMjAwLCByYW5nZSA9IDEzMDAsIHJhZGl1cyA9IDEwMCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJ0cnVlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJTZWp1YW5pIl0gPSB7Y2hhck5hbWUgPSAiU2VqdWFuaSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiU2VqdWFuaVIiXSA9IHtuYW1lID0gIlNlanVhbmlSIiwgc3BlbGxOYW1lID0gIlNlanVhbmlHbGFjaWFsUHJpc29uQ2FzdCIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gIlNlanVhbmlfUl9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDEzNTAsIHJhbmdlID0gMTE1MCwgcmFkaXVzID0gODAsIHR5cGU9ImxpbmUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwgICAgDQogICAgICAgIH19LA0KICAgIFsiU29uYSJdID0ge2NoYXJOYW1lID0gIlNvbmEiLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIkNyZXNjZW5kbyJdID0ge25hbWUgPSAiQ3Jlc2NlbmRvIiwgc3BlbGxOYW1lID0gIlNvbmFDcmVzY2VuZG8iLCBzcGVsbERlbGF5ID0gMjQwLCBwcm9qZWN0aWxlTmFtZSA9ICJTb25hQ3Jlc2NlbmRvX21pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMjQwMCwgcmFuZ2UgPSAxMDAwLCByYWRpdXMgPSAxNTAsIHR5cGUgPSAibGluZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LCAgICAgICAgDQogICAgICAgIH19LA0KICAgIFsiR3JhZ2FzIl0gPSB7Y2hhck5hbWUgPSAiR3JhZ2FzIiwgc2tpbGxzaG90cyA9IHsNCiAgICAgICAgWyJCYXJyZWwgUm9sbCJdID0ge25hbWUgPSAiQmFycmVsUm9sbCIsIHNwZWxsTmFtZSA9ICJHcmFnYXNCYXJyZWxSb2xsIiwgc3BlbGxEZWxheSA9IDMwMCwgcHJvamVjdGlsZU5hbWUgPSAiZ3JhZ2FzX2JhcnJlbHJvbGxfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxMDAwLCByYW5nZSA9IDExMDAsIHJhZGl1cyA9IDMyMCwgdHlwZSA9ICJjaXJjbGUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJmYWxzZSJ9LA0KICAgICAgICBbIkJhcnJlbCBSb2xsIE1pc3NpbGUiXSA9IHtuYW1lID0gIkJhcnJlbFJvbGxNaXNzaWxlIiwgc3BlbGxOYW1lID0gIkdyYWdhc0JhcnJlbFJvbGxNaXNzaWxlIiwgc3BlbGxEZWxheSA9IDAsIHByb2plY3RpbGVOYW1lID0gImdyYWdhc19iYXJyZWxyb2xsX21pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTAwMCwgcmFuZ2UgPSA4NTAsIHJhZGl1cyA9IDE4MCwgdHlwZSA9ICJjaXJjbGUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJmYWxzZSJ9LA0KICAgICAgICB9fSwNCiAgICBbIlN5bmRyYSJdID0ge2NoYXJOYW1lID0gIlN5bmRyYSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiUSJdID0ge25hbWUgPSAiUSIsIHNwZWxsTmFtZSA9ICJTeW5kcmFRIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiU3luZHJhX1FfZmFsbC50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gNTAwLCByYW5nZSA9IDgwMCwgcmFkaXVzID0gMTc1LCB0eXBlID0gImNpcmN1bGFyIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICBbIlciXSA9IHtuYW1lID0gIlciLCBzcGVsbE5hbWUgPSAic3luZHJhd2Nhc3QiLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICJTeW5kcmFfV19mYWxsLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSA1MDAsIHJhbmdlID0gOTUwLCByYWRpdXMgPSAyMDAsIHR5cGUgPSAiY2lyY3VsYXIiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiTWFscGhpdGUiXSA9IHtjaGFyTmFtZSA9ICJNYWxwaGl0ZSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiVUZTbGFzaCJdID0ge25hbWUgPSAiVUZTbGFzaCIsIHNwZWxsTmFtZSA9ICJVRlNsYXNoIiwgc3BlbGxEZWxheSA9IDAsIHByb2plY3RpbGVOYW1lID0gIlVuc3RvcHBhYmxlRm9yY2VfY2FzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSA1NTAsIHJhbmdlID0gMTAwMCwgcmFkaXVzID0gMzI1LCB0eXBlPSJjaXJjdWxhciIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LCAgICANCiAgICAgICAgfX0sDQogICAgWyJFenJlYWwiXSA9IHtjaGFyTmFtZSA9ICJFenJlYWwiLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIk15c3RpYyBTaG90Il0gICAgICAgICAgICAgPSB7bmFtZSA9ICJNeXN0aWNTaG90IiwgICAgICBzcGVsbE5hbWUgPSAiRXpyZWFsTXlzdGljU2hvdCIsICAgICAgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiRXpyZWFsX215c3RpY3Nob3RfbWlzLnRyb3kiLCAgcHJvamVjdGlsZVNwZWVkID0gMTk3NSwgcmFuZ2UgPSAxMjAwLCAgcmFkaXVzID0gNTAsICB0eXBlID0gImxpbmUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJ0cnVlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgWyJFc3NlbmNlIEZsdXgiXSAgICAgICAgICAgID0ge25hbWUgPSAiRXNzZW5jZUZsdXgiLCAgICAgc3BlbGxOYW1lID0gIkV6cmVhbEVzc2VuY2VGbHV4IiwgICAgIHNwZWxsRGVsYXkgPSAzMDAsIHByb2plY3RpbGVOYW1lID0gIkV6cmVhbF9lc3NlbmNlZmx1eF9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDE1MDAsIHJhbmdlID0gOTAwLCAgcmFkaXVzID0gMTAwLCAgdHlwZSA9ICJsaW5lIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICBbIk15c3RpYyBTaG90IChQdWxzZWZpcmUpIl0gPSB7bmFtZSA9ICJNeXN0aWNTaG90IiwgICAgICBzcGVsbE5hbWUgPSAiRXpyZWFsTXlzdGljU2hvdFB1bHNlIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiRXpyZWFsX215c3RpY3Nob3RfbWlzLnRyb3kiLCAgcHJvamVjdGlsZVNwZWVkID0gMTk3NSwgcmFuZ2UgPSAxMjAwLCAgcmFkaXVzID0gNTAsICB0eXBlID0gImxpbmUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJ0cnVlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgWyJUcnVlc2hvdCBCYXJyYWdlIl0gICAgICAgID0ge25hbWUgPSAiVHJ1ZXNob3RCYXJyYWdlIiwgc3BlbGxOYW1lID0gIkV6cmVhbFRydWVzaG90QmFycmFnZSIsIHNwZWxsRGVsYXkgPSAxMDAwLCBwcm9qZWN0aWxlTmFtZSA9ICJFenJlYWxfVHJ1ZVNob3RfbWlzLnRyb3kiLCAgICBwcm9qZWN0aWxlU3BlZWQgPSAyMDAwLCByYW5nZSA9IDIwMDAwLCByYWRpdXMgPSAxNTAsIHR5cGUgPSAibGluZSIsIGNjID0gImZhbHNlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJBaHJpIl0gPSB7Y2hhck5hbWUgPSAiQWhyaSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiT3JiIG9mIERlY2VwdGlvbiJdID0ge25hbWUgPSAiT3Jib2ZEZWNlcHRpb24iLCBzcGVsbE5hbWUgPSAiQWhyaU9yYm9mRGVjZXB0aW9uIiwgc3BlbGxEZWxheSA9IDMwMCwgcHJvamVjdGlsZU5hbWUgPSAiQWhyaV9PcmJfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxNzAwLCByYW5nZSA9IDg4MCwgcmFkaXVzID0gMTAwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIFsiT3JiIG9mIERlY2VwdGlvbiBCYWNrIl0gPSB7bmFtZSA9ICJPcmJvZkRlY2VwdGlvbkJhY2siLCBzcGVsbE5hbWUgPSAiQWhyaU9yYm9mRGVjZXB0aW9uaGVycGl0eWRlcnAiLCBzcGVsbERlbGF5ID0gMjUwKzM2MCwgcHJvamVjdGlsZU5hbWUgPSAiQWhyaV9PcmJfbWlzXzAyLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSA5MTUsIHJhbmdlID0gODgwLCByYWRpdXMgPSAxMDAsIHR5cGUgPSAibGluZSIsIGNjID0gImZhbHNlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgWyJDaGFybSJdID0ge25hbWUgPSAiQ2hhcm0iLCBzcGVsbE5hbWUgPSAiQWhyaVNlZHVjZSIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gIkFocmlfQ2hhcm1fbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxNjAwLCByYW5nZSA9IDk3NSwgcmFkaXVzID0gNjAsIHR5cGUgPSAibGluZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAidHJ1ZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0NCiAgICAgICAgfX0sDQogICAgWyJPbGFmIl0gPSB7Y2hhck5hbWUgPSAiT2xhZiIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiVW5kZXJ0b3ciXSA9IHtuYW1lID0gIlVuZGVydG93Iiwgc3BlbGxOYW1lID0gIk9sYWZBeGVUaHJvdyIsIHNwZWxsRGVsYXkgPSAzMDAsIHByb2plY3RpbGVOYW1lID0gIm9sYWZfYXhlX21pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTYwMCwgcmFuZ2UgPSAxMDAwLCByYWRpdXMgPSAxMDAsIHR5cGUgPSAibGluZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9DQogICAgICAgIH19LA0KICAgIFsiTGVvbmEiXSA9IHtjaGFyTmFtZSA9ICJMZW9uYSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiWmVuaXRoIEJsYWRlIl0gPSB7bmFtZSA9ICJMZW9uYVplbml0aEJsYWRlIiwgc3BlbGxOYW1lID0gIkxlb25hWmVuaXRoQmxhZGUiLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICJMZW9uYV9aZW5pdGhCbGFkZV9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDIwMDAsIHJhbmdlID0gODc1LCByYWRpdXMgPSAxMTAsIHR5cGUgPSAibGluZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICBbIkxlb25hIFNvbGFyIEZsYXJlIl0gPSB7bmFtZSA9ICJMZW9uYVNvbGFyRmxhcmUiLCBzcGVsbE5hbWUgPSAiTGVvbmFTb2xhckZsYXJlIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiTGVvbmFfU29sYXJGbGFyZV9jYXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDE1MDAsIHJhbmdlID0gMTIwMCwgcmFkaXVzID0gMzAwLCB0eXBlID0gImNpcmN1bGFyIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0NCiAgICAgICAgfX0sDQogICAgWyJLYXJ0aHVzIl0gPSB7Y2hhck5hbWUgPSAiS2FydGh1cyIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiTGF5IFdhc3RlIl0gPSB7bmFtZSA9ICJMYXlXYXN0ZSIsIHNwZWxsTmFtZSA9ICJMYXlXYXN0ZSIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gIkxheVdhc3RlX3BvaW50LnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxNzUwLCByYW5nZSA9IDg3NSwgcmFkaXVzID0gMTUwLCB0eXBlID0gImNpcmN1bGFyIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9DQogICAgICAgIH19LA0KICAgIFsiQ2hvZ2F0aCJdID0ge2NoYXJOYW1lID0gIkNob2dhdGgiLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIlJ1cHR1cmUiXSA9IHtuYW1lID0gIlJ1cHR1cmUiLCBzcGVsbE5hbWUgPSAiUnVwdHVyZSIsIHNwZWxsRGVsYXkgPSAwLCBwcm9qZWN0aWxlTmFtZSA9ICJydXB0dXJlX2Nhc18wMV9yZWRfdGVhbS50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gOTUwLCByYW5nZSA9IDk1MCwgcmFkaXVzID0gMjc1LCB0eXBlID0gImNpcmN1bGFyIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0NCiAgICAgICAgfX0sDQogICAgWyJCbGl0emNyYW5rIl0gPSB7Y2hhck5hbWUgPSAiQmxpdHpjcmFuayIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiUm9ja2V0IEdyYWIiXSA9IHtuYW1lID0gIlJvY2tldEdyYWIiLCBzcGVsbE5hbWUgPSAiUm9ja2V0R3JhYk1pc3NpbGUiLCBzcGVsbERlbGF5ID0gMzAwLCBwcm9qZWN0aWxlTmFtZSA9ICJGaXN0R3JhYl9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDE3MDAsIHJhbmdlID0gOTI1LCByYWRpdXMgPSA4MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJ0cnVlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJBbml2aWEiXSA9IHtjaGFyTmFtZSA9ICJBbml2aWEiLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIkZsYXNoIEZyb3N0Il0gPSB7bmFtZSA9ICJGbGFzaEZyb3N0Iiwgc3BlbGxOYW1lID0gIkZsYXNoRnJvc3RTcGVsbCIsIHNwZWxsRGVsYXkgPSAzMDAsIHByb2plY3RpbGVOYW1lID0gImNyeW9fRmxhc2hGcm9zdF9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDg0NSwgcmFuZ2UgPSAxMTAwLCByYWRpdXMgPSA5MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0NCiAgICAgICAgfX0sDQogICAgWyJaeXJhIl0gPSB7Y2hhck5hbWUgPSAiWnlyYSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiR3Jhc3BpbmcgUm9vdHMiXSA9IHtuYW1lID0gIkdyYXNwaW5nUm9vdHMiLCBzcGVsbE5hbWUgPSAiWnlyYUdyYXNwaW5nUm9vdHMiLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICJaeXJhX0Vfc2VxdWVuY2VfaW1wYWN0LnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxMTUwLCByYW5nZSA9IDgyNSwgcmFkaXVzID0gMjc1LCAgdHlwZSA9ICJsaW5lIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIFsiWnlyYSBQYXNzaXZlIERlYXRoIl0gPSB7bmFtZSA9ICJaeXJhUGFzc2l2ZSIsIHNwZWxsTmFtZSA9ICJ6eXJhcGFzc2l2ZWRlYXRobWFuYWdlciIsIHNwZWxsRGVsYXkgPSA1MDAsIHByb2plY3RpbGVOYW1lID0gInp5cmFfcGFzc2l2ZV9wbGFudF9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDIwMDAsIHJhbmdlID0gMTQ3NCwgcmFkaXVzID0gNjAsICB0eXBlID0gImxpbmUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiTmF1dGlsdXMiXSA9IHtjaGFyTmFtZSA9ICJOYXV0aWx1cyIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiRHJlZGdlIExpbmUiXSA9IHtuYW1lID0gIkRyZWRnZUxpbmUiLCBzcGVsbE5hbWUgPSAiTmF1dGlsdXNBbmNob3JEcmFnIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiTmF1dGlsdXNfUV9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDIwMDAsIHJhbmdlID0gOTUwLCByYWRpdXMgPSA4MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJ0cnVlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJDYWl0bHluIl0gPSB7Y2hhck5hbWUgPSAiQ2FpdGx5biIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiUGlsdG92ZXIgUGVhY2VtYWtlciJdID0ge25hbWUgPSAiUGlsdG92ZXJQZWFjZW1ha2VyIiwgc3BlbGxOYW1lID0gIkNhaXRseW5QaWx0b3ZlclBlYWNlbWFrZXIiLCBzcGVsbERlbGF5ID0gNjI1LCBwcm9qZWN0aWxlTmFtZSA9ICJjYWl0bHluX1FfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAyMjAwLCByYW5nZSA9IDEzMDAsIHJhZGl1cyA9IDgwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIFsiQ2FpdGx5biBFbnRyYXBtZW50Il0gPSB7bmFtZSA9ICJDYWl0bHluRW50cmFwbWVudCIsIHNwZWxsTmFtZSA9ICJDYWl0bHluRW50cmFwbWVudCIsIHNwZWxsRGVsYXkgPSAxNTAsIHByb2plY3RpbGVOYW1lID0gImNhaXRseW5fZW50cmFwbWVudF9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDIwMDAsIHJhbmdlID0gMTAwMCwgcmFkaXVzID0gMCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJ0cnVlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJNdW5kbyJdID0ge2NoYXJOYW1lID0gIkRyTXVuZG8iLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIkluZmVjdGVkIENsZWF2ZXIiXSA9IHtuYW1lID0gIkluZmVjdGVkQ2xlYXZlciIsIHNwZWxsTmFtZSA9ICJJbmZlY3RlZENsZWF2ZXJNaXNzaWxlIiwgc3BlbGxEZWxheSA9IDMwMCwgcHJvamVjdGlsZU5hbWUgPSAiZHJfbXVuZG9faW5mZWN0ZWRfY2xlYXZlcl9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDIwMDAsIHJhbmdlID0gMTAwMCwgcmFkaXVzID0gODAsIHR5cGUgPSAibGluZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAidHJ1ZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiQnJhbmQiXSA9IHtjaGFyTmFtZSA9ICJCcmFuZCIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiQnJhbmRCbGF6ZSJdID0ge25hbWUgPSAiQnJhbmRCbGF6ZSIsIHNwZWxsTmFtZSA9ICJCcmFuZEJsYXplIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiQnJhbmRCbGF6ZV9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDE1NTAsIHJhbmdlID0gMTA1MCwgcmFkaXVzID0gODAsIHR5cGUgPSAibGluZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAidHJ1ZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIFsiUGlsbGFyIG9mIEZsYW1lIl0gPSB7bmFtZSA9ICJQaWxsYXJvZkZsYW1lIiwgc3BlbGxOYW1lID0gIkJyYW5kRmlzc3VyZSIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gIkJyYW5kUE9GX3Rhcl9ncmVlbi50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gOTAwLCByYW5nZSA9IDExNTAsIHJhZGl1cyA9IDI0MCwgdHlwZSA9ICJjaXJjdWxhciIsIGNjID0gImZhbHNlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifQ0KICAgICAgICB9fSwNCiAgICBbIkNvcmtpIl0gPSB7Y2hhck5hbWUgPSAiQ29ya2kiLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIk1pc3NpbGUgQmFycmFnZSJdID0ge25hbWUgPSAiTWlzc2lsZUJhcnJhZ2UiLCBzcGVsbE5hbWUgPSAiTWlzc2lsZUJhcnJhZ2UiLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICJjb3JraV9NaXNzbGVCYXJyYWdlX21pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTk1MCwgcmFuZ2UgPSAxMzAwLCByYWRpdXMgPSA0MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAidHJ1ZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIFsiTWlzc2lsZSBCYXJyYWdlIGJpZyJdID0ge25hbWUgPSAiTWlzc2lsZUJhcnJhZ2ViaWciLCBzcGVsbE5hbWUgPSAiTWlzc2lsZUJhcnJhZ2UhIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiQ29ya2lfTWlzc2xlQmFycmFnZV9ERF9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDIwMDAsIHJhbmdlID0gMTMwMCwgcmFkaXVzID0gNDAsIHR5cGUgPSAibGluZSIsIGNjID0gImZhbHNlIiwgY29sbGlzaW9uID0gInRydWUiLCBzaGllbGRub3cgPSAidHJ1ZSJ9DQogICAgICAgIH19LA0KICAgIFsiVHdpc3RlZEZhdGUiXSA9IHtjaGFyTmFtZSA9ICJUd2lzdGVkRmF0ZSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiTG9hZGVkIERpY2UiXSA9IHtuYW1lID0gIkxvYWRlZERpY2UiLCBzcGVsbE5hbWUgPSAiV2lsZENhcmRzIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiUm91bGV0dGVfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxMDAwLCByYW5nZSA9IDE0NTAsIHJhZGl1cyA9IDQwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiU3dhaW4iXSA9IHtjaGFyTmFtZSA9ICJTd2FpbiIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiTmV2ZXJtb3ZlIl0gPSB7bmFtZSA9ICJOZXZlcm1vdmUiLCBzcGVsbE5hbWUgPSAiU3dhaW5TaGFkb3dHcmFzcCIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gInN3YWluX3NoYWRvd0dyYXNwX3RyYW5zZm9ybS50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTAwMCwgcmFuZ2UgPSA5MDAsIHJhZGl1cyA9IDE4MCwgdHlwZSA9ICJjaXJjdWxhciIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9DQogICAgICAgIH19LA0KICAgIFsiQ2Fzc2lvcGVpYSJdID0ge2NoYXJOYW1lID0gIkNhc3Npb3BlaWEiLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIk5veGlvdXMgQmxhc3QiXSA9IHtuYW1lID0gIk5veGlvdXNCbGFzdCIsIHNwZWxsTmFtZSA9ICJDYXNzaW9wZWlhTm94aW91c0JsYXN0Iiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiQ2Fzc05veGlvdXNTbmFrZVBsYW5lX2dyZWVuLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSA1MDAsIHJhbmdlID0gODUwLCByYWRpdXMgPSAxMzAsIHR5cGUgPSAiY2lyY3VsYXIiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiU2l2aXIiXSA9IHtjaGFyTmFtZSA9ICJTaXZpciIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiQm9vbWVyYW5nIEJsYWRlIl0gPSB7bmFtZSA9ICJCb29tZXJhbmdCbGFkZSIsIHNwZWxsTmFtZSA9ICJTaXZpclEiLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICJTaXZpcl9CYXNlX1FfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxMzUwLCByYW5nZSA9IDEyNTAsIHJhZGl1cyA9IDEwMSwgdHlwZSA9ICJsaW5lIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICB9fSwNCiAgICBbIkFzaGUiXSA9IHtjaGFyTmFtZSA9ICJBc2hlIiwgc2tpbGxzaG90cyA9IHsNCiAgICAgICAgWyJFbmNoYW50ZWQgQXJyb3ciXSA9IHtuYW1lID0gIkVuY2hhbnRlZEFycm93Iiwgc3BlbGxOYW1lID0gIkVuY2hhbnRlZENyeXN0YWxBcnJvdyIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gIkFzaGVfQmFzZV9SX21pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTYwMCwgcmFuZ2UgPSAyNTAwMCwgcmFkaXVzID0gMTIwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJLb2dNYXciXSA9IHtjaGFyTmFtZSA9ICJLb2dNYXciLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIkxpdmluZyBBcnRpbGxlcnkiXSA9IHtuYW1lID0gIkxpdmluZ0FydGlsbGVyeSIsIHNwZWxsTmFtZSA9ICJLb2dNYXdMaXZpbmdBcnRpbGxlcnkiLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICJLb2dNYXdMaXZpbmdBcnRpbGxlcnlfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxMDUwLCByYW5nZSA9IDIyMDAsIHJhZGl1cyA9IDIyNSwgdHlwZSA9ICJjaXJjdWxhciIsIGNjID0gImZhbHNlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifQ0KICAgICAgICB9fSwNCiAgICBbIktoYXppeCJdID0ge2NoYXJOYW1lID0gIktoYXppeCIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiS2hheml4VyJdID0ge25hbWUgPSAiS2hheml4VyIsIHNwZWxsTmFtZSA9ICJLaGF6aXhXIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiS2hheml4X1dfbWlzX2VuaGFuY2VkLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxNjUwLCByYW5nZSA9IDEwMDAsIHJhZGl1cyA9IDcwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gInRydWUiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICBbImtoYXppeHdsb25nIl0gPSB7bmFtZSA9ICJraGF6aXh3bG9uZyIsIHNwZWxsTmFtZSA9ICJraGF6aXh3bG9uZyIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gIktoYXppeF9XX21pc19lbmhhbmNlZC50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTcwMCwgcmFuZ2UgPSAxMDI1LCByYWRpdXMgPSA3MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJ0cnVlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJaZWQiXSA9IHtjaGFyTmFtZSA9ICJaZWQiLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIlplZFNodXJpa2VuIl0gPSB7bmFtZSA9ICJaZWRTaHVyaWtlbiIsIHNwZWxsTmFtZSA9ICJaZWRTaHVyaWtlbiIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gIlplZF9RX01pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTcwMCwgcmFuZ2UgPSA5MDAsIHJhZGl1cyA9IDUwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiTGVibGFuYyJdID0ge2NoYXJOYW1lID0gIkxlYmxhbmMiLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIkV0aGVyZWFsIENoYWlucyJdID0ge25hbWUgPSAiRXRoZXJlYWxDaGFpbnMiLCBzcGVsbE5hbWUgPSAiTGVibGFuY1NvdWxTaGFja2xlIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAibGVCbGFuY19zaGFja2xlX21pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTc1MCwgcmFuZ2UgPSA5NjAsIHJhZGl1cyA9IDcwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gInRydWUiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICBbIkV0aGVyZWFsIENoYWlucyBSIl0gPSB7bmFtZSA9ICJFdGhlcmVhbENoYWluc1IiLCBzcGVsbE5hbWUgPSAiTGVibGFuY1NvdWxTaGFja2xlTSIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gImxlQmxhbmNfc2hhY2tsZV9taXNfdWx0LnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxNzUwLCByYW5nZSA9IDk2MCwgcmFkaXVzID0gNzAsIHR5cGUgPSAibGluZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAidHJ1ZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiRHJhdmVuIl0gPSB7Y2hhck5hbWUgPSAiRHJhdmVuIiwgc2tpbGxzaG90cyA9IHsNCiAgICAgICAgWyJTdGFuZCBBc2lkZSJdID0ge25hbWUgPSAiU3RhbmRBc2lkZSIsIHNwZWxsTmFtZSA9ICJEcmF2ZW5Eb3VibGVTaG90Iiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiRHJhdmVuX0VfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxNDAwLCByYW5nZSA9IDEwNTAsIHJhZGl1cyA9IDEzMCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIFsiRHJhdmVuUiJdID0ge25hbWUgPSAiRHJhdmVuUiIsIHNwZWxsTmFtZSA9ICJEcmF2ZW5SQ2FzdCIsIHNwZWxsRGVsYXkgPSA1MDAsIHByb2plY3RpbGVOYW1lID0gIkRyYXZlbl9SX21pcyEudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDIwMDAsIHJhbmdlID0gMjUwMDAsIHJhZGl1cyA9IDE2MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICB9fSwNCiAgICBbIkVsaXNlIl0gPSB7Y2hhck5hbWUgPSAiRWxpc2UiLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIkNvY29vbiJdID0ge25hbWUgPSAiQ29jb29uIiwgc3BlbGxOYW1lID0gIkVsaXNlSHVtYW5FIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiRWxpc2VfaHVtYW5fRV9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDE2MDAsIHJhbmdlID0gMTA3NSwgcmFkaXVzID0gNzAsIHR5cGUgPSAibGluZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAidHJ1ZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0NCiAgICAgICAgfX0sDQogICAgWyJMdWx1Il0gPSB7Y2hhck5hbWUgPSAiTHVsdSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiTHVsdVEiXSA9IHtuYW1lID0gIkx1bHVRIiwgc3BlbGxOYW1lID0gIkx1bHVRIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiTHVsdV9RX01pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTUwMCwgcmFuZ2UgPSA5MjUsIHJhZGl1cyA9IDUwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifQ0KICAgICAgICB9fSwNCiAgICBbIlRocmVzaCJdID0ge2NoYXJOYW1lID0gIlRocmVzaCIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiVGhyZXNoUSJdID0ge25hbWUgPSAiVGhyZXNoUSIsIHNwZWxsTmFtZSA9ICJUaHJlc2hRIiwgc3BlbGxEZWxheSA9IDUwMCwgcHJvamVjdGlsZU5hbWUgPSAiVGhyZXNoX1Ffd2hpcF9iZWFtLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxOTAwLCByYW5nZSA9IDExMDAsIHJhZGl1cyA9IDY1LCB0eXBlID0gImxpbmUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gInRydWUiLCBzaGllbGRub3cgPSAidHJ1ZSJ9DQogICAgICAgIH19LA0KICAgIFsiU2hlbiJdID0ge2NoYXJOYW1lID0gIlNoZW4iLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIlNoYWRvd0Rhc2giXSA9IHtuYW1lID0gIlNoYWRvd0Rhc2giLCBzcGVsbE5hbWUgPSAiU2hlblNoYWRvd0Rhc2giLCBzcGVsbERlbGF5ID0gMCwgcHJvamVjdGlsZU5hbWUgPSAic2hlbl9zaGFkb3dEYXNoX21pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMzAwMCwgcmFuZ2UgPSA2MDAsIHJhZGl1cyA9IDUwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifQ0KICAgICAgICB9fSwNCiAgICBbIlF1aW5uIl0gPSB7Y2hhck5hbWUgPSAiUXVpbm4iLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIlF1aW5uUSJdID0ge25hbWUgPSAiUXVpbm5RIiwgc3BlbGxOYW1lID0gIlF1aW5uUSIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gIlF1aW5uX1FfbWlzc2lsZS50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTU1MCwgcmFuZ2UgPSAxMDUwLCByYWRpdXMgPSA4MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAidHJ1ZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0NCiAgICAgICAgfX0sDQogICAgWyJWZWlnYXIiXSA9IHtjaGFyTmFtZSA9ICJWZWlnYXIiLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIkRhcmsgTWF0dGVyIl0gPSB7bmFtZSA9ICJWZWlnYXJEYXJrTWF0dGVyIiwgc3BlbGxOYW1lID0gIlZlaWdhckRhcmtNYXR0ZXIiLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICIhIiwgcHJvamVjdGlsZVNwZWVkID0gOTAwLCByYW5nZSA9IDkwMCwgcmFkaXVzID0gMjI1LCB0eXBlID0gImNpcmN1bGFyIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9DQogICAgICAgIH19LA0KICAgIFsiSmF5Y2UiXSA9IHtjaGFyTmFtZSA9ICJKYXljZSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiSmF5Y2VTaG9ja0JsYXN0Il0gPSB7bmFtZSA9ICJKYXljZVNob2NrQmxhc3QiLCBzcGVsbE5hbWUgPSAiamF5Y2VzaG9ja2JsYXN0Iiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiSmF5Y2VPcmJMaWdodG5pbmcudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDE0NTAsIHJhbmdlID0gMTA1MCwgcmFkaXVzID0gNzAsIHR5cGUgPSAibGluZSIsIGNjID0gImZhbHNlIiwgY29sbGlzaW9uID0gInRydWUiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICBbIkpheWNlU2hvY2tCbGFzdENoYXJnZWQiXSA9IHtuYW1lID0gIkpheWNlU2hvY2tCbGFzdENoYXJnZWQiLCBzcGVsbE5hbWUgPSAiamF5Y2VzaG9ja2JsYXN0Iiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiSmF5Y2VPcmJMaWdodG5pbmdDaGFyZ2VkLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxODkwLCByYW5nZSA9IDE0NzAsIHJhZGl1cyA9IDcwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJ0cnVlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJOYW1pIl0gPSB7Y2hhck5hbWUgPSAiTmFtaSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiTmFtaVEiXSA9IHtuYW1lID0gIk5hbWlRIiwgc3BlbGxOYW1lID0gIk5hbWlRIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiTmFtaV9RX21pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTUwMCwgcmFuZ2UgPSA4NzUsIHJhZGl1cyA9IDIyNSwgdHlwZSA9ICJjaXJjbGUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifQ0KICAgICAgICB9fSwNCiAgICBbIkZpenoiXSA9IHtjaGFyTmFtZSA9ICJGaXp6Iiwgc2tpbGxzaG90cyA9IHsNCiAgICAgICAgWyJGaXp6IFVsdGltYXRlIl0gPSB7bmFtZSA9ICJGaXp6VUxUIiwgc3BlbGxOYW1lID0gIkZpenpNYXJpbmVyRG9vbSIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gIkZpenpfVWx0aW1hdGVNaXNzaWxlLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxMzAwLCByYW5nZSA9IDEyNzUsIHJhZGl1cyA9IDgwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJWYXJ1cyJdID0ge2NoYXJOYW1lID0gIlZhcnVzIiwgc2tpbGxzaG90cyA9IHsNCiAgICAgICAgWyJWYXJ1cyBRIE1pc3NpbGUiXSA9IHtuYW1lID0gIlZhcnVzUU1pc3NpbGUiLCBzcGVsbE5hbWUgPSAic29tZXJhbmRvbXNwZWxsbmFtZXRoYXR3aWxsbmV2ZXJnZXRjYWxsZWQiLCBzcGVsbERlbGF5ID0gMCwgcHJvamVjdGlsZU5hbWUgPSAiVmFydXNRX21pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTkwMCwgcmFuZ2UgPSAxNjAwLCByYWRpdXMgPSA3MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICBbIlZhcnVzUiJdID0ge25hbWUgPSAiVmFydXNSIiwgc3BlbGxOYW1lID0gIlZhcnVzUiIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gIlZhcnVzUk1pc3NpbGUudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDE4NTAsIHJhbmdlID0gMTYyNSwgcmFkaXVzID0gMTAwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJLYXJtYSJdID0ge2NoYXJOYW1lID0gIkthcm1hIiwgc2tpbGxzaG90cyA9IHsNCiAgICAgICAgWyJLYXJtYVEiXSA9IHtuYW1lID0gIkthcm1hUSIsIHNwZWxsTmFtZSA9ICJLYXJtYVEiLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICJURU1QX0thcm1hUU1pcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMTcwMCwgcmFuZ2UgPSAxMDc1LCByYWRpdXMgPSA5MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAidHJ1ZSIsIGNvbGxpc2lvbiA9ICJ0cnVlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJBYXRyb3giXSA9IHtjaGFyTmFtZSA9ICJBYXRyb3giLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIkJsYWRlIG9mIFRvcm1lbnQiXSA9IHtuYW1lID0gIkJsYWRlb2ZUb3JtZW50Iiwgc3BlbGxOYW1lID0gIkFhdHJveEUiLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICJBYXRyb3hCbGFkZW9mVG9ybWVudF9taXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDEyMDAsIHJhbmdlID0gMTAwMCwgcmFkaXVzID0gNzUsIHR5cGUgPSAibGluZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICBbIkFhdHJveFEiXSA9IHtuYW1lID0gIkFhdHJveFEiLCBzcGVsbE5hbWUgPSAiQWF0cm94USIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gIkFhdHJveFEudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDQ1MCwgcmFuZ2UgPSA2NTAsIHJhZGl1cyA9IDE0NSwgdHlwZSA9ICJjaXJjbGUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJYZXJhdGgiXSA9IHtjaGFyTmFtZSA9ICJYZXJhdGgiLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIlhlcmF0aCBBcmNhbm9wdWxzZSJdID0gIHtuYW1lID0gIlhlcmF0aEFyY2Fub3B1bHNlIiwgc3BlbGxOYW1lID0gIlhlcmF0aEFyY2Fub3B1bHNlIiwgc3BlbGxEZWxheSA9IDEzNzUsIHByb2plY3RpbGVOYW1lID0gIlhlcmF0aF9CZWFtX2Nhcy50cm95IiwgcHJvamVjdGlsZVNwZWVkID0gMjUwMDAsIHJhbmdlID0gNzUwLCByYWRpdXMgPSAxMDAsIHR5cGUgPSAibGluZSIsIGNjID0gImZhbHNlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgWyJYZXJhdGggQXJjYW5vcHVsc2UgRXh0ZW5kZWQiXSA9ICB7bmFtZSA9ICJYZXJhdGhBcmNhbm9wdWxzZUV4dGVuZGVkIiwgc3BlbGxOYW1lID0gInhlcmF0aGFyY2Fub3B1bHNlZXh0ZW5kZWQiLCBzcGVsbERlbGF5ID0gMTQwMCwgcHJvamVjdGlsZU5hbWUgPSAiWGVyYXRoX0JlYW1fY2FzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAyNTAwMCwgcmFuZ2UgPSAxNjI1LCByYWRpdXMgPSAxMDAsIHR5cGUgPSAibGluZSIsIGNjID0gImZhbHNlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgWyJ4ZXJhdGhhcmNhbmViYXJyYWdld3JhcHBlciJdID0ge25hbWUgPSAieGVyYXRoYXJjYW5lYmFycmFnZXdyYXBwZXIiLCBzcGVsbE5hbWUgPSAieGVyYXRoYXJjYW5lYmFycmFnZXdyYXBwZXIiLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICJYZXJhdGhfRV9jYXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDMwMCwgcmFuZ2UgPSAxMTAwLCByYWRpdXMgPSAyNjUsIHR5cGUgPSAiY2lyY3VsYXIiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIFsieGVyYXRoYXJjYW5lYmFycmFnZXdyYXBwZXJleHQiXSA9IHtuYW1lID0gInhlcmF0aGFyY2FuZWJhcnJhZ2V3cmFwcGVyZXh0Iiwgc3BlbGxOYW1lID0gInhlcmF0aGFyY2FuZWJhcnJhZ2V3cmFwcGVyZXh0Iiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiWGVyYXRoX0VfY2FzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAzMDAsIHJhbmdlID0gMTcwMCwgcmFkaXVzID0gMjY1LCB0eXBlID0gImNpcmN1bGFyIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICB9fSwNCiAgICBbIkx1Y2lhbiJdID0ge2NoYXJOYW1lID0gIkx1Y2lhbiIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiTHVjaWFuUSJdID0gIHtuYW1lID0gIkx1Y2lhblEiLCBzcGVsbE5hbWUgPSAiTHVjaWFuUSIsIHNwZWxsRGVsYXkgPSAzNTAsIHByb2plY3RpbGVOYW1lID0gIkx1Y2lhbl9RX2xhc2VyLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAyNTAwMCwgcmFuZ2UgPSA1MDAqMiwgcmFkaXVzID0gNjUsIHR5cGUgPSAibGluZSIsIGNjID0gImZhbHNlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgWyJMdWNpYW5XIl0gPSAge25hbWUgPSAiTHVjaWFuVyIsIHNwZWxsTmFtZSA9ICJMdWNpYW5XIiwgc3BlbGxEZWxheSA9IDMwMCwgcHJvamVjdGlsZU5hbWUgPSAiTHVjaWFuX1dfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxNjAwLCByYW5nZSA9IDEwMDAsIHJhZGl1cyA9IDgwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiVmlrdG9yIl0gPSB7Y2hhck5hbWUgPSAiVmlrdG9yIiwgc2tpbGxzaG90cyA9IHsNCiAgICAgICAgWyJWaWt0b3JEZWF0aFJheTEiXSA9ICB7bmFtZSA9ICJWaWt0b3JEZWF0aFJheTEiLCBzcGVsbE5hbWUgPSAiVmlrdG9yRGVhdGhSYXkhIiwgc3BlbGxEZWxheSA9IDUwMCwgcHJvamVjdGlsZU5hbWUgPSAiVmlrdG9yX0RlYXRoUmF5X0ZpeF9NaXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDEzNTAsIHJhbmdlID0gNTI1LCByYWRpdXMgPSA4MCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICBbIlZpa3RvckRlYXRoUmF5MiJdID0gIHtuYW1lID0gIlZpa3RvckRlYXRoUmF5MiIsIHNwZWxsTmFtZSA9ICJWaWt0b3JEZWF0aFJheSEiLCBzcGVsbERlbGF5ID0gNTAwLCBwcm9qZWN0aWxlTmFtZSA9ICJWaWt0b3JfRGVhdGhSYXlfRml4X01pc19BdWdtZW50ZWQudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDc4MCwgcmFuZ2UgPSA3MDAsIHJhZGl1cyA9IDgwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiUnVtYmxlIl0gPSB7Y2hhck5hbWUgPSAiUnVtYmxlIiwgc2tpbGxzaG90cyA9IHsNCiAgICAgICAgWyJSdW1ibGVHcmVuYWRlIl0gPSAge25hbWUgPSAiUnVtYmxlR3JlbmFkZSIsIHNwZWxsTmFtZSA9ICJSdW1ibGVHcmVuYWRlIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAicnVtYmxlX3RhemVfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAyMDAwLCByYW5nZSA9IDk1MCwgcmFkaXVzID0gOTAsIHR5cGUgPSAibGluZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAidHJ1ZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiTm9jdHVybmUiXSA9IHtjaGFyTmFtZSA9ICJOb2N0dXJuZSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiTm9jdHVybmVEdXNrYnJpbmdlciJdID0gIHtuYW1lID0gIk5vY3R1cm5lRHVza2JyaW5nZXIiLCBzcGVsbE5hbWUgPSAiTm9jdHVybmVEdXNrYnJpbmdlciIsIHNwZWxsRGVsYXkgPSAyNTAsIHByb2plY3RpbGVOYW1lID0gIk5vY3R1cm5lRHVza2JyaW5nZXJfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxNDAwLCByYW5nZSA9IDEyMDAsIHJhZGl1cyA9IDYwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiWWFzdW8iXSA9IHtjaGFyTmFtZSA9ICJZYXN1byIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsieWFzdW9xMyJdID0gIHtuYW1lID0gInlhc3VvcTMiLCBzcGVsbE5hbWUgPSAieWFzdW9xM3ciLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICJZYXN1b19RX3dpbmRfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxMjAwLCByYW5nZSA9IDEwMDAsIHJhZGl1cyA9IDgwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgWyJ5YXN1b3ExIl0gPSAge25hbWUgPSAieWFzdW9xMSIsIHNwZWxsTmFtZSA9ICJ5YXN1b1FXIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiWWFzdW9fUV9XaW5kU3RyaWtlLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAyNTAwMCwgcmFuZ2UgPSA0NzUsIHJhZGl1cyA9IDQwLCB0eXBlID0gImxpbmUiLCBjYyA9ICJmYWxzZSIsIGNvbGxpc2lvbiA9ICJmYWxzZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIFsieWFzdW9xMiJdID0gIHtuYW1lID0gInlhc3VvcTIiLCBzcGVsbE5hbWUgPSAieWFzdW9xMnciLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICJZYXN1b19RX3dpbmRzdHJpa2VfMDIudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDI1MDAwLCByYW5nZSA9IDQ3NSwgcmFkaXVzID0gNDAsIHR5cGUgPSAibGluZSIsIGNjID0gImZhbHNlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwNCiAgICAgICAgfX0sDQogICAgWyJPcmlhbm5hIl0gPSB7Y2hhck5hbWUgPSAiT3JpYW5uYSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiT3JpYW5hSXp1bmFDb21tYW5kIl0gPSAge25hbWUgPSAiT3JpYW5hSXp1bmFDb21tYW5kIiwgc3BlbGxOYW1lID0gIk9yaWFuYUl6dW5hQ29tbWFuZCIsIHNwZWxsRGVsYXkgPSAwLCBwcm9qZWN0aWxlTmFtZSA9ICJPcmlhbmFfR2hvc3RfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxMzAwLCByYW5nZSA9IDgwMCwgcmFkaXVzID0gODAsIHR5cGUgPSAibGluZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICBbIk9yaWFuYURldG9uYXRlQ29tbWFuZCJdID0gIHtuYW1lID0gIk9yaWFuYURldG9uYXRlQ29tbWFuZCIsIHNwZWxsTmFtZSA9ICJPcmlhbmFEZXRvbmF0ZUNvbW1hbmQiLCBzcGVsbERlbGF5ID0gMTAwLCBwcm9qZWN0aWxlTmFtZSA9ICJPcmlhbmFfU2hvY2t3YXZlX25vdmEudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDQwMCwgcmFuZ2UgPSAyMDAwLCByYWRpdXMgPSA0MDAsIHR5cGUgPSAiY2lyY3VsYXIiLCBjYyA9ICJ0cnVlIiwgY29sbGlzaW9uID0gImZhbHNlIiwgc2hpZWxkbm93ID0gInRydWUifSwgICANCiAgICAgICAgfX0sDQogICAgWyJaaWdncyJdID0ge2NoYXJOYW1lID0gIlppZ2dzIiwgc2tpbGxzaG90cyA9IHsNCiAgICAgICAgWyJaaWdnc1EiXSA9ICB7bmFtZSA9ICJaaWdnc1EiLCBzcGVsbE5hbWUgPSAiWmlnZ3NRIiwgc3BlbGxEZWxheSA9IDI1MCwgcHJvamVjdGlsZU5hbWUgPSAiWmlnZ3NRLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSAxNzAwLCByYW5nZSA9IDE0MDAsIHJhZGl1cyA9IDE1NSwgdHlwZSA9ICJsaW5lIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAidHJ1ZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIH19LA0KICAgIFsiQW5uaWUiXSA9IHtjaGFyTmFtZSA9ICJBbm5pZSIsIHNraWxsc2hvdHMgPSB7DQogICAgICAgIFsiQW5uaWVSIl0gPSAge25hbWUgPSAiQW5uaWVSIiwgc3BlbGxOYW1lID0gIkluZmVybmFsR3VhcmRpYW4iLCBzcGVsbERlbGF5ID0gMTAwLCBwcm9qZWN0aWxlTmFtZSA9ICJub3RoaW5nIiwgcHJvamVjdGlsZVNwZWVkID0gMCwgcmFuZ2UgPSA2MDAsIHJhZGl1cyA9IDMwMCwgdHlwZSA9ICJjaXJjdWxhciIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICB9fSwNCiAgICBbIkdhbGlvIl0gPSB7Y2hhck5hbWUgPSAiR2FsaW8iLCBza2lsbHNob3RzID0gew0KICAgICAgICBbIkdhbGlvUmVzb2x1dGVTbWl0ZSJdID0gIHtuYW1lID0gIkdhbGlvUmVzb2x1dGVTbWl0ZSIsIHNwZWxsTmFtZSA9ICJHYWxpb1Jlc29sdXRlU21pdGUiLCBzcGVsbERlbGF5ID0gMjUwLCBwcm9qZWN0aWxlTmFtZSA9ICJnYWxpb19jb25jdXNzaXZlQmxhc3RfbWlzLnRyb3kiLCBwcm9qZWN0aWxlU3BlZWQgPSA4NTAsIHJhbmdlID0gMjAwMCwgcmFkaXVzID0gMjAwLCB0eXBlID0gImNpcmNsZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICB9fSwNCiAgICBbIkppbngiXSA9IHtjaGFyTmFtZSA9ICJKaW54Iiwgc2tpbGxzaG90cyA9IHsNCiAgICAgICAgWyJXIl0gPSAge25hbWUgPSAiWmFwIiwgc3BlbGxOYW1lID0gIkppbnhXIiwgc3BlbGxEZWxheSA9IDYwMCwgcHJvamVjdGlsZU5hbWUgPSAiSmlueF9XX0JlYW0udHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDMzMDAsIHJhbmdlID0gMTUwMCwgcmFkaXVzID0gNzAsIHR5cGUgPSAibGluZSIsIGNjID0gInRydWUiLCBjb2xsaXNpb24gPSAidHJ1ZSIsIHNoaWVsZG5vdyA9ICJ0cnVlIn0sDQogICAgICAgIFsiUiJdID0gIHtuYW1lID0gIlN1cGVyTWVnYURlYXRoUm9ja2V0Iiwgc3BlbGxOYW1lID0gIkppbnhSV3JhcHBlciIsIHNwZWxsRGVsYXkgPSA2MDAsIHByb2plY3RpbGVOYW1lID0gIkppbnhfUl9NaXMudHJveSIsIHByb2plY3RpbGVTcGVlZCA9IDE3MDAsIHJhbmdlID0gMjAwMDAsIHJhZGl1cyA9IDEyMCwgdHlwZSA9ICJsaW5lIiwgY2MgPSAiZmFsc2UiLCBjb2xsaXNpb24gPSAiZmFsc2UiLCBzaGllbGRub3cgPSAidHJ1ZSJ9LA0KICAgICAgICB9fSwgICAgICAgICANCiAgICAgICAgfQ0Kd3JvdGVkaXNjbGFpbWVyID0gZmFsc2UNCmVuZW15ZXMgPSB7fQ0KbkFsbGllcyA9IDANCmFsbGllcyA9IHt9DQpuRW5lbWllcyA9IDANCmV2YWRpbmcgICAgICAgICAgICAgPSBmYWxzZQ0KYWxsb3dDdXN0b21Nb3ZlbWVudCA9IHRydWUNCmNhcHR1cmVNb3ZlbWVudHMgICAgPSB0cnVlDQpsYXN0TW92ZW1lbnQgICAgICAgID0ge30NCmRldGVjdGVkU2tpbGxzaG90cyAgPSB7fQ0KblNraWxsc2hvdHMgPSAwDQpDYXN0aW5nU3BlbGwgPSBmYWxzZQ0KbGFzdHNldCA9IDANCnRydWVXaWR0aCA9IHt9DQp0cnVlU3BlZWQgPSB7fQ0KdHJ1ZURlbGF5ID0ge30NCmhhdmVmbGFzaCA9IGZhbHNlDQpmbGFzaFNsb3QgPSBuaWwNCmZsYXNocmVhZHkgPSBmYWxzZQ0KbGFzdHNwZWxsID0gIlEiDQp1c2VmbGFzaCA9IGZhbHNlDQpzaGllbGRzbG90ID0gX0UNCnNoaWVsZHRpY2sgPSBuaWwNCmFscmVhZHl3cml0dGVuID0gZmFsc2UNCnRoYXRmaWxlID0gU0NSSVBUX1BBVEguLiJtb3ZlbWVudGJsb2NrLnR4dCINCmN1cnJlbnRidWZmZXIgPSAwDQpidWZmZXJzZXQgPSBmYWxzZQ0KbGFzdG5vbmF0dGFjayA9IDANCg0KZnVuY3Rpb24gZ2V0VGFyZ2V0KHRhcmdldElkKQ0KICAgIGlmIHRhcmdldElkIH49IDAgYW5kIHRhcmdldElkIH49IG5pbCB0aGVuDQogICAgICAgIHJldHVybiBvYmpNYW5hZ2VyOkdldE9iamVjdEJ5TmV0d29ya0lkKHRhcmdldElkKQ0KICAgIGVuZA0KICAgIHJldHVybiBuaWwNCmVuZA0KDQpmdW5jdGlvbiBPblNlbmRQYWNrZXQocCkNCmlmIFZJUF9VU0VSIHRoZW4NCiAgICBsb2NhbCBwYWNrZXQgPSBQYWNrZXQocCkNCiAgICBpZiBwYWNrZXQ6Z2V0KCduYW1lJykgPT0gJ1NfTU9WRScgdGhlbg0KICAgICAgICBpZiBwYWNrZXQ6Z2V0KCdzb3VyY2VOZXR3b3JrSWQnKSA9PSBteUhlcm8ubmV0d29ya0lEIHRoZW4NCiAgICAgICAgICAgIGlmIGNhcHR1cmVNb3ZlbWVudHMgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHBhY2tldDpnZXQoJ3RhcmdldE5ldHdvcmtJZCcpID09ICIwIiB0aGVuDQogICAgICAgICAgICAgICAgbGFzdE1vdmVtZW50LmRlc3RpbmF0aW9uID0gUG9pbnQyKHBhY2tldDpnZXQoJ3gnKSwgcGFja2V0OmdldCgneScpKQ0KICAgICAgICAgICAgICAgIGxhc3RNb3ZlbWVudC50eXBlID0gcGFja2V0OmdldCgndHlwZScpDQogICAgICAgICAgICAgICAgbGFzdE1vdmVtZW50LnRhcmdldElkID0gcGFja2V0OmdldCgndGFyZ2V0TmV0d29ya0lkJykNCiAgICAgICAgICAgICAgICBsYXN0bm9uYXR0YWNrID0gR2V0VGlja0NvdW50KCkNCiAgICAgICAgICAgIGVsc2VpZiBsYXN0bm9uYXR0YWNrICsgMTAwMCA8IEdldFRpY2tDb3VudCgpIHRoZW4NCiAgICAgICAgICAgICAgICBsYXN0TW92ZW1lbnQuZGVzdGluYXRpb24gPSBQb2ludDIocGFja2V0OmdldCgneCcpLCBwYWNrZXQ6Z2V0KCd5JykpDQogICAgICAgICAgICAgICAgbGFzdE1vdmVtZW50LnR5cGUgPSBwYWNrZXQ6Z2V0KCd0eXBlJykNCiAgICAgICAgICAgICAgICBsYXN0TW92ZW1lbnQudGFyZ2V0SWQgPSBwYWNrZXQ6Z2V0KCd0YXJnZXROZXR3b3JrSWQnKQ0KICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICBpZiBldmFkaW5nIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksIGRldGVjdGVkU2tpbGxzaG90IGluIHBhaXJzKGRldGVjdGVkU2tpbGxzaG90cykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRldGVjdGVkU2tpbGxzaG90IGFuZCBkZXRlY3RlZFNraWxsc2hvdC5ldmFkaW5nIGFuZCBpbkRhbmdlcm91c0FyZWEoZGV0ZWN0ZWRTa2lsbHNob3QsIFBvaW50MihteUhlcm8ueCwgbXlIZXJvLnopKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9kZ2VTa2lsbHNob3QoZGV0ZWN0ZWRTa2lsbHNob3QpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbm90IGFsbG93Q3VzdG9tTW92ZW1lbnQgdGhlbg0KICAgICAgICAgICAgICAgIHBhY2tldDpibG9jaygpDQogICAgICAgICAgICBlbmQgICAgICAgICAgDQogICAgICAgIGVuZA0KICAgIGVsc2VpZiBwYWNrZXQ6Z2V0KCduYW1lJykgPT0gJ1NfQ0FTVCcgdGhlbg0KICAgICAgICBpZiBjYXB0dXJlTW92ZW1lbnRzIGFuZCBsYXN0bm9uYXR0YWNrICsgMTAwMCA8IEdldFRpY2tDb3VudCgpIHRoZW4NCiAgICAgICAgICAgIGxhc3RNb3ZlbWVudC5zcGVsbElkID0gcGFja2V0OmdldCgnc3BlbGxJZCcpDQogICAgICAgICAgICBsYXN0TW92ZW1lbnQudHlwZSA9IDcNCiAgICAgICAgICAgIGxhc3RNb3ZlbWVudC50YXJnZXRJZCA9IHBhY2tldDpnZXQoJ3RhcmdldE5ldHdvcmtJZCcpDQogICAgICAgICAgICBsYXN0TW92ZW1lbnQuZGVzdGluYXRpb24gPSBQb2ludDIocGFja2V0OmdldCgndG9YJyksIHBhY2tldDpnZXQoJ3RvWScpKQ0KDQogICAgICAgICAgICBpZiBldmFkaW5nIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaSwgZGV0ZWN0ZWRTa2lsbHNob3QgaW4gcGFpcnMoZGV0ZWN0ZWRTa2lsbHNob3RzKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiBkZXRlY3RlZFNraWxsc2hvdCBhbmQgZGV0ZWN0ZWRTa2lsbHNob3QuZXZhZGluZyBhbmQgaW5EYW5nZXJvdXNBcmVhKGRldGVjdGVkU2tpbGxzaG90LCBQb2ludDIobXlIZXJvLngsIG15SGVyby56KSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZG9kZ2VTa2lsbHNob3QoZGV0ZWN0ZWRTa2lsbHNob3QpDQogICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCg0KICAgICAgICBpZiBub3QgYWxsb3dDdXN0b21Nb3ZlbWVudCB0aGVuDQogICAgICAgICAgICBpZiBwYWNrZXQ6Z2V0KCdzcGVsbElkJykgPT0gMTIgdGhlbg0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHBhY2tldDpibG9jaygpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmVuZA0KDQpmdW5jdGlvbiBnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpDQogICAgbW91c2VQb3NpdGlvbiA9IFBvaW50Mihtb3VzZVBvcy54LCBtb3VzZVBvcy56KQ0KICAgIGlmIFZJUF9VU0VSIHRoZW4NCiAgICAgICAgaWYgbGFzdE1vdmVtZW50LnR5cGUgPT0gMyB0aGVuDQogICAgICAgICAgICBoZXJvUG9zaXRpb24gPSBQb2ludDIobXlIZXJvLngsIG15SGVyby56KQ0KICAgICAgICAgICAgbW91c2VQb3NpdGlvbiA9IFBvaW50Mihtb3VzZVBvcy54LCBtb3VzZVBvcy56KQ0KDQogICAgICAgICAgICB0YXJnZXQgPSBnZXRUYXJnZXQobGFzdE1vdmVtZW50LnRhcmdldElkKQ0KICAgICAgICAgICAgaWYgX2lzVmFsaWRUYXJnZXQodGFyZ2V0KSB0aGVuDQogICAgICAgICAgICAgICAgdGFyZ2V0UG9zaXRpb24gPSBQb2ludDIodGFyZ2V0LngsIHRhcmdldC56KQ0KDQogICAgICAgICAgICAgICAgbG9jYWwgYXR0YWNrUmFuZ2UgPSAobXlIZXJvLnJhbmdlICsgR2V0RGlzdGFuY2UobXlIZXJvLm1pbkJCb3gsIG15SGVyby5tYXhCQm94KSAvIDIgKyBHZXREaXN0YW5jZSh0YXJnZXQubWluQkJveCwgdGFyZ2V0Lm1heEJCb3gpIC8gMikNCg0KICAgICAgICAgICAgICAgIGlmIGF0dGFja1JhbmdlIDw9IGhlcm9Qb3NpdGlvbjpkaXN0YW5jZSh0YXJnZXRQb3NpdGlvbikgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0UG9zaXRpb24gKyAoaGVyb1Bvc2l0aW9uIC0gdGFyZ2V0UG9zaXRpb24pOm5vcm1hbGl6ZWQoKSAqIGF0dGFja1JhbmdlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW91c2VQb3NpdGlvbg0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHJldHVybiBtb3VzZVBvc2l0aW9uDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIGxhc3RNb3ZlbWVudC50eXBlID09IDcgdGhlbg0KICAgICAgICAgICAgaGVyb1Bvc2l0aW9uID0gUG9pbnQyKG15SGVyby54LCBteUhlcm8ueikNCiAgICAgICAgICAgIG1vdXNlUG9zaXRpb24gPSBQb2ludDIobW91c2VQb3MueCwgbW91c2VQb3MueikNCiAgICAgICAgICAgIHRhcmdldCA9IGdldFRhcmdldChsYXN0TW92ZW1lbnQudGFyZ2V0SWQpDQogICAgICAgICAgICBpZiBfaXNWYWxpZFRhcmdldCh0YXJnZXQpIHRoZW4NCiAgICAgICAgICAgICAgICB0YXJnZXRQb3NpdGlvbiA9IFBvaW50Mih0YXJnZXQueCwgdGFyZ2V0LnopDQoNCiAgICAgICAgICAgICAgICBsb2NhbCBjYXN0UmFuZ2UgPSBteUhlcm86R2V0U3BlbGxEYXRhKGxhc3RNb3ZlbWVudC5zcGVsbElkKS5yYW5nZQ0KDQogICAgICAgICAgICAgICAgaWYgY2FzdFJhbmdlIDw9IGhlcm9Qb3NpdGlvbjpkaXN0YW5jZSh0YXJnZXRQb3NpdGlvbikgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0UG9zaXRpb24gKyAoaGVyb1Bvc2l0aW9uIC0gdGFyZ2V0UG9zaXRpb24pOm5vcm1hbGl6ZWQoKSAqIGNhc3RSYW5nZQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vdXNlUG9zaXRpb24NCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBsb2NhbCBjYXN0UmFuZ2UgPSBteUhlcm86R2V0U3BlbGxEYXRhKGxhc3RNb3ZlbWVudC5zcGVsbElkKS5yYW5nZQ0KDQogICAgICAgICAgICAgICAgaWYgY2FzdFJhbmdlIDw9IGhlcm9Qb3NpdGlvbjpkaXN0YW5jZShsYXN0TW92ZW1lbnQuZGVzdGluYXRpb24pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhc3RNb3ZlbWVudC5kZXN0aW5hdGlvbiArIChoZXJvUG9zaXRpb24gLSBsYXN0TW92ZW1lbnQuZGVzdGluYXRpb24pOm5vcm1hbGl6ZWQoKSAqIGNhc3RSYW5nZQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vdXNlUG9zaXRpb24NCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlDQogICAgICAgICAgICByZXR1cm4gbGFzdE1vdmVtZW50LmRlc3RpbmF0aW9uDQogICAgICAgIGVuZA0KICAgICAgICBlbHNlIHJldHVybiBsYXN0TW92ZW1lbnQuZGVzdGluYXRpb24NCiAgICBlbmQNCmVuZA0KZnVuY3Rpb24gQ2hlY2tCYWxsKG9iaikNCiAgICBpZiBvYmogPT0gbmlsIG9yIG9iai5uYW1lID09IG5pbCB0aGVuIHJldHVybiBlbmQgIA0KICAgIA0KICAgIGlmIChvYmoubmFtZTpmaW5kKCJPcmlhbmFfR2hvc3RfbWlzIikgb3Igb2JqLm5hbWU6ZmluZCgiT3JpYW5hX0dob3N0X21pc19wcm90ZWN0IikgKSB0aGVuDQogICAgICAgIGJhbGwgPSBuaWwNCiAgICAgICAgcmV0dXJuDQogICAgZW5kDQoNCiAgICBpZiBvYmoubmFtZTpmaW5kKCJ5b211X3JpbmdfcmVkIikgdGhlbg0KICAgICAgICBiYWxsID0gb2JqDQogICAgICAgIHJldHVybg0KICAgIGVuZA0KDQogICAgaWYgb2JqLm5hbWU6ZmluZCgiT3JpYW5hX0dob3N0X2JpbmQiKSB0aGVuDQogICAgICAgIGZvciBpLCB0YXJnZXQgaW4gcGFpcnMoZW5lbXllcykgZG8NCiAgICAgICAgICAgIGlmIEdldERpc3RhbmNlKHRhcmdldCwgb2JqKSA8IDQwIHRoZW4NCiAgICAgICAgICAgICAgICBiYWxsID0gdGFyZ2V0DQogICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZCANCg0KbG9jYWwgQXV0b1VwZGF0ZSA9IGZhbHNlIA0KDQoNCiAgICBmdW5jdGlvbiBPbkxvYWQoKQ0KICAgICAgICBiYWxsID0gbmlsDQogICAgICAgIEdvb2RFdmFkZUNvbmZpZyA9IHNjcmlwdENvbmZpZygiRnJlYWtpbmcgR29vZCBFdmFkZSIsICJGcmVha2luZyBHb29kIEV2YWRlIikNCiAgICAgICAgR29vZEV2YWRlQ29uZmlnOmFkZFBhcmFtKCJldmFkZUJ1ZmZlciIsICJJbmNyZWFzZSBTa2lsbHNob3Qgd2lkdGggYnkuLi4iLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDE1LCAwLCA1MCwgMCApDQogICAgICAgIEdvb2RFdmFkZUNvbmZpZzphZGRQYXJhbSgibGluZWFsbHdheXMiLCAiQWxsd2F5cyB0cnkgdG8gZG9kZ2UgbGluZSBza2lsbHNob3RzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBHb29kRXZhZGVDb25maWc6YWRkUGFyYW0oImZvd2RlbGF5IiwgIkRlbGF5IGZvciBza2lsbHNob3RzIGluIEZPVyIsIFNDUklQVF9QQVJBTV9TTElDRSwgMSwgMSwgMjAsIDApDQogICAgICAgIEdvb2RFdmFkZUNvbmZpZzphZGRQYXJhbSgiZG9kZ2VFbmFibGVkIiwgIkRvZGdlIFNraWxsc2hvdHMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIEdvb2RFdmFkZUNvbmZpZzphZGRQYXJhbSgiZHJhd0VuYWJsZWQiLCAiRHJhdyBTa2lsbHNob3RzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBHb29kRXZhZGVDb25maWc6YWRkUGFyYW0oImRvZGdlQ0Nvbmx5IiwgIkRvZGdlIENDIG9ubHkgc3BlbGxzIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KICAgICAgICBHb29kRXZhZGVDb25maWc6YWRkUGFyYW0oImRvZGdlQ0Nvbmx5MiIsICJEb2RnZSBDQyBvbmx5IHNwZWxscyB0b2dnbGUiLCBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIGZhbHNlLCA3NykNCiAgICAgICAgR29vZEV2YWRlQ29uZmlnOmFkZFBhcmFtKCJyZXNldGRvZGdlIiwgIlJlc2V0IERvZGdlIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDE3KQ0KICAgICAgICBHb29kRXZhZGVDb25maWc6YWRkUGFyYW0oInVzZWRhc2hlcyIsICJVc2UgRGFzaCB0byBkb2RnZSBzcGVsbHMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIEdvb2RFdmFkZUNvbmZpZzphZGRQYXJhbSgidXNlZmxhc2giLCAiVXNlIEZsYXNoIHRvIGRvZGdlIGRhbmdlcm91cyBzcGVsbHMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIEdvb2RFdmFkZUNvbmZpZzphZGRQYXJhbSgiZnJlZW1vdmVtZW50YmxvY2siLCAiRnJlZSBVc2VycyBNb3ZlbWVudCBCbG9jayIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIEdvb2RFdmFkZUNvbmZpZzpwZXJtYVNob3coImRvZGdlRW5hYmxlZCIpDQogICAgICAgIGZvciBpID0gMSwgaGVyb01hbmFnZXIuaUNvdW50IGRvDQogICAgICAgICAgICBsb2NhbCBoZXJvID0gaGVyb01hbmFnZXI6R2V0SGVybyhpKQ0KICAgICAgICAgICAgaWYgaGVyby50ZWFtIH49IG15SGVyby50ZWFtIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaSwgc2tpbGxTaG90Q2hhbXBpb24gaW4gcGFpcnMoY2hhbXBpb25zMikgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgc2tpbGxTaG90Q2hhbXBpb24uY2hhck5hbWUgPT0gaGVyby5jaGFyTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoY2hhbXBpb25zLCBza2lsbFNob3RDaGFtcGlvbikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIEdvb2RFdmFkZVNraWxsc2hvdENvbmZpZyA9IHNjcmlwdENvbmZpZygiRkdFIHNraWxsc2hvdHMiLCAiRkdFIHNraWxsc2hvdHMgY29uZmlnIikNCiAgICAgICAgZm9yIGksIHNraWxsU2hvdENoYW1waW9uIGluIHBhaXJzKGNoYW1waW9ucykgZG8NCiAgICAgICAgICAgIGZvciBpLCBza2lsbHNob3QgaW4gcGFpcnMoc2tpbGxTaG90Q2hhbXBpb24uc2tpbGxzaG90cykgZG8NCiAgICAgICAgICAgICAgICBuYW1lID0gdG9zdHJpbmcoc2tpbGxzaG90Lm5hbWUpDQogICAgICAgICAgICAgICAgbmFtZTIgPSB0b3N0cmluZyhza2lsbHNob3QubmFtZSkNCiAgICAgICAgICAgICAgICBpZiBza2lsbHNob3QuY2MgPT0gInRydWUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgR29vZEV2YWRlU2tpbGxzaG90Q29uZmlnOmFkZFBhcmFtKG5hbWUsICJEb2RnZSAiLi5uYW1lMiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAwLCAyLCAwKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiBza2lsbHNob3QuY2MgPT0gImZhbHNlIiB0aGVuIEdvb2RFdmFkZVNraWxsc2hvdENvbmZpZzphZGRQYXJhbShuYW1lLCAiRG9kZ2UgIi4ubmFtZTIsIFNDUklQVF9QQVJBTV9TTElDRSwgMSwgMCwgMiwgMCkNCiAgICAgICAgICAgICAgICBlbHNlaWYgc2tpbGxzaG90LmNjID09ICJuZXZlciIgdGhlbiBHb29kRXZhZGVTa2lsbHNob3RDb25maWc6YWRkUGFyYW0obmFtZSwgIkRvZGdlICIuLm5hbWUyLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDAsIDAsIDIsIDApDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQoNCiAgICAgICAgc3RvcEV2YWRlKCkNCiAgICAgICAgaXNTaXZpciA9IGZhbHNlDQogICAgICAgIGlmIG15SGVyby5jaGFyTmFtZSA9PSAiU2l2aXIiIHRoZW4NCiAgICAgICAgICAgIGlzU2l2aXIgPSB0cnVlDQogICAgICAgIGVuZA0KICAgICAgICBpc05vY3R1cm5lID0gZmFsc2UNCiAgICAgICAgaWYgbXlIZXJvLmNoYXJOYW1lID09ICJOb2N0dXJuZSIgdGhlbg0KICAgICAgICAgICAgaXNOb2N0dXJuZSA9IHRydWUNCiAgICAgICAgZW5kDQogICAgICAgIGlzVmF5bmUgPSBmYWxzZQ0KICAgICAgICBpZiBteUhlcm8uY2hhck5hbWUgPT0gIlZheW5lIiB0aGVuIA0KICAgICAgICAgICAgaXNWYXluZSA9IHRydWUNCiAgICAgICAgZW5kDQogICAgICAgIGlzR3JhdmVzID0gZmFsc2UNCiAgICAgICAgaWYgbXlIZXJvLmNoYXJOYW1lID09ICJHcmF2ZXMiIHRoZW4gDQogICAgICAgICAgICBpc0dyYXZlcyA9IHRydWUNCiAgICAgICAgZW5kDQogICAgICAgIGlzRXpyZWFsID0gZmFsc2UNCiAgICAgICAgaWYgbXlIZXJvLmNoYXJOYW1lID09ICJFenJlYWwiIHRoZW4gDQogICAgICAgICAgICBpc0V6cmVhbCA9IHRydWUNCiAgICAgICAgZW5kDQogICAgICAgIGlmIG15SGVyby5jaGFyTmFtZSA9PSAiQ2FpdGx5biINCiAgICAgICAgICAgIHRoZW4gaXNDYWl0bHluICA9IHRydWUNCiAgICAgICAgZW5kDQogICAgICAgIGlzTGVibGFuYyA9IGZhbHNlDQogICAgICAgIGlmIG15SGVyby5jaGFyTmFtZSA9PSAiTGVibGFuYyIgdGhlbiANCiAgICAgICAgICAgIGlzTGVibGFuYyA9IHRydWUNCiAgICAgICAgZW5kDQogICAgICAgIGlzUml2ZW4gPSBmYWxzZQ0KICAgICAgICBpZiBteUhlcm8uY2hhck5hbWUgPT0gIlJpdmVuIiB0aGVuIA0KICAgICAgICAgICAgaXNSaXZlbiA9IHRydWUNCiAgICAgICAgZW5kDQogICAgICAgIGlzRml6eiA9IGZhbHNlDQogICAgICAgIGlmIG15SGVyby5jaGFyTmFtZSA9PSAiRml6eiIgdGhlbiANCiAgICAgICAgICAgIGlzRml6eiA9IHRydWUNCiAgICAgICAgZW5kDQogICAgICAgIGlzU2hlbiA9IGZhbHNlDQogICAgICAgIGlmIG15SGVyby5jaGFyTmFtZSA9PSAiU2hlbiIgdGhlbiANCiAgICAgICAgICAgIGlzU2hlbiA9IHRydWUNCiAgICAgICAgZW5kDQogICAgICAgIGlzU2hhY28gPSBmYWxzZQ0KICAgICAgICBpZiBteUhlcm8uY2hhck5hbWUgPT0gIlNoYWNvIiB0aGVuIA0KICAgICAgICAgICAgaXNTaGFjbyA9IHRydWUNCiAgICAgICAgZW5kDQogICAgICAgIGlzUmVuZWt0b24gPSBmYWxzZSAgICAgICAgICANCiAgICAgICAgaWYgbXlIZXJvLmNoYXJOYW1lID09ICJSZW5la3RvbiIgdGhlbiANCiAgICAgICAgICAgIGlzUmVuZWt0b24gPSB0cnVlDQogICAgICAgIGVuZA0KICAgICAgICBpc1RyaXN0YW5hID0gZmFsc2UNCiAgICAgICAgaWYgbXlIZXJvLmNoYXJOYW1lID09ICJUcmlzdGFuYSIgdGhlbiANCiAgICAgICAgICAgIGlzVHJpc3RhbmEgPSB0cnVlDQogICAgICAgIGVuZA0KICAgICAgICBpc1RyeW5kYW1lcmUgPSBmYWxzZQ0KICAgICAgICBpZiBteUhlcm8uY2hhck5hbWUgPT0gIlRyeW5kYW1lcmUiIHRoZW4gDQogICAgICAgICAgICBpc1RyeW5kYW1lcmUgPSB0cnVlDQogICAgICAgIGVuZA0KICAgICAgICBpc0NvcmtpID0gZmFsc2UNCiAgICAgICAgaWYgbXlIZXJvLmNoYXJOYW1lID09ICJDb3JraSIgdGhlbiANCiAgICAgICAgICAgIGlzQ29ya2kgPSB0cnVlDQogICAgICAgIGVuZA0KICAgICAgICBpc0x1Y2lhbiA9IGZhbHNlDQogICAgICAgIGlmIG15SGVyby5jaGFyTmFtZSA9PSAiTHVjaWFuIiB0aGVuIA0KICAgICAgICAgICAgaXNMdWNpYW4gPSB0cnVlDQogICAgICAgIGVuZA0KICAgICAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNVTU1PTkVSXzEpLm5hbWU6ZmluZCgiU3VtbW9uZXJGbGFzaCIpIHRoZW4gDQogICAgICAgICAgICBoYXZlZmxhc2ggPSB0cnVlDQogICAgICAgICAgICBmbGFzaFNsb3QgPSBTVU1NT05FUl8xDQogICAgICAgIGVsc2VpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNVTU1PTkVSXzIpLm5hbWU6ZmluZCgiU3VtbW9uZXJGbGFzaCIpIHRoZW4gDQogICAgICAgICAgICBmbGFzaFNsb3QgPSBTVU1NT05FUl8yDQogICAgICAgICAgICBoYXZlZmxhc2ggPSB0cnVlDQogICAgICAgIGVuZA0KDQogICAgICAgIGxhc3RNb3ZlbWVudCA9IHsNCiAgICAgICAgICAgIGRlc3RpbmF0aW9uID0gUG9pbnQyKG15SGVyby54LCBteUhlcm8ueiksDQogICAgICAgICAgICBtb3ZlQ29tbWFuZCA9IFBvaW50MihteUhlcm8ueCwgbXlIZXJvLnopLA0KICAgICAgICAgICAgdHlwZSA9IDIsDQogICAgICAgICAgICB0YXJnZXRJZCA9IG5pbCwNCiAgICAgICAgICAgIHNwZWxsSWQgPSBuaWwsDQogICAgICAgICAgICBhcHByb2FjaGVkUG9pbnQgPSBuaWwNCiAgICAgICAgfQ0KDQogICAgICAgIGZvciBpID0gMSwgaGVyb01hbmFnZXIuaUNvdW50IGRvDQogICAgICAgICAgICBsb2NhbCBoZXJvID0gaGVyb01hbmFnZXI6R2V0SGVybyhpKQ0KICAgICAgICAgICAgaWYgaGVyby50ZWFtIH49IG15SGVyby50ZWFtIHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZW5lbXllcywgaGVybykNCiAgICAgICAgICAgIGVsc2VpZiBoZXJvLnRlYW0gPT0gbXlIZXJvLnRlYW0gYW5kIGhlcm8ubkVuZW1pZXMgfj0gbXlIZXJvLm5ldHdvcmtJRCB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGFsbGllcywgaGVybykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaXNPcmlhbm5hID0gZmFsc2UNCiAgICAgICAgZm9yIGksIGVuZW15IGluIHBhaXJzKGVuZW15ZXMpIGRvDQogICAgICAgICAgICBpZiBlbmVteS5jaGFyTmFtZSA9PSAiT3JpYW5uYSIgdGhlbg0KICAgICAgICBpc09yaWFubmEgPSB0cnVlDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgI2VuZW15ZXMgPT0gNSB0aGVuDQogICAgICAgICAgICBmb3IgaSwgc2tpbGxTaG90Q2hhbXBpb24gaW4gcGFpcnMoY2hhbXBpb25zKSBkbw0KICAgICAgICAgICAgICAgIGlmIHNraWxsU2hvdENoYW1waW9uLmNoYXJOYW1lIH49IGVuZW15ZXNbMV0uY2hhck5hbWUgYW5kIHNraWxsU2hvdENoYW1waW9uLmNoYXJOYW1lIH49IGVuZW15ZXNbMl0uY2hhck5hbWUgYW5kIHNraWxsU2hvdENoYW1waW9uLmNoYXJOYW1lIH49IGVuZW15ZXNbM10uY2hhck5hbWUNCiAgICAgICAgICAgICAgICAgICAgYW5kIHNraWxsU2hvdENoYW1waW9uLmNoYXJOYW1lIH49IGVuZW15ZXNbNF0uY2hhck5hbWUgYW5kIHNraWxsU2hvdENoYW1waW9uLmNoYXJOYW1lIH49IGVuZW15ZXNbNV0uY2hhck5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBjaGFtcGlvbnNbaV0gPSBuaWwNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCg0KICAgICAgICBwbGF5ZXI6UmVtb3ZlQ29sbGlzaW9uKCkNCiAgICAgICAgcGxheWVyOlNldFZpc2lvblJhZGl1cygxNzAwKQ0KDQogICAgICAgIEdvb2RFdmFkZUNvbmZpZy5kb2RnZUVuYWJsZWQgPSB0cnVlDQogICAgICAgIGN1cnJlbnRidWZmZXIgPSBHb29kRXZhZGVDb25maWcuZXZhZGVCdWZmZXINCiAgICAgICAgUHJpbnRDaGF0KHZlcnNpb25tZXNzYWdlKQ0KICAgICAgICBpZiBBdXRvVXBkYXRlIHRoZW4NCiAgICAgICAgICAgIERlbGF5QWN0aW9uKFVwZGF0ZSwgMjApDQogICAgICAgIGVuZA0KICAgIGVuZA0KDQoNCg0KICAgIGZ1bmN0aW9uIGdldFNpZGVPZkxpbmUobGluZVBvaW50MSwgbGluZVBvaW50MiwgcG9pbnQpDQogICAgICAgIGlmIG5vdCBwb2ludCB0aGVuIHJldHVybiAwIGVuZA0KICAgICAgICByZXN1bHQgPSAoKGxpbmVQb2ludDIueCAtIGxpbmVQb2ludDEueCkgKiAocG9pbnQueSAtIGxpbmVQb2ludDEueSkgLSAobGluZVBvaW50Mi55IC0gbGluZVBvaW50MS55KSAqIChwb2ludC54IC0gbGluZVBvaW50MS54KSkNCiAgICAgICAgaWYgcmVzdWx0IDwgMCB0aGVuDQogICAgICAgICAgICByZXR1cm4gLTENCiAgICAgICAgZWxzZWlmIHJlc3VsdCA+IDAgdGhlbg0KICAgICAgICAgICAgcmV0dXJuIDENCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmV0dXJuIDANCiAgICAgICAgZW5kDQogICAgZW5kDQpjb2xzdGFydHBvcyA9IG5pbA0KY29sZW5kcG9zID0gbmlsDQogICAgZnVuY3Rpb24gZG9kZ2VTa2lsbHNob3Qoc2tpbGxzaG90KQ0KICAgICAgICBpZiBHb29kRXZhZGVDb25maWcuZG9kZ2VFbmFibGVkIGFuZCBub3QgbXlIZXJvLmRlYWQgYW5kIENhc3RpbmdTcGVsbCA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICBpZiBza2lsbHNob3Quc2tpbGxzaG90LnR5cGUgPT0gImxpbmUiIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBza2lsbHNob3Quc2tpbGxzaG90LmNvbGxpc2lvbiA9PSAidHJ1ZSIgYW5kIFZJUF9VU0VSIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaGVyb3BvcyA9IFBvaW50MihteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICAgICAgICAgIGVuZHBvc2l0aW9uID0gc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24gKyAoc2tpbGxzaG90LmVuZFBvc2l0aW9uIC0gc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24pOm5vcm1hbGl6ZWQoKSAqIChoZXJvcG9zOmRpc3RhbmNlKHNraWxsc2hvdC5zdGFydFBvc2l0aW9uKSkNCiAgICAgICAgICAgICAgICAgICAgY29sc3RhcnRwb3MgPSBWZWN0b3Ioc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24ueCwgbXlIZXJvLnksIHNraWxsc2hvdC5zdGFydFBvc2l0aW9uLnkpDQogICAgICAgICAgICAgICAgICAgIGNvbGVuZHBvcyA9IFZlY3RvcihlbmRwb3NpdGlvbi54LCBteUhlcm8ueSwgZW5kcG9zaXRpb24ueSkNCiAgICAgICAgICAgICAgICAgICAgY29sbGlzaW9uc2hpdCA9IENvbGxpc2lvblBFKHNraWxsc2hvdC5za2lsbHNob3QucmFuZ2UsIHNraWxsc2hvdC5za2lsbHNob3QucHJvamVjdGlsZVNwZWVkLCBza2lsbHNob3Quc2tpbGxzaG90LnNwZWxsRGVsYXksIHNraWxsc2hvdC5za2lsbHNob3QucmFkaXVzKQ0KICAgICAgICAgICAgICAgICAgICBpZiBjb2xsaXNpb25zaGl0OkdldE1pbmlvbkNvbGxpc2lvbihjb2xzdGFydHBvcywgY29sZW5kcG9zKSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBkb2RnZUxpbmVTaG90KHNraWxsc2hvdCkNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBkb2RnZUNpcmN1bGFyU2hvdChza2lsbHNob3QpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQoNCmZ1bmN0aW9uIGRvZGdlQ2lyY3VsYXJTaG90KHNraWxsc2hvdCkNCiAgICBza2lsbHNob3QuZXZhZGluZyA9IHRydWUNCiAgICBhbHJlYWR5ZG9kZ2VkID0gZmFsc2UNCiAgICBoZXJvUG9zaXRpb24gPSBQb2ludDIobXlIZXJvLngsIG15SGVyby56KQ0KDQogICAgbW92ZWFibGVEaXN0YW5jZSA9IG15SGVyby5tcyAqIG1hdGgubWF4KHNraWxsc2hvdC5lbmRUaWNrIC0gR2V0VGlja0NvdW50KCkgLSBHZXRMYXRlbmN5KCkvMiwgMCkgLyAxMDAwDQogICAgZXZhZGVSYWRpdXMgPSBza2lsbHNob3Quc2tpbGxzaG90LnJhZGl1cyArIGhpdGJveFNpemUgLyAyICsgR29vZEV2YWRlQ29uZmlnLmV2YWRlQnVmZmVyICsgbW92ZUJ1ZmZlcg0KDQogICAgc2FmZVRhcmdldCA9IHNraWxsc2hvdC5lbmRQb3NpdGlvbiArIChoZXJvUG9zaXRpb24gLSBza2lsbHNob3QuZW5kUG9zaXRpb24pOm5vcm1hbGl6ZWQoKSAqIGV2YWRlUmFkaXVzDQoNCiAgICBpZiBza2lsbHNob3Quc2tpbGxzaG90Lm5hbWUgPT0gIlVGU2xhc2giIG9yIHNraWxsc2hvdC5za2lsbHNob3QubmFtZSA9PSAiQW5uaWVSIiB0aGVuDQogICAgICAgIGlmIEFNMShza2lsbHNob3QpIHRoZW4NCiAgICAgICAgICAgIGFscmVhZHlkb2RnZWQgPSB0cnVlDQogICAgICAgIGVsc2VpZiBBTTIoc2tpbGxzaG90LCBoZXJvUG9zaXRpb24pIHRoZW4NCiAgICAgICAgICAgIGFscmVhZHlkb2RnZWQgPSB0cnVlDQogICAgICAgIGVsc2VpZiBBTTMoc2tpbGxzaG90LCBzYWZlVGFyZ2V0KSB0aGVuDQogICAgICAgICAgICBhbHJlYWR5ZG9kZ2VkID0gdHJ1ZQ0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICBpZiBub3QgYWxyZWFkeWRvZGdlZCB0aGVuDQogICAgICAgIGlmIG1haW5DaXJjdWxhcnNraWxsc2hvdDEoc2tpbGxzaG90LCBoZXJvUG9zaXRpb24sIG1vdmVhYmxlRGlzdGFuY2UsIGV2YWRlUmFkaXVzLCBzYWZlVGFyZ2V0KSB0aGVuDQogICAgICAgICAgICBhbHJlYWR5ZG9kZ2VkID0gdHJ1ZQ0KICAgICAgICBlbHNlaWYgbWFpbkNpcmN1bGFyc2tpbGxzaG90Mihza2lsbHNob3QpIHRoZW4NCiAgICAgICAgICAgIGFscmVhZHlkb2RnZWQgPSB0cnVlDQogICAgICAgIGVsc2VpZiBtYWluQ2lyY3VsYXJza2lsbHNob3QzKHNraWxsc2hvdCwgaGVyb1Bvc2l0aW9uKSB0aGVuDQogICAgICAgICAgICBhbHJlYWR5ZG9kZ2VkID0gdHJ1ZQ0KICAgICAgICBlbHNlaWYgbWFpbkNpcmN1bGFyc2tpbGxzaG90NChza2lsbHNob3QsIGhlcm9Qb3NpdGlvbiwgbW92ZWFibGVEaXN0YW5jZSwgZXZhZGVSYWRpdXMsIHNhZmVUYXJnZXQpIHRoZW4NCiAgICAgICAgICAgIGFscmVhZHlkb2RnZWQgPSB0cnVlDQogICAgICAgIGVsc2VpZiBtYWluQ2lyY3VsYXJza2lsbHNob3Q1KHNraWxsc2hvdCwgc2FmZVRhcmdldCkgdGhlbg0KICAgICAgICAgICAgYWxyZWFkeWRvZGdlZCA9IHRydWUNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gaGF2ZVNoaWVsZCgpDQogICAgaWYgaXNTaXZpciBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSB0aGVuDQogICAgICAgIHJldHVybiB0cnVlIA0KICAgIGVuZA0KICAgIGlmIGlzTm9jdHVybmUgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChfVykgPT0gUkVBRFkgdGhlbg0KICAgICAgICByZXR1cm4gdHJ1ZSANCiAgICBlbmQNCiAgICByZXR1cm4gZmFsc2UNCmVuZA0KDQpmdW5jdGlvbiBGbGFzaFRvKHgsIHkpDQogICAgQ2FzdFNwZWxsKGZsYXNoU2xvdCwgeCwgeSkNCmVuZA0KDQoNCmZ1bmN0aW9uIGRvZGdlTGluZVNob3Qoc2tpbGxzaG90KQ0KICAgIGFscmVhZHlkb2RnZWQgPSBmYWxzZQ0KICAgIGhlcm9Qb3NpdGlvbiA9IFBvaW50MihteUhlcm8ueCwgbXlIZXJvLnopDQogICAgbG9jYWwgZXZhZGVUbzENCiAgICBsb2NhbCBldmFkZVRvMg0KICAgIHNraWxsc2hvdC5ldmFkaW5nID0gdHJ1ZQ0KICAgIHNraWxsc2hvdExpbmUgPSBMaW5lMihza2lsbHNob3Quc3RhcnRQb3NpdGlvbiwgc2tpbGxzaG90LmVuZFBvc2l0aW9uKQ0KICAgIGRpc3RhbmNlRnJvbVNraWxsc2hvdFBhdGggPSBza2lsbHNob3RMaW5lOmRpc3RhbmNlKGhlcm9Qb3NpdGlvbikNCiAgICBldmFkZURpc3RhbmNlID0gc2tpbGxzaG90LnNraWxsc2hvdC5yYWRpdXMgKyBoaXRib3hTaXplIC8gMiArIEdvb2RFdmFkZUNvbmZpZy5ldmFkZUJ1ZmZlciArIG1vdmVCdWZmZXINCiAgICBub3JtYWxWZWN0b3IgPSBQb2ludDIoc2tpbGxzaG90LmRpcmVjdGlvblZlY3Rvci55LCAtc2tpbGxzaG90LmRpcmVjdGlvblZlY3Rvci54KTpub3JtYWxpemVkKCkNCiAgICBuZXNzZWNhcnlNb3ZlV2lkdGggPSBldmFkZURpc3RhbmNlIC0gZGlzdGFuY2VGcm9tU2tpbGxzaG90UGF0aA0KICAgIGV2YWRlVG8xID0gaGVyb1Bvc2l0aW9uICsgbm9ybWFsVmVjdG9yICogbmVzc2VjYXJ5TW92ZVdpZHRoDQogICAgZXZhZGVUbzIgPSBoZXJvUG9zaXRpb24gLSBub3JtYWxWZWN0b3IgKiBuZXNzZWNhcnlNb3ZlV2lkdGgNCiAgICBpZiBza2lsbHNob3Quc2tpbGxzaG90Lm5hbWUgPT0gIkNyZXNjZW5kbyIgdGhlbg0KICAgICAgICBpZiBkb2RnZUNyZXNjZW5kbzEoc2tpbGxzaG90KSB0aGVuIA0KICAgICAgICBhbHJlYWR5ZG9kZ2VkID0gdHJ1ZQ0KICAgICAgICBlbHNlaWYgZG9kZ2VDcmVzY2VuZG8yKHNraWxsc2hvdCwgZXZhZGVUbzEsIGV2YWRlVG8yKSB0aGVuDQogICAgICAgIGFscmVhZHlkb2RnZWQgPSB0cnVlDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIGlmIG5vdCBhbHJlYWR5ZG9kZ2VkIHRoZW4NCiAgICAgICAgaWYgbGluZVNraWxsc2hvdDEoc2tpbGxzaG90LCBoZXJvUG9zaXRpb24sIHNraWxsc2hvdExpbmUsIGRpc3RhbmNlRnJvbVNraWxsc2hvdFBhdGgsIGV2YWRlRGlzdGFuY2UsIG5vcm1hbFZlY3RvciwgbmVzc2VjYXJ5TW92ZVdpZHRoLCBldmFkZVRvMSwgZXZhZGVUbzIpDQogICAgICAgIHRoZW4gYWxyZWFkeWRvZGdlZCA9IHRydWUNCiAgICBlbHNlaWYgbGluZVNraWxsc2hvdDIoc2tpbGxzaG90KQ0KICAgICAgICB0aGVuIGFscmVhZHlkb2RnZWQgPSB0cnVlDQogICAgZWxzZWlmIGxpbmVTa2lsbHNob3QzKHNraWxsc2hvdCwgZXZhZGVUbzEsIGV2YWRlVG8yKQ0KICAgICAgICB0aGVuIGFscmVhZHlkb2RnZWQgPSB0cnVlDQogICAgZWxzZWlmIGxpbmVTa2lsbHNob3Q0KHNraWxsc2hvdCwgZXZhZGVUbzEsIGV2YWRlVG8yKQ0KICAgICAgICB0aGVuIGFscmVhZHlkb2RnZWQgPSB0cnVlDQogICAgZW5kDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gX2lzRGFuZ2VyU2tpbGxzaG90KHNraWxsc2hvdCkNCiAgICBpZiBza2lsbHNob3Quc2tpbGxzaG90Lm5hbWUgPT0gIkxlb25hWmVuaXRoQmxhZGUiIA0KICAgICAgICBvciBza2lsbHNob3Quc2tpbGxzaG90Lm5hbWUgPT0gIkVuY2hhbnRlZEFycm93IiANCiAgICAgICAgb3Igc2tpbGxzaG90LnNraWxsc2hvdC5uYW1lID09ICJMdXhNYWxpY2VDYW5ub24iDQogICAgICAgIG9yIHNraWxsc2hvdC5za2lsbHNob3QubmFtZSA9PSAiU2VqdWFuaVIiDQogICAgICAgIG9yIHNraWxsc2hvdC5za2lsbHNob3QubmFtZSA9PSAiQ3Jlc2NlbmRvIg0KICAgICAgICBvciBza2lsbHNob3Quc2tpbGxzaG90Lm5hbWUgPT0gIlRydWVzaG90QmFycmFnZSINCiAgICAgICAgb3Igc2tpbGxzaG90LnNraWxsc2hvdC5uYW1lID09ICJSb2NrZXRHcmFiIg0KICAgICAgICBvciBza2lsbHNob3Quc2tpbGxzaG90Lm5hbWUgPT0gIkRyZWRnZUxpbmUiDQogICAgICAgIG9yIHNraWxsc2hvdC5za2lsbHNob3QubmFtZSA9PSAiU2hhZG93RGFzaCINCiAgICAgICAgb3Igc2tpbGxzaG90LnNraWxsc2hvdC5uYW1lID09ICJGaXp6VUxUIg0KICAgICAgICBvciBza2lsbHNob3Quc2tpbGxzaG90Lm5hbWUgPT0gIlZhcnVzUiINCiAgICAgICAgb3Igc2tpbGxzaG90LnNraWxsc2hvdC5uYW1lID09ICJTdXBlck1lZ2FEZWF0aFJvY2tldCINCiAgICAgICAgb3Igc2tpbGxzaG90LnNraWxsc2hvdC5uYW1lID09ICJVRlNsYXNoIg0KICAgICAgICBvciBza2lsbHNob3Quc2tpbGxzaG90Lm5hbWUgPT0gIkxlb25hU29sYXJGbGFyZSINCiAgICAgICAgb3Igc2tpbGxzaG90LnNraWxsc2hvdC5uYW1lID09ICJBbm5pZVIiDQogICAgICAgIG9yIHNraWxsc2hvdC5za2lsbHNob3QubmFtZSA9PSAiT3JpYW5hRGV0b25hdGVDb21tYW5kIg0KICAgICAgICB0aGVuDQogICAgICAgIHJldHVybiB0cnVlDQogICAgZWxzZQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQgDQplbmQNCg0KZnVuY3Rpb24gaXNyZWFsbHlkYW5nZXJvdXMoc2tpbGxzaG90KQ0KICAgIGlmIHNraWxsc2hvdC5za2lsbHNob3QubmFtZSA9PSAiVUZTbGFzaCINCiAgICAgICAgb3Igc2tpbGxzaG90LnNraWxsc2hvdC5uYW1lID09ICJDcmVzY2VuZG8iDQogICAgICAgIG9yIHNraWxsc2hvdC5za2lsbHNob3QubmFtZSA9PSAiRml6elVMVCINCiAgICAgICAgb3Igc2tpbGxzaG90LnNraWxsc2hvdC5uYW1lID09ICJFbmNoYW50ZWRBcnJvdyINCiAgICAgICAgb3Igc2tpbGxzaG90LnNraWxsc2hvdC5uYW1lID09ICJBbm5pZVIiDQogICAgICAgIG9yIHNraWxsc2hvdC5za2lsbHNob3QubmFtZSA9PSAiT3JpYW5hRGV0b25hdGVDb21tYW5kIg0KICAgICAgICB0aGVuIHJldHVybiB0cnVlDQogICAgZWxzZQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBJbnNpZGVUaGVXYWxsKGV2YWRlVGVzdFBvaW50KQ0KICAgIGxvY2FsIGhlcm9Qb3NpdGlvbiA9IFBvaW50MihteUhlcm8ueCwgbXlIZXJvLnopDQogICAgbG9jYWwgZGlzdCA9IGV2YWRlVGVzdFBvaW50OmRpc3RhbmNlKGhlcm9Qb3NpdGlvbikNCiAgICBsb2NhbCBpbnRlcnZhbCA9IDUwDQogICAgbG9jYWwgbkNoZWNrcyA9IG1hdGguY2VpbCgoZGlzdCs1MCkvNTApDQoNCiAgICBpZiBldmFkZVRlc3RQb2ludC54ID09IDAgb3IgZXZhZGVUZXN0UG9pbnQueSA9PSAwIHRoZW4NCiAgICAgICAgcmV0dXJuIHRydWUNCiAgICBlbmQgDQogICAgZm9yIGs9MSwgbkNoZWNrcywgMSBkbw0KICAgICAgICBsb2NhbCBjaGVja3NQb3MgPSBldmFkZVRlc3RQb2ludCArIChldmFkZVRlc3RQb2ludCAtIGhlcm9Qb3NpdGlvbik6bm9ybWFsaXplZCgpKihpbnRlcnZhbCprKQ0KICAgICAgICBpZiBJc1dhbGwoRDNEWFZFQ1RPUjMoY2hlY2tzUG9zLngsIG15SGVyby55LCBjaGVja3NQb3MueSkpIHRoZW4NCiAgICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIGlmIElzV2FsbChEM0RYVkVDVE9SMyhldmFkZVRlc3RQb2ludC54ICsgMjAsIG15SGVyby55LCBldmFkZVRlc3RQb2ludC55ICsgMjApKSB0aGVuIHJldHVybiB0cnVlIGVuZA0KICAgIGlmIElzV2FsbChEM0RYVkVDVE9SMyhldmFkZVRlc3RQb2ludC54ICsgMjAsIG15SGVyby55LCBldmFkZVRlc3RQb2ludC55IC0gMjApKSB0aGVuIHJldHVybiB0cnVlIGVuZA0KICAgIGlmIElzV2FsbChEM0RYVkVDVE9SMyhldmFkZVRlc3RQb2ludC54IC0gMjAsIG15SGVyby55LCBldmFkZVRlc3RQb2ludC55IC0gMjApKSB0aGVuIHJldHVybiB0cnVlIGVuZA0KICAgIGlmIElzV2FsbChEM0RYVkVDVE9SMyhldmFkZVRlc3RQb2ludC54IC0gMjAsIG15SGVyby55LCBldmFkZVRlc3RQb2ludC55ICsgMjApKSB0aGVuIHJldHVybiB0cnVlIGVuZA0KDQogICAgcmV0dXJuIGZhbHNlDQplbmQNCg0KZnVuY3Rpb24gZmluZEJlc3REaXJlY3Rpb24oc2tpbGxzaG90LCByZWZlcmVuY2VQb2ludCwgcG9zc2libGVQb2ludHMpDQogICAgaWYgbm90IHNraWxsc2hvdCB0aGVuIHJldHVybiBjbG9zZXN0UG9pbnQgZW5kDQogICAgY2xvc2VzdFBvaW50ID0gbmlsDQogICAgY2xvc2VzdERpc3RhbmNlID0gbmlsDQogICAgc2lkZTEgPSBnZXRTaWRlT2ZMaW5lKHNraWxsc2hvdC5zdGFydFBvc2l0aW9uLCBza2lsbHNob3QuZW5kUG9zaXRpb24sIFBvaW50MihteUhlcm8ueCwgbXlIZXJvLnopKSANCiAgICBmb3IgaSwgcG9pbnQgaW4gcGFpcnMocG9zc2libGVQb2ludHMpIGRvDQogICAgICAgIGlmIHBvaW50IH49IG5pbCBhbmQgc2tpbGxzaG90IH49IG5pbCB0aGVuDQogICAgICAgICAgICBzaWRlMiA9IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgcG9pbnQpDQogICAgICAgICAgICBkaXN0VG9Ta2lsbHNob3QgPSBMaW5lMihza2lsbHNob3Quc3RhcnRQb3NpdGlvbiwgc2tpbGxzaG90LmVuZFBvc2l0aW9uKTpkaXN0YW5jZShwb2ludCkNCiAgICAgICAgICAgIG1pbmRpc3RTa2lsbHNob3QgPSBza2lsbHNob3Quc2tpbGxzaG90LnJhZGl1cyArIGhpdGJveFNpemUgLyAyICsgR29vZEV2YWRlQ29uZmlnLmV2YWRlQnVmZmVyDQogICAgICAgICAgICBkaXN0YW5jZSA9IHBvaW50OmRpc3RhbmNlKHJlZmVyZW5jZVBvaW50KQ0KICAgICAgICAgICAgaWYgKGNsb3Nlc3REaXN0YW5jZSA9PSBuaWwgb3IgZGlzdGFuY2UgPD0gY2xvc2VzdERpc3RhbmNlKSBhbmQgbm90IEluc2lkZVRoZVdhbGwocG9pbnQpIA0KICAgICAgICAgICAgICAgIGFuZCBkaXN0VG9Ta2lsbHNob3QgPiBtaW5kaXN0U2tpbGxzaG90IGFuZCAoc2lkZTEgPT0gc2lkZTIgb3Igc2lkZTEgPT0gMCkgdGhlbg0KICAgICAgICAgICAgICAgIGNsb3Nlc3REaXN0YW5jZSA9IGRpc3RhbmNlDQogICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50ID0gcG9pbnQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCg0KICAgIHJldHVybiBjbG9zZXN0UG9pbnQNCmVuZA0KDQpmdW5jdGlvbiBjYWxjdWxhdGVMb25naXR1ZGluYWxBcHByb2FjaExlbmd0aChza2lsbHNob3QsIGQpDQogICAgdjEgPSBza2lsbHNob3Quc2tpbGxzaG90LnByb2plY3RpbGVTcGVlZA0KICAgIHYyID0gbXlIZXJvLm1zDQogICAgbG9uZ2l0dWRpbmFsRGlzdGFuY2UgPSBtYXRoLm1heChza2lsbHNob3RQb3NpdGlvbihza2lsbHNob3QsIEdldFRpY2tDb3VudCgpKTpkaXN0YW5jZShnZXRQZXJwZW5kaWN1bGFyRm9vdHBvaW50KHNraWxsc2hvdC5zdGFydFBvc2l0aW9uLCBza2lsbHNob3QuZW5kUG9zaXRpb24sIFBvaW50MihteUhlcm8ueCwgbXlIZXJvLnopKSkgLSBoaXRib3hTaXplIC8gMiAtIHNraWxsc2hvdC5za2lsbHNob3QucmFkaXVzLCAwKSAgKyB2MSAqIG1hdGgubWF4KHNraWxsc2hvdC5zdGFydFRpY2sgLSBHZXRUaWNrQ291bnQoKSwgMCkgLyAxMDAwDQoNCiAgICBwcmVSZXN1bHQgPSAtZF4yICogdjFeNCArIGReMiAqIHYyXjIgKiB2MV4yICsgbG9uZ2l0dWRpbmFsRGlzdGFuY2VeMiAqIHYyXjIgKiB2MV4yDQogICAgaWYgcHJlUmVzdWx0ID49IDAgdGhlbg0KICAgICAgICByZXN1bHQgPSAobWF0aC5zcXJ0KHByZVJlc3VsdCkgLSBsb25naXR1ZGluYWxEaXN0YW5jZSAqIHYyXjIpIC8gKHYxXjIgLSB2Ml4yKQ0KICAgICAgICBpZiByZXN1bHQgPj0gMCB0aGVuDQogICAgICAgICAgICByZXR1cm4gcmVzdWx0DQogICAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgcmV0dXJuIC0xDQplbmQNCg0KZnVuY3Rpb24gY2FsY3VsYXRlTG9uZ2l0dWRpbmFsUmV0cmVhdExlbmd0aChza2lsbHNob3QsIGQpDQogICAgdjEgPSBza2lsbHNob3Quc2tpbGxzaG90LnByb2plY3RpbGVTcGVlZA0KICAgIHYyID0gbXlIZXJvLm1zDQogICAgbG9uZ2l0dWRpbmFsRGlzdGFuY2UgPSBtYXRoLm1heChza2lsbHNob3RQb3NpdGlvbihza2lsbHNob3QsIEdldFRpY2tDb3VudCgpKTpkaXN0YW5jZShnZXRQZXJwZW5kaWN1bGFyRm9vdHBvaW50KHNraWxsc2hvdC5zdGFydFBvc2l0aW9uLCBza2lsbHNob3QuZW5kUG9zaXRpb24sIFBvaW50MihteUhlcm8ueCwgbXlIZXJvLnopKSkgLSBoaXRib3hTaXplIC8gMiAtIHNraWxsc2hvdC5za2lsbHNob3QucmFkaXVzLCAwKSArIHYxICogbWF0aC5tYXgoc2tpbGxzaG90LnN0YXJ0VGljayAtIEdldFRpY2tDb3VudCgpLCAwKSAvIDEwMDANCg0KICAgIHByZVJlc3VsdCA9IC1kXjIgKiB2MV40ICsgZF4yICogdjJeMiAqIHYxXjIgKyBsb25naXR1ZGluYWxEaXN0YW5jZV4yICogdjJeMiAqIHYxXjINCiAgICBpZiBwcmVSZXN1bHQgPj0gMCB0aGVuDQogICAgICAgIHJlc3VsdCA9IChtYXRoLnNxcnQocHJlUmVzdWx0KSArIGxvbmdpdHVkaW5hbERpc3RhbmNlICogdjJeMikgLyAodjFeMiAtIHYyXjIpDQogICAgICAgIGlmIHJlc3VsdCA+PSAwIHRoZW4NCiAgICAgICAgICAgIHJldHVybiByZXN1bHQNCiAgICAgICAgZW5kDQogICAgZW5kDQoNCiAgICByZXR1cm4gLTENCmVuZA0KDQpmdW5jdGlvbiBpbkRhbmdlcm91c0FyZWEoc2tpbGxzaG90LCBjb29yZGluYXRlKQ0KICAgIGlmIHNraWxsc2hvdC5za2lsbHNob3QudHlwZSA9PSAibGluZSIgdGhlbg0KICAgICAgICByZXR1cm4gaW5SYW5nZShza2lsbHNob3QsIGNvb3JkaW5hdGUpIA0KICAgICAgICBhbmQgbm90IHNraWxsc2hvdEhhc1Bhc3NlZChza2lsbHNob3QsIGNvb3JkaW5hdGUpIA0KICAgICAgICBhbmQgTGluZTIoc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIHNraWxsc2hvdC5lbmRQb3NpdGlvbik6ZGlzdGFuY2UoY29vcmRpbmF0ZSkgPCAoc2tpbGxzaG90LnNraWxsc2hvdC5yYWRpdXMgKyBoaXRib3hTaXplIC8gMiArIEdvb2RFdmFkZUNvbmZpZy5ldmFkZUJ1ZmZlcikgDQogICAgICAgIGFuZCBjb29yZGluYXRlOmRpc3RhbmNlKHNraWxsc2hvdC5zdGFydFBvc2l0aW9uICsgc2tpbGxzaG90LmRpcmVjdGlvblZlY3RvcikgPD0gY29vcmRpbmF0ZTpkaXN0YW5jZShza2lsbHNob3Quc3RhcnRQb3NpdGlvbiAtIHNraWxsc2hvdC5kaXJlY3Rpb25WZWN0b3IpDQogICAgZWxzZQ0KICAgICAgICByZXR1cm4gY29vcmRpbmF0ZTpkaXN0YW5jZShza2lsbHNob3QuZW5kUG9zaXRpb24pIDw9IHNraWxsc2hvdC5za2lsbHNob3QucmFkaXVzICsgaGl0Ym94U2l6ZSAvIDIgKyBHb29kRXZhZGVDb25maWcuZXZhZGVCdWZmZXINCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBpblJhbmdlKHNraWxsc2hvdCwgY29vcmRpbmF0ZSkNCiAgICByZXR1cm4gZ2V0UGVycGVuZGljdWxhckZvb3Rwb2ludChza2lsbHNob3Quc3RhcnRQb3NpdGlvbiwgc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBjb29yZGluYXRlKTpkaXN0YW5jZShza2lsbHNob3Quc3RhcnRQb3NpdGlvbikgPD0gc2tpbGxzaG90LnNraWxsc2hvdC5yYW5nZQ0KZW5kDQoNCmZ1bmN0aW9uIE9uQ3JlYXRlT2JqKG9iamVjdCkNCiAgICBpZiBvYmplY3Qgfj0gbmlsIGFuZCBvYmplY3QudHlwZSA9PSAib2JqX0dlbmVyYWxQYXJ0aWNsZUVtbWl0ZXIiIHRoZW4NCiAgICAgICAgZm9yIGksIHNraWxsU2hvdENoYW1waW9uIGluIHBhaXJzKGNoYW1waW9ucykgZG8NCiAgICAgICAgICAgIGZvciBpLCBza2lsbHNob3QgaW4gcGFpcnMoc2tpbGxTaG90Q2hhbXBpb24uc2tpbGxzaG90cykgZG8NCiAgICAgICAgICAgICAgICBpZiBHb29kRXZhZGVTa2lsbHNob3RDb25maWdbdG9zdHJpbmcoc2tpbGxzaG90Lm5hbWUpXSA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgc2tpbGxzaG90LnByb2plY3RpbGVOYW1lID09IG9iamVjdC5uYW1lIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLCBkZXRlY3RlZFNraWxsc2hvdCBpbiBwYWlycyhkZXRlY3RlZFNraWxsc2hvdHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3Quc2tpbGxzaG90LnByb2plY3RpbGVOYW1lID09IHNraWxsc2hvdC5wcm9qZWN0aWxlTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSA9IDEsIGhlcm9NYW5hZ2VyLmlDb3VudCwgMSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRIZXJvID0gaGVyb01hbmFnZXI6R2V0SGVybyhpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRIZXJvLnRlYW0gPT0gbXlIZXJvLnRlYW0gYW5kIHNraWxsU2hvdENoYW1waW9uLmNoYXJOYW1lID09IGN1cnJlbnRIZXJvLmNoYXJOYW1lIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgR29vZEV2YWRlU2tpbGxzaG90Q29uZmlnW3Rvc3RyaW5nKHNraWxsc2hvdC5uYW1lKV0gPT0gMiBvciAoR29vZEV2YWRlU2tpbGxzaG90Q29uZmlnW3Rvc3RyaW5nKHNraWxsc2hvdC5uYW1lKV0gPT0gMSBhbmQgbkVuZW1pZXMgPD0gMiBhbmQgbm90IChHb29kRXZhZGVDb25maWcuZG9kZ2VDQ29ubHkgb3IgR29vZEV2YWRlQ29uZmlnLmRvZGdlQ0Nvbmx5MikpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgc2tpbGxzaG90LnR5cGUgPT0gImxpbmUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsc2hvdFRvQWRkID0ge29iamVjdCA9IG9iamVjdCwgc3RhcnRQb3NpdGlvbiA9IG5pbCwgZW5kUG9zaXRpb24gPSBuaWwsIGRpcmVjdGlvblZlY3RvciA9IG5pbCwgc3RhcnRUaWNrID0gR2V0VGlja0NvdW50KCksIGVuZFRpY2sgPSBHZXRUaWNrQ291bnQoKSArIHNraWxsc2hvdC5yYW5nZS9za2lsbHNob3QucHJvamVjdGlsZVNwZWVkKjEwMDAsIHNraWxsc2hvdCA9IHNraWxsc2hvdCwgZXZhZGluZyA9IGZhbHNlLCBkcmF3aXQgPSB0cnVlLCBhbHJlYWR5ZGFzaGVkID0gZmFsc2V9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHNraWxsc2hvdC50eXBlID09ICJjaXJjdWxhciIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRQb3NpdGlvbiA9IFBvaW50MihvYmplY3QueCwgb2JqZWN0LnopDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0UG9zaXRpb24gPSBQb2ludDIob2JqZWN0LngsIG9iamVjdC56KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZGV0ZWN0ZWRTa2lsbHNob3RzLCB7c3RhcnRQb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uID0gZW5kUG9zaXRpb24sIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uVmVjdG9yID0gKGVuZFBvc2l0aW9uIC0gc3RhcnRQb3NpdGlvbik6bm9ybWFsaXplZCgpLCBzdGFydFRpY2sgPSBHZXRUaWNrQ291bnQoKSArIHNraWxsc2hvdC5zcGVsbERlbGF5LCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFRpY2sgPSBHZXRUaWNrQ291bnQoKSArIHNraWxsc2hvdC5zcGVsbERlbGF5ICsgc2tpbGxzaG90LnByb2plY3RpbGVTcGVlZCwgc2tpbGxzaG90ID0gc2tpbGxzaG90LCBldmFkaW5nID0gZmFsc2UsIGRyYXdpdCA9IGZhbHNlLCBhbHJlYWR5ZGFzaGVkID0gZmFsc2V9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmZ1bmN0aW9uIE9uQW5pbWF0aW9uKHVuaXQsIGFuaW1hdGlvbk5hbWUpDQppZiBDYXN0aW5nU3BlbGwgPT0gdHJ1ZSB0aGVuDQogICAgaWYgdW5pdC5pc01lIGFuZCAoYW5pbWF0aW9uTmFtZSA9PSAiSWRsZTEiIG9yIGFuaW1hdGlvbk5hbWUgPT0gIlJ1biIpIHRoZW4gQ2FzdGluZ1NwZWxsID0gZmFsc2UgZW5kDQplbmQNCmVuZA0KDQpmdW5jdGlvbiBPblByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkNCiAgICBpZiB1bml0LmlzTWUgYW5kIG15SGVyby5jaGFyTmFtZSA9PSAiTWFzdGVyWWkiIGFuZCBzcGVsbC5uYW1lID09IG15SGVybzpHZXRTcGVsbERhdGEoX1cpLm5hbWUgdGhlbg0KICAgICAgICBDYXN0aW5nU3BlbGwgPSB0cnVlDQogICAgZWxzZWlmIHVuaXQuaXNNZSBhbmQgbXlIZXJvLmNoYXJOYW1lID09ICJOdW51IiBhbmQgc3BlbGwubmFtZSA9PSBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5uYW1lIHRoZW4NCiAgICAgICAgQ2FzdGluZ1NwZWxsID0gdHJ1ZQ0KICAgIGVsc2VpZiB1bml0LmlzTWUgYW5kIG15SGVyby5jaGFyTmFtZSA9PSAiTWlzc0ZvcnR1bmUiIGFuZCBzcGVsbC5uYW1lID09IG15SGVybzpHZXRTcGVsbERhdGEoX1IpLm5hbWUgdGhlbg0KICAgICAgICBDYXN0aW5nU3BlbGwgPSB0cnVlDQogICAgZWxzZWlmIHVuaXQuaXNNZSBhbmQgbXlIZXJvLmNoYXJOYW1lID09ICJNYWx6YWhhciIgYW5kIHNwZWxsLm5hbWUgPT0gbXlIZXJvOkdldFNwZWxsRGF0YShfUikubmFtZSB0aGVuDQogICAgICAgIENhc3RpbmdTcGVsbCA9IHRydWUNCiAgICBlbHNlaWYgdW5pdC5pc01lIGFuZCBteUhlcm8uY2hhck5hbWUgPT0gIkthdGFyaW5hIiBhbmQgc3BlbGwubmFtZSA9PSBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5uYW1lIHRoZW4NCiAgICAgICAgQ2FzdGluZ1NwZWxsID0gdHJ1ZQ0KICAgIGVsc2VpZiB1bml0LmlzTWUgYW5kIG15SGVyby5jaGFyTmFtZSA9PSAiSmFubmEiIGFuZCBzcGVsbC5uYW1lID09IG15SGVybzpHZXRTcGVsbERhdGEoX1IpLm5hbWUgdGhlbg0KICAgICAgICBDYXN0aW5nU3BlbGwgPSB0cnVlDQogICAgZWxzZWlmIHVuaXQuaXNNZSBhbmQgbXlIZXJvLmNoYXJOYW1lID09ICJHYWxpbyIgYW5kIHNwZWxsLm5hbWUgPT0gbXlIZXJvOkdldFNwZWxsRGF0YShfUikubmFtZSB0aGVuDQogICAgICAgIENhc3RpbmdTcGVsbCA9IHRydWUNCiAgICBlbHNlaWYgdW5pdC5pc01lIGFuZCBteUhlcm8uY2hhck5hbWUgPT0gIkZpZGRsZVN0aWNrcyIgYW5kIHNwZWxsLm5hbWUgPT0gbXlIZXJvOkdldFNwZWxsRGF0YShfVykubmFtZSB0aGVuDQogICAgICAgIENhc3RpbmdTcGVsbCA9IHRydWUNCiAgICBlbHNlaWYgdW5pdC5pc01lIGFuZCBteUhlcm8uY2hhck5hbWUgPT0gIkZpZGRsZVN0aWNrcyIgYW5kIHNwZWxsLm5hbWUgPT0gbXlIZXJvOkdldFNwZWxsRGF0YShfUikubmFtZSB0aGVuDQogICAgICAgIENhc3RpbmdTcGVsbCA9IHRydWUNCiAgICBlbmQNCiAgICBpZiB1bml0LmlzTWUgYW5kIGlzTGVibGFuYyB0aGVuDQogICAgICAgIGlmIHNwZWxsLm5hbWUgPT0gbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubmFtZSB0aGVuIGxhc3RzcGVsbCA9ICJRIg0KICAgICAgICBlbHNlaWYgc3BlbGwubmFtZSA9PSBteUhlcm86R2V0U3BlbGxEYXRhKF9XKS5uYW1lIHRoZW4gbGFzdHNwZWxsID0gIlciDQogICAgICAgIGVsc2VpZiBzcGVsbC5uYW1lID09IG15SGVybzpHZXRTcGVsbERhdGEoX0UpLm5hbWUgdGhlbiBsYXN0c3BlbGwgPSAiRSINCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgbm90IG15SGVyby5kZWFkIGFuZCB1bml0LnRlYW0gfj0gbXlIZXJvLnRlYW0gdGhlbg0KICAgICAgICBmb3IgaSwgc2tpbGxTaG90Q2hhbXBpb24gaW4gcGFpcnMoY2hhbXBpb25zKSBkbw0KICAgICAgICAgICAgaWYgc2tpbGxTaG90Q2hhbXBpb24uY2hhck5hbWUgPT0gdW5pdC5jaGFyTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGksIHNraWxsc2hvdCBpbiBwYWlycyhza2lsbFNob3RDaGFtcGlvbi5za2lsbHNob3RzKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiBza2lsbHNob3Quc3BlbGxOYW1lID09IHNwZWxsLm5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRQb3NpdGlvbiA9IFBvaW50MihzcGVsbC5zdGFydFBvcy54LCBzcGVsbC5zdGFydFBvcy56KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kUG9zaXRpb24gPSBQb2ludDIoc3BlbGwuZW5kUG9zLngsIHNwZWxsLmVuZFBvcy56KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzT3JpYW5uYSBhbmQgdW5pdC5jaGFyTmFtZSA9PSAiT3JpYW5uYSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxsID0gbmlsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpID0gMSwgb2JqTWFuYWdlci5tYXhPYmplY3RzLCAxIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG9iaiA9IG9iak1hbmFnZXI6R2V0T2JqZWN0KGkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrQmFsbChvYmopDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBiYWxsIH49IG5pbCB0aGVuIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRQb3NpdGlvbiA9IFBvaW50MihiYWxsLngsIGJhbGwueikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNraWxsc2hvdC5zcGVsbE5hbWUgPT0gIk9yaWFuYURldG9uYXRlQ29tbWFuZCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFBvc2l0aW9uID0gUG9pbnQyKGJhbGwueCwgYmFsbC56KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uVmVjdG9yID0gKGVuZFBvc2l0aW9uIC0gc3RhcnRQb3NpdGlvbik6bm9ybWFsaXplZCgpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBpc09yaWFubmEgYW5kIHVuaXQuY2hhck5hbWUgPT0gIk9yaWFubmEiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNraWxsc2hvdC5zcGVsbE5hbWUgPT0gIk9yaWFuYUl6dW5hQ29tbWFuZCIgdGhlbiBza2lsbHNob3QucmFuZ2UgPSBzdGFydFBvc2l0aW9uOmRpc3RhbmNlKGVuZFBvc2l0aW9uKSBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBHb29kRXZhZGVTa2lsbHNob3RDb25maWdbdG9zdHJpbmcoc2tpbGxzaG90Lm5hbWUpXSA9PSAyIG9yIChHb29kRXZhZGVTa2lsbHNob3RDb25maWdbdG9zdHJpbmcoc2tpbGxzaG90Lm5hbWUpXSA9PSAxIGFuZCBuRW5lbWllcyA8PSAyIGFuZCBub3QgKEdvb2RFdmFkZUNvbmZpZy5kb2RnZUNDb25seSBvciBHb29kRXZhZGVDb25maWcuZG9kZ2VDQ29ubHkyKSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNraWxsc2hvdC50eXBlID09ICJsaW5lIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkZXRlY3RlZFNraWxsc2hvdHMsIHtzdGFydFBvc2l0aW9uID0gc3RhcnRQb3NpdGlvbiwgZW5kUG9zaXRpb24gPSBzdGFydFBvc2l0aW9uICsgZGlyZWN0aW9uVmVjdG9yICogc2tpbGxzaG90LnJhbmdlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uVmVjdG9yID0gZGlyZWN0aW9uVmVjdG9yLCBzdGFydFRpY2sgPSBHZXRUaWNrQ291bnQoKSArIHNraWxsc2hvdC5zcGVsbERlbGF5LCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFRpY2sgPSBHZXRUaWNrQ291bnQoKSArIHNraWxsc2hvdC5zcGVsbERlbGF5ICsgc2tpbGxzaG90LnJhbmdlL3NraWxsc2hvdC5wcm9qZWN0aWxlU3BlZWQqMTAwMCwgc2tpbGxzaG90ID0gc2tpbGxzaG90LCBldmFkaW5nID0gZmFsc2UsIGRyYXdpdCA9IHRydWUsIGFscmVhZHlkYXNoZWQgPSBmYWxzZX0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHNraWxsc2hvdC50eXBlID09ICJjaXJjdWxhciIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZGV0ZWN0ZWRTa2lsbHNob3RzLCB7c3RhcnRQb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uID0gZW5kUG9zaXRpb24sIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uVmVjdG9yID0gZGlyZWN0aW9uVmVjdG9yLCBzdGFydFRpY2sgPSBHZXRUaWNrQ291bnQoKSArIHNraWxsc2hvdC5zcGVsbERlbGF5LCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFRpY2sgPSBHZXRUaWNrQ291bnQoKSArIHNraWxsc2hvdC5zcGVsbERlbGF5ICsgc2tpbGxzaG90LnByb2plY3RpbGVTcGVlZCwgc2tpbGxzaG90ID0gc2tpbGxzaG90LCBldmFkaW5nID0gZmFsc2UsIGRyYXdpdCA9IHRydWUsIGFscmVhZHlkYXNoZWQgPSBmYWxzZX0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzc3JhbmdlID0gZW5kUG9zaXRpb246ZGlzdGFuY2Uoc3RhcnRQb3NpdGlvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGRldGVjdGVkU2tpbGxzaG90cywge3N0YXJ0UG9zaXRpb24gPSBzdGFydFBvc2l0aW9uLCBlbmRQb3NpdGlvbiA9IGVuZFBvc2l0aW9uLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvblZlY3RvciA9IGRpcmVjdGlvblZlY3Rvciwgc3RhcnRUaWNrID0gR2V0VGlja0NvdW50KCkgKyBza2lsbHNob3Quc3BlbGxEZWxheSwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRUaWNrID0gR2V0VGlja0NvdW50KCkgKyBza2lsbHNob3Quc3BlbGxEZWxheSArIChza2lsbHNob3QucHJvamVjdGlsZVNwZWVkICogKHNzcmFuZ2Uvc2tpbGxzaG90LnJhbmdlKSksIHNraWxsc2hvdCA9IHNraWxsc2hvdCwgZXZhZGluZyA9IGZhbHNlLCBkcmF3aXQgPSB0cnVlLCBhbHJlYWR5ZGFzaGVkID0gZmFsc2V9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gc2tpbGxzaG90UG9zaXRpb24oc2tpbGxzaG90LCB0aWNrQ291bnQpDQogICAgaWYgc2tpbGxzaG90LnNraWxsc2hvdC50eXBlID09ICJsaW5lIiB0aGVuDQogICAgICAgIHJldHVybiBza2lsbHNob3Quc3RhcnRQb3NpdGlvbiArIHNraWxsc2hvdC5kaXJlY3Rpb25WZWN0b3IgKiBtYXRoLm1heCh0aWNrQ291bnQgLSBza2lsbHNob3Quc3RhcnRUaWNrLCAwKSAqIHNraWxsc2hvdC5za2lsbHNob3QucHJvamVjdGlsZVNwZWVkIC8gMTAwMA0KICAgIGVsc2UNCiAgICAgICAgcmV0dXJuIHNraWxsc2hvdC5lbmRQb3NpdGlvbg0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIHNraWxsc2hvdEhhc1Bhc3NlZChza2lsbHNob3QsIGNvb3JkaW5hdGUpDQogICAgZm9vdE9mUGVycGVuZGljdWxhciA9IGdldFBlcnBlbmRpY3VsYXJGb290cG9pbnQoc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgY29vcmRpbmF0ZSkNCiAgICBjdXJyZW50U2tpbGxzaG90UG9zaXRpb24gPSBza2lsbHNob3RQb3NpdGlvbihza2lsbHNob3QsIEdldFRpY2tDb3VudCgpIC0gMiAqIEdldExhdGVuY3koKSkNCiAgICBzaWRlMSA9IGdldFNpZGVPZkxpbmUoY29vcmRpbmF0ZSwgZm9vdE9mUGVycGVuZGljdWxhciwgY3VycmVudFNraWxsc2hvdFBvc2l0aW9uKQ0KICAgIHNpZGUyID0gIGdldFNpZGVPZkxpbmUoY29vcmRpbmF0ZSwgZm9vdE9mUGVycGVuZGljdWxhciwgc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24pDQogICAgcmV0dXJuIHNpZGUxIH49IHNpZGUyIGFuZCBjdXJyZW50U2tpbGxzaG90UG9zaXRpb246ZGlzdGFuY2UoZm9vdE9mUGVycGVuZGljdWxhcikgPj0gKHNraWxsc2hvdC5za2lsbHNob3QucmFkaXVzICsgaGl0Ym94U2l6ZSAvIDIpDQplbmQNCg0KZnVuY3Rpb24gZ2V0UGVycGVuZGljdWxhckZvb3Rwb2ludChsaW5lUG9pbnQxLCBsaW5lUG9pbnQyLCBwb2ludCkNCmRpc3RhbmNlRnJvbUxpbmUgPSBMaW5lMihsaW5lUG9pbnQxLCBsaW5lUG9pbnQyKTpkaXN0YW5jZShwb2ludCkNCmRpcmVjdGlvblZlY3RvciA9IChsaW5lUG9pbnQyIC0gbGluZVBvaW50MSk6bm9ybWFsaXplZCgpDQoNCmZvb3RPZlBlcnBlbmRpY3VsYXIgPSBwb2ludCArIFBvaW50MigtZGlyZWN0aW9uVmVjdG9yLnksIGRpcmVjdGlvblZlY3Rvci54KSAqIGRpc3RhbmNlRnJvbUxpbmUNCmlmIExpbmUyKGxpbmVQb2ludDEsIGxpbmVQb2ludDIpOmRpc3RhbmNlKGZvb3RPZlBlcnBlbmRpY3VsYXIpID4gZGlzdGFuY2VGcm9tTGluZSB0aGVuDQpmb290T2ZQZXJwZW5kaWN1bGFyID0gcG9pbnQgLSBQb2ludDIoLWRpcmVjdGlvblZlY3Rvci55LCBkaXJlY3Rpb25WZWN0b3IueCkgKiBkaXN0YW5jZUZyb21MaW5lDQplbmQNCg0KcmV0dXJuIGZvb3RPZlBlcnBlbmRpY3VsYXINCmVuZA0KDQpmdW5jdGlvbiBPblRpY2soKQ0KICAgIGlmIEdvb2RFdmFkZUNvbmZpZy5mcmVlbW92ZW1lbnRibG9jayB0aGVuDQogICAgICAgIGlmIGV2YWRpbmcgYW5kIG5vdCBhbHJlYWR5d3JpdHRlbiB0aGVuDQogICAgICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3Blbih0aGF0ZmlsZSwgInciKQ0KICAgICAgICAgICAgZmlsZTp3cml0ZSgiMSIpDQogICAgICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgICAgIGFscmVhZHl3cml0dGVuID0gdHJ1ZQ0KICAgICAgICBlbHNlaWYgbm90IGV2YWRpbmcgYW5kIGFscmVhZHl3cml0dGVuIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKHRoYXRmaWxlLCAidyIpDQogICAgICAgICAgICBmaWxlOndyaXRlKCIwIikNCiAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICAgICAgYWxyZWFkeXdyaXR0ZW4gPSBmYWxzZQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgbm90IHdyb3RlZGlzY2xhaW1lciB0aGVuDQogICAgICAgICAgICBQcmludENoYXQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiID5Zb3UganVzdCBlbmFibGVkIGZyZWUgdXNlciBtb3ZlbWVudCBibG9jaywgdGhpcyBmdW5jdGlvbiB3aWxsIG9ubHkgd29yayBpZiB5b3UgZm9sbG93ZWQgdHV0b3JpYWwgaW4gbWFpbiB0aHJlYWQgb2YgdGhlIHNjcmlwdCBiZWZvcmUgYWxsb3dpbmcgaXQuPC9mb250PiIpDQogICAgICAgIHdyb3RlZGlzY2xhaW1lciA9IHRydWUNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgICAgIGlmIHNraWxsc2hvdFRvQWRkIH49IG5pbCBhbmQgc2tpbGxzaG90VG9BZGQub2JqZWN0IH49IG5pbCBhbmQgc2tpbGxzaG90VG9BZGQub2JqZWN0LnZhbGlkIGFuZCAoR2V0VGlja0NvdW50KCkgLSBza2lsbHNob3RUb0FkZC5zdGFydFRpY2spID49IEdvb2RFdmFkZUNvbmZpZy5mb3dkZWxheSBhbmQgc2tpbGxzaG90VG9BZGQuc3RhcnRQb3NpdGlvbiA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgc2tpbGxzaG90VG9BZGQuc3RhcnRQb3NpdGlvbiA9IFBvaW50Mihza2lsbHNob3RUb0FkZC5vYmplY3QueCwgc2tpbGxzaG90VG9BZGQub2JqZWN0LnopDQogICAgICAgIGVsc2VpZiBza2lsbHNob3RUb0FkZCB+PSBuaWwgYW5kIHNraWxsc2hvdFRvQWRkLm9iamVjdCB+PSBuaWwgYW5kIHNraWxsc2hvdFRvQWRkLm9iamVjdC52YWxpZCBhbmQgKEdldFRpY2tDb3VudCgpIC0gc2tpbGxzaG90VG9BZGQuc3RhcnRUaWNrKSA+PSAoR29vZEV2YWRlQ29uZmlnLmZvd2RlbGF5KzEpIHRoZW4NCiAgICAgICAgc2tpbGxzaG90VG9BZGQuZGlyZWN0aW9uVmVjdG9yID0gKFBvaW50Mihza2lsbHNob3RUb0FkZC5vYmplY3QueCwgc2tpbGxzaG90VG9BZGQub2JqZWN0LnopIC0gc2tpbGxzaG90VG9BZGQuc3RhcnRQb3NpdGlvbik6bm9ybWFsaXplZCgpDQogICAgICAgIHNraWxsc2hvdFRvQWRkLmVuZFBvc2l0aW9uID0gc2tpbGxzaG90VG9BZGQuc3RhcnRQb3NpdGlvbiArIHNraWxsc2hvdFRvQWRkLmRpcmVjdGlvblZlY3RvciAqIHNraWxsc2hvdFRvQWRkLnNraWxsc2hvdC5yYW5nZSAgICAgICAgDQogICAgICAgIHRhYmxlLmluc2VydChkZXRlY3RlZFNraWxsc2hvdHMsIHNraWxsc2hvdFRvQWRkKQ0KICAgICAgICBza2lsbHNob3RUb0FkZCA9IG5pbA0KICAgICAgICBlbmQNCiAgICBpZiBzaGllbGR0aWNrIH49IG5pbCB0aGVuDQogICAgICAgIGlmIEdldFRpY2tDb3VudCgpID49IHNoaWVsZHRpY2sgdGhlbg0KICAgICAgICAgICAgaWYgaGF2ZVNoaWVsZCgpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBpc1NpdmlyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9FKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiBpc05vY3R1cm5lIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2Ugc2hpZWxkdGljayA9IG5pbA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgZXZhZGluZyB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGksIGRldGVjdGVkU2tpbGxzaG90IGluIHBhaXJzKGRldGVjdGVkU2tpbGxzaG90cykgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3QgYW5kIGRldGVjdGVkU2tpbGxzaG90LmV2YWRpbmcgYW5kIGluRGFuZ2Vyb3VzQXJlYShkZXRlY3RlZFNraWxsc2hvdCwgUG9pbnQyKG15SGVyby54LCBteUhlcm8ueikpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGRvZGdlU2tpbGxzaG90KGRldGVjdGVkU2tpbGxzaG90KQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBpZiBoYXZlZmxhc2ggdGhlbiANCiAgICAgICAgICAgIGlmIG15SGVybzpDYW5Vc2VTcGVsbChmbGFzaFNsb3QpID09IFJFQURZIHRoZW4gDQogICAgICAgICAgICAgICAgZmxhc2hyZWFkeSA9IHRydWUgDQogICAgICAgICAgICAgICAgZWxzZSBmbGFzaHJlYWR5ID0gZmFsc2UgDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIEdvb2RFdmFkZUNvbmZpZy5yZXNldGRvZGdlIHRoZW4NCiAgICAgICAgICAgICAgICBzdG9wRXZhZGUoKQ0KICAgICAgICAgICAgICAgIGRldGVjdGVkU2tpbGxzaG90cyA9IHt9DQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIEF1dG9DYXJyeSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGlmIEF1dG9DYXJyeS5NYWluTWVudSB+PSBuaWwgdGhlbiANCiAgICAgICAgICAgICAgICAgICAgaWYgQXV0b0NhcnJ5Lk1haW5NZW51LkF1dG9DYXJyeSBvciBBdXRvQ2FycnkuTWFpbk1lbnUuTGFzdEhpdCBvciBBdXRvQ2FycnkuTWFpbk1lbnUuTWl4ZWRNb2RlIG9yIEF1dG9DYXJyeS5NYWluTWVudS5MYW5lQ2xlYXINCiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBidWZmZXJzZXQgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRidWZmZXIgPSBHb29kRXZhZGVDb25maWcuZXZhZGVCdWZmZXINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJzZXQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBWSVBfVVNFUiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGFzdHNldCA8IEdldFRpY2tDb3VudCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4gbGFzdE1vdmVtZW50LmRlc3RpbmF0aW9uID0gUG9pbnQyKG1vdXNlUG9zLngsIG1vdXNlUG9zLnopDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RzZXQgPSBHZXRUaWNrQ291bnQoKSArIDEwMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2VpZiBBdXRvQ2FycnkuS2V5cyB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBBdXRvQ2FycnkuS2V5cy5BdXRvQ2Fycnkgb3IgQXV0b0NhcnJ5LktleXMuTWl4ZWRNb2RlIG9yIEF1dG9DYXJyeS5LZXlzLkxhc3RIaXQgb3IgQXV0b0NhcnJ5LktleXMuTGFuZUNsZWFyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBidWZmZXJzZXQgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRidWZmZXIgPSBHb29kRXZhZGVDb25maWcuZXZhZGVCdWZmZXINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJzZXQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBWSVBfVVNFUiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGFzdHNldCA8IEdldFRpY2tDb3VudCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4gbGFzdE1vdmVtZW50LmRlc3RpbmF0aW9uID0gUG9pbnQyKG1vdXNlUG9zLngsIG1vdXNlUG9zLnopDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RzZXQgPSBHZXRUaWNrQ291bnQoKSArIDEwMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmIE1NQV9Mb2FkZWQgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBfRy5NTUFfT3Jid2Fsa2VyIG9yIF9HLk1NQV9IeWJyaWRNb2RlIG9yIF9HLk1NQV9MYW5lQ2xlYXIgb3IgX0cuTU1BX0xhc3RIaXQgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgYnVmZmVyc2V0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRidWZmZXIgPSBHb29kRXZhZGVDb25maWcuZXZhZGVCdWZmZXINCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcnNldCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBWSVBfVVNFUiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBsYXN0c2V0IDwgR2V0VGlja0NvdW50KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVuIGxhc3RNb3ZlbWVudC5kZXN0aW5hdGlvbiA9IFBvaW50Mihtb3VzZVBvcy54LCBtb3VzZVBvcy56KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RzZXQgPSBHZXRUaWNrQ291bnQoKSArIDEwMA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBuU2tpbGxzaG90cyA9IDANCiAgICAgICAgICAgIGZvciBfLCBkZXRlY3RlZFNraWxsc2hvdCBpbiBwYWlycyhkZXRlY3RlZFNraWxsc2hvdHMpIGRvDQogICAgICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3QgdGhlbiBuU2tpbGxzaG90cyA9IG5Ta2lsbHNob3RzICsgMSBlbmQNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBpZiBub3QgYWxsb3dDdXN0b21Nb3ZlbWVudCBhbmQgblNraWxsc2hvdHMgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgc3RvcEV2YWRlKCkNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBoaXRib3hTaXplID0gR2V0RGlzdGFuY2UobXlIZXJvLm1pbkJCb3gsIG15SGVyby5tYXhCQm94KQ0KDQogICAgICAgICAgICBuRW5lbWllcyA9IENvdW50RW5lbXlIZXJvSW5SYW5nZSgxNTAwKQ0KICAgICAgICAgICAgdGFibGUuc29ydChlbmVteWVzLCBmdW5jdGlvbih4LHkpIHJldHVybiBHZXREaXN0YW5jZSh4KSA8IEdldERpc3RhbmNlKHkpIGVuZCkNCg0KDQogICAgICAgICAgICBoZXJvUG9zaXRpb24gPSBQb2ludDIobXlIZXJvLngsIG15SGVyby56KQ0KICAgICAgICAgICAgZm9yIGksIGRldGVjdGVkU2tpbGxzaG90IGluIGlwYWlycyhkZXRlY3RlZFNraWxsc2hvdHMpIGRvDQogICAgICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3QuZW5kVGljayA8PSBHZXRUaWNrQ291bnQoKSB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKGRldGVjdGVkU2tpbGxzaG90cywgaSkNCiAgICAgICAgICAgICAgICBpID0gaS0xDQogICAgICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3QuZXZhZGluZyB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlTW92ZW1lbnQoZGV0ZWN0ZWRTa2lsbHNob3QpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgaWYgZXZhZGluZyB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGRldGVjdGVkU2tpbGxzaG90LmV2YWRpbmcgYW5kIG5vdCBpbkRhbmdlcm91c0FyZWEoZGV0ZWN0ZWRTa2lsbHNob3QsIGhlcm9Qb3NpdGlvbikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3Quc2tpbGxzaG90LnR5cGUgPT0gImxpbmUiIHRoZW4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZGUxID0gZ2V0U2lkZU9mTGluZShkZXRlY3RlZFNraWxsc2hvdC5zdGFydFBvc2l0aW9uLCBkZXRlY3RlZFNraWxsc2hvdC5lbmRQb3NpdGlvbiwgaGVyb1Bvc2l0aW9uKSANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWRlMiA9IGdldFNpZGVPZkxpbmUoZGV0ZWN0ZWRTa2lsbHNob3Quc3RhcnRQb3NpdGlvbiwgZGV0ZWN0ZWRTa2lsbHNob3QuZW5kUG9zaXRpb24sIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2tpbGxzaG90SGFzUGFzc2VkKGRldGVjdGVkU2tpbGxzaG90LCBoZXJvUG9zaXRpb24pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVNb3ZlbWVudChkZXRlY3RlZFNraWxsc2hvdCkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBub3QgaW5EYW5nZXJvdXNBcmVhKGRldGVjdGVkU2tpbGxzaG90LCBnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpKSBhbmQgKHNpZGUxID09IHNpZGUyKSBhbmQgKHNpZGUxIH49IDApIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVNb3ZlbWVudChkZXRlY3RlZFNraWxsc2hvdCkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBub3QgaW5SYW5nZShkZXRlY3RlZFNraWxsc2hvdCwgaGVyb1Bvc2l0aW9uKSBhbmQgbm90IGluUmFuZ2UoZGV0ZWN0ZWRTa2lsbHNob3QsIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVNb3ZlbWVudChkZXRlY3RlZFNraWxsc2hvdCkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBsYXN0TW92ZW1lbnQuYXBwcm9hY2hlZFBvaW50IH49IGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb290cG9pbnQgPSBnZXRQZXJwZW5kaWN1bGFyRm9vdHBvaW50KGRldGVjdGVkU2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIGRldGVjdGVkU2tpbGxzaG90LmVuZFBvc2l0aW9uLCBnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0U2FmZVBvaW50ID0gZm9vdHBvaW50ICsgUG9pbnQyKC1kZXRlY3RlZFNraWxsc2hvdC5kaXJlY3Rpb25WZWN0b3IueSwgZGV0ZWN0ZWRTa2lsbHNob3QuZGlyZWN0aW9uVmVjdG9yLngpICogKGRldGVjdGVkU2tpbGxzaG90LnNraWxsc2hvdC5yYWRpdXMgKyBoaXRib3hTaXplIC8gMiArIEdvb2RFdmFkZUNvbmZpZy5ldmFkZUJ1ZmZlciArIG1vdmVCdWZmZXIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRTaWRlT2ZMaW5lKGRldGVjdGVkU2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIGRldGVjdGVkU2tpbGxzaG90LmVuZFBvc2l0aW9uLCBoZXJvUG9zaXRpb24pIH49IGdldFNpZGVPZkxpbmUoZGV0ZWN0ZWRTa2lsbHNob3Quc3RhcnRQb3NpdGlvbiwgZGV0ZWN0ZWRTa2lsbHNob3QuZW5kUG9zaXRpb24sIGNsb3Nlc3RTYWZlUG9pbnQpKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RTYWZlUG9pbnQgPSBmb290cG9pbnQgLSBQb2ludDIoLWRldGVjdGVkU2tpbGxzaG90LmRpcmVjdGlvblZlY3Rvci55LCBkZXRlY3RlZFNraWxsc2hvdC5kaXJlY3Rpb25WZWN0b3IueCkgKiAoZGV0ZWN0ZWRTa2lsbHNob3Quc2tpbGxzaG90LnJhZGl1cyArIGhpdGJveFNpemUgLyAyICsgR29vZEV2YWRlQ29uZmlnLmV2YWRlQnVmZmVyICsgbW92ZUJ1ZmZlcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVNb3ZlbWVudHMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93Q3VzdG9tTW92ZW1lbnQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2tpbGxzaG90IH49IG5pbCB0aGVuIGlmIHNraWxsc2hvdC5zcGVsbE5hbWUgfj0gbmlsIHRoZW4gaWYgR29vZEV2YWRlU2tpbGxzaG90Q29uZmlnW3Rvc3RyaW5nKHNraWxsc2hvdC5uYW1lKV0gPT0gMiBhbmQgKG5Ta2lsbHNob3RzID4gMSkgYW5kIE5lZWREYXNoKHNraWxsc2hvdCwgdHJ1ZSkgdGhlbiBEYXNoVG8oY2xvc2VzdFNhZmVQb2ludC54LCBjbG9zZXN0U2FmZVBvaW50LnkpIGVuZCBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteUhlcm86TW92ZVRvKGNsb3Nlc3RTYWZlUG9pbnQueCwgY2xvc2VzdFNhZmVQb2ludC55KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNb3ZlbWVudC5tb3ZlQ29tbWFuZCA9IFBvaW50MihjbG9zZXN0U2FmZVBvaW50LngsIGNsb3Nlc3RTYWZlUG9pbnQueSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd0N1c3RvbU1vdmVtZW50ID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlTW92ZW1lbnRzID0gdHJ1ZQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE1vdmVtZW50LmFwcHJvYWNoZWRQb2ludCA9IGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGV2YWRlUmFkaXVzID0gZGV0ZWN0ZWRTa2lsbHNob3Quc2tpbGxzaG90LnJhZGl1cyArIGhpdGJveFNpemUgLyAyICsgR29vZEV2YWRlQ29uZmlnLmV2YWRlQnVmZmVyICsgbW92ZUJ1ZmZlcg0KICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25WZWN0b3IgPSAoaGVyb1Bvc2l0aW9uIC0gZGV0ZWN0ZWRTa2lsbHNob3QuZW5kUG9zaXRpb24pOm5vcm1hbGl6ZWQoKQ0KICAgICAgICAgICAgICAgICAgICB0YW5nZW50RGlyZWN0aW9uVmVjdG9yID0gUG9pbnQyKC1kaXJlY3Rpb25WZWN0b3IueSwgZGlyZWN0aW9uVmVjdG9yLngpDQogICAgICAgICAgICAgICAgICAgIG1vdmVtZW50VGFyZ2V0U2lkZU9mTGluZSA9IGdldFNpZGVPZkxpbmUoaGVyb1Bvc2l0aW9uLCBoZXJvUG9zaXRpb24gKyB0YW5nZW50RGlyZWN0aW9uVmVjdG9yLCBnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpKQ0KICAgICAgICAgICAgICAgICAgICBza2lsbHNob3RTaWRlT2ZMaW5lID0gZ2V0U2lkZU9mTGluZShoZXJvUG9zaXRpb24sIGhlcm9Qb3NpdGlvbiArIHRhbmdlbnREaXJlY3Rpb25WZWN0b3IsIGRldGVjdGVkU2tpbGxzaG90LmVuZFBvc2l0aW9uKQ0KDQogICAgICAgICAgICAgICAgICAgIGlmIG1vdmVtZW50VGFyZ2V0U2lkZU9mTGluZSA9PSAwIG9yIG1vdmVtZW50VGFyZ2V0U2lkZU9mTGluZSB+PSBza2lsbHNob3RTaWRlT2ZMaW5lIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlTW92ZW1lbnQoZGV0ZWN0ZWRTa2lsbHNob3QpDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCk6ZGlzdGFuY2UoZGV0ZWN0ZWRTa2lsbHNob3QuZW5kUG9zaXRpb24pIDw9IGV2YWRlUmFkaXVzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RUYXJnZXQgPSBkZXRlY3RlZFNraWxsc2hvdC5lbmRQb3NpdGlvbiArIChnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpIC0gZGV0ZWN0ZWRTa2lsbHNob3QuZW5kUG9zaXRpb24pOm5vcm1hbGl6ZWQoKSAqIGV2YWRlUmFkaXVzDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RUYXJnZXQgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICAgICAgZHggPSBkZXRlY3RlZFNraWxsc2hvdC5lbmRQb3NpdGlvbi54IC0gaGVyb1Bvc2l0aW9uLngNCiAgICAgICAgICAgICAgICAgICAgZHkgPSBkZXRlY3RlZFNraWxsc2hvdC5lbmRQb3NpdGlvbi55IC0gaGVyb1Bvc2l0aW9uLnkNCiAgICAgICAgICAgICAgICAgICAgRF9zcXVhcmVkID0gZHggKiBkeCArIGR5ICogZHkNCiAgICAgICAgICAgICAgICAgICAgaWYgRF9zcXVhcmVkIDwgZXZhZGVSYWRpdXMgKiBldmFkZVJhZGl1cyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUG9pbnQxID0gaGVyb1Bvc2l0aW9uIC0gdGFuZ2VudERpcmVjdGlvblZlY3RvciAqIChldmFkZVJhZGl1cyAvIDIgKyBzbW9vdGhpbmcpDQogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUG9pbnQyID0gaGVyb1Bvc2l0aW9uICsgdGFuZ2VudERpcmVjdGlvblZlY3RvciAqIChldmFkZVJhZGl1cyAvIDIgKyBzbW9vdGhpbmcpDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyc2VjdGlvblBvaW50cyA9IENpcmNsZTIoZGV0ZWN0ZWRTa2lsbHNob3QuZW5kUG9zaXRpb24sIGV2YWRlUmFkaXVzKTppbnRlcnNlY3Rpb25Qb2ludHMoQ2lyY2xlMihoZXJvUG9zaXRpb24sIG1hdGguc3FydChEX3NxdWFyZWQgLSBldmFkZVJhZGl1cyAqIGV2YWRlUmFkaXVzKSkpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAjaW50ZXJzZWN0aW9uUG9pbnRzID09IDIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVQb2ludDEgPSBoZXJvUG9zaXRpb24gLSAoaGVyb1Bvc2l0aW9uIC0gaW50ZXJzZWN0aW9uUG9pbnRzWzFdKTpub3JtYWxpemVkKCkgKiAoZXZhZGVSYWRpdXMgLyAyICsgc21vb3RoaW5nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVQb2ludDIgPSBoZXJvUG9zaXRpb24gLSAoaGVyb1Bvc2l0aW9uIC0gaW50ZXJzZWN0aW9uUG9pbnRzWzJdKTpub3JtYWxpemVkKCkgKiAoZXZhZGVSYWRpdXMgLyAyICsgc21vb3RoaW5nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVQb2ludDEgPSBoZXJvUG9zaXRpb24gLSB0YW5nZW50RGlyZWN0aW9uVmVjdG9yICogKGV2YWRlUmFkaXVzIC8gMiArIHNtb290aGluZykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlUG9pbnQyID0gaGVyb1Bvc2l0aW9uICsgdGFuZ2VudERpcmVjdGlvblZlY3RvciAqIChldmFkZVJhZGl1cyAvIDIgKyBzbW9vdGhpbmcpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGhldGEgPSAoKC1kZXRlY3RlZFNraWxsc2hvdC5lbmRQb3NpdGlvbiArIHNhZmVQb2ludDIpOnBvbGFyKCkgLSAoLWRldGVjdGVkU2tpbGxzaG90LmVuZFBvc2l0aW9uICsgc2FmZVBvaW50MSk6cG9sYXIoKSkgJSAzNjANCiAgICAgICAgICAgICAgICAgICAgaWYgY2xvc2VzdFRhcmdlIGFuZCAoDQogICAgICAgICAgICAgICAgICAgICAgICAoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhldGEgPCAxODAgYW5kICgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U2lkZU9mTGluZShkZXRlY3RlZFNraWxsc2hvdC5lbmRQb3NpdGlvbiwgc2FmZVBvaW50MiwgY2xvc2VzdFRhcmdldCkgPT0gZ2V0U2lkZU9mTGluZShkZXRlY3RlZFNraWxsc2hvdC5lbmRQb3NpdGlvbiwgc2FmZVBvaW50MiwgaGVyb1Bvc2l0aW9uKSBhbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U2lkZU9mTGluZShkZXRlY3RlZFNraWxsc2hvdC5lbmRQb3NpdGlvbiwgc2FmZVBvaW50MSwgY2xvc2VzdFRhcmdldCkgPT0gZ2V0U2lkZU9mTGluZShkZXRlY3RlZFNraWxsc2hvdC5lbmRQb3NpdGlvbiwgc2FmZVBvaW50MSwgaGVyb1Bvc2l0aW9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKSBvciAoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhldGEgPiAxODAgYW5kICgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U2lkZU9mTGluZShkZXRlY3RlZFNraWxsc2hvdC5lbmRQb3NpdGlvbiwgc2FmZVBvaW50MiwgY2xvc2VzdFRhcmdldCkgPT0gZ2V0U2lkZU9mTGluZShkZXRlY3RlZFNraWxsc2hvdC5lbmRQb3NpdGlvbiwgc2FmZVBvaW50MiwgaGVyb1Bvc2l0aW9uKSBvcg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRTaWRlT2ZMaW5lKGRldGVjdGVkU2tpbGxzaG90LmVuZFBvc2l0aW9uLCBzYWZlUG9pbnQxLCBjbG9zZXN0VGFyZ2V0KSA9PSBnZXRTaWRlT2ZMaW5lKGRldGVjdGVkU2tpbGxzaG90LmVuZFBvc2l0aW9uLCBzYWZlUG9pbnQxLCBoZXJvUG9zaXRpb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlTW92ZW1lbnRUYXJnZXRzID0ge2Nsb3Nlc3RUYXJnZXQsIHNhZmVQb2ludDEsIHNhZmVQb2ludDJ9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZU1vdmVtZW50VGFyZ2V0cyA9IHtzYWZlUG9pbnQxLCBzYWZlUG9pbnQyfQ0KICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50ID0gZmluZEJlc3REaXJlY3Rpb24oc2tpbGxzaG90LGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCksIHBvc3NpYmxlTW92ZW1lbnRUYXJnZXRzKQ0KICAgICAgICAgICAgICAgIGlmIGNsb3Nlc3RQb2ludCB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBjYXB0dXJlTW92ZW1lbnRzID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgYWxsb3dDdXN0b21Nb3ZlbWVudCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgaWYgc2tpbGxzaG90IH49IG5pbCB0aGVuIGlmIHNraWxsc2hvdC5zcGVsbE5hbWUgfj0gbmlsIHRoZW4gaWYgR29vZEV2YWRlU2tpbGxzaG90Q29uZmlnW3Rvc3RyaW5nKHNraWxsc2hvdC5uYW1lKV0gPT0gMiBhbmQgKG5Ta2lsbHNob3RzID4gMSkgYW5kIE5lZWREYXNoKHNraWxsc2hvdCwgdHJ1ZSkgdGhlbiBEYXNoVG8oY2xvc2VzdFBvaW50LngsIGNsb3Nlc3RQb2ludC55KSBlbmQNCiAgICAgICAgICAgICAgICAgICAgbXlIZXJvOk1vdmVUbyhjbG9zZXN0UG9pbnQueCwgY2xvc2VzdFBvaW50LnkpDQogICAgICAgICAgICAgICAgICAgIGxhc3RNb3ZlbWVudC5tb3ZlQ29tbWFuZCA9IFBvaW50MihjbG9zZXN0UG9pbnQueCwgY2xvc2VzdFBvaW50LnkpDQogICAgICAgICAgICAgICAgICAgIGFsbG93Q3VzdG9tTW92ZW1lbnQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBjYXB0dXJlTW92ZW1lbnRzID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQplbmQNCmVsc2VpZiBpbkRhbmdlcm91c0FyZWEoZGV0ZWN0ZWRTa2lsbHNob3QsIGhlcm9Qb3NpdGlvbikgdGhlbg0KICAgIGRvZGdlU2tpbGxzaG90KGRldGVjdGVkU2tpbGxzaG90KQ0KZW5kDQplbmQNCmVuZA0KZW5kDQoNCmZ1bmN0aW9uIERhc2hUbyh4LCB5KQ0KICAgIGlmIEdvb2RFdmFkZUNvbmZpZy51c2VkYXNoZXMgdGhlbg0KICAgICAgICBpZiBpc1ZheW5lIGFuZCAgbXlIZXJvOkNhblVzZVNwZWxsKF9RKSA9PSBSRUFEWSB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoX1EsIHgsIHkpDQogICAgICAgIGVsc2VpZiBpc1JpdmVuIGFuZCAgbXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoX0UsIHgsIHkpDQogICAgICAgIGVsc2VpZiBpc0dyYXZlcyBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoX0UsIHgsIHkpDQogICAgICAgIGVsc2VpZiBpc0V6cmVhbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoX0UsIHgsIHkpDQogICAgICAgIGVsc2VpZiBpc0thc3NhZGluIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX1IpID09IFJFQURZIHRoZW4NCiAgICAgICAgICAgIENhc3RTcGVsbChfUiwgeCwgeSkNCiAgICAgICAgZWxzZWlmIGlzTGVibGFuYyBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKF9XKSA9PSBSRUFEWSB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoX1csIHgsIHkpDQogICAgICAgIGVsc2VpZiBpc0xlYmxhbmMgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChfUikgPT0gUkVBRFkgYW5kIGxhc3RzcGVsbCA9PSAiVyIgdGhlbg0KICAgICAgICAgICAgQ2FzdFNwZWxsKF9SLCB4LCB5KQ0KICAgICAgICBlbHNlaWYgaXNGaXp6IGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIHRoZW4NCiAgICAgICAgICAgIENhc3RTcGVsbChfRSwgeCwgeSkNCiAgICAgICAgZWxzZWlmIGlzU2hhY28gYW5kIG15SGVybzpDYW5Vc2VTcGVsbChfUSkgPT0gUkVBRFkgdGhlbg0KICAgICAgICAgICAgQ2FzdFNwZWxsKF9RLCB4LCB5KQ0KICAgICAgICBlbHNlaWYgaXNDb3JraSBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKF9XKSA9PSBSRUFEWSB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoX1csIHgsIHkpDQogICAgICAgIGVsc2VpZiBpc1JlbmVrdG9uIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIHRoZW4NCiAgICAgICAgICAgIENhc3RTcGVsbChfRSwgeCwgeSkNCiAgICAgICAgZWxzZWlmIGlzTHVjaWFuIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIHRoZW4NCiAgICAgICAgICAgIENhc3RTcGVsbChfRSwgeCwgeSkNCiAgICAgICAgZWxzZWlmIGhhdmVmbGFzaCBhbmQgZmxhc2hyZWFkeSBhbmQgdXNlZmxhc2ggYW5kIEdvb2RFdmFkZUNvbmZpZy51c2VmbGFzaCB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoZmxhc2hTbG90LCB4LCB5KQ0KICAgICAgICAgICAgdXNlZmxhc2ggPSBmYWxzZQ0KICAgICAgICBlbHNlaWYgaXNDYWl0bHluIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIHRoZW4NCiAgICAgICAgICAgIG15UG9zID0gUG9pbnQyKG15SGVyby54LCBteUhlcm8ueikNCiAgICAgICAgICAgIGNhc3Rwb3MgPSBteVBvcyArIChteVBvcyAtIChQb2ludDIoeCwgeSkpKQ0KICAgICAgICAgICAgQ2FzdFNwZWxsKF9FLCBjYXN0cG9zLngsIGNhc3Rwb3MueSkNCiAgICAgICAgZWxzZWlmIGlzVHJpc3RhbmEgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChfVykgPT0gUkVBRFkgdGhlbg0KICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCB4LCB5KQ0KICAgICAgICBlbHNlaWYgaXNTaGVuIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIHRoZW4NCiAgICAgICAgICAgIENhc3RTcGVsbChfRSwgeCwgeSkgDQogICAgICAgIGVsc2VpZiBpc1RyeW5kYW1lcmUgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgdGhlbg0KICAgICAgICAgICAgQ2FzdFNwZWxsKF9FLCB4LCB5KQ0KICAgICAgICBlbmQgICANCiAgICBlbmQgICAgICAgICAgICAgICAgICAgICAgICAgIA0KZW5kDQpmdW5jdGlvbiBOZWVkRGFzaChza2lsbHNob3QsIGZvcmNlRGFzaCkNCiAgICBpZiBHb29kRXZhZGVDb25maWcudXNlZGFzaGVzIHRoZW4NCiAgICAgICAgdXNlZmxhc2ggPSBmYWxzZQ0KICAgICAgICBsb2NhbCBocCA9IG15SGVyby5oZWFsdGggLyBteUhlcm8ubWF4SGVhbHRoDQogICAgaWYgaXNWYXluZSBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKF9RKSA9PSBSRUFEWSBhbmQgc2tpbGxzaG90LnNraWxsc2hvdC5jYyA9PSAidHJ1ZSIgdGhlbg0KICAgICAgICBpZiBmb3JjZURhc2ggb3IgaHAgPCAwLjQgdGhlbiANCiAgICAgICAgZGFzaHJhbmdlID0gMzAwDQogICAgICAgIHJldHVybiB0cnVlIGVuZA0KICAgICAgICBpZiBuU2tpbGxzaG90cyA+IDEgb3IgX2lzRGFuZ2VyU2tpbGxzaG90KHNraWxsc2hvdCkgdGhlbiANCiAgICAgICAgZGFzaHJhbmdlID0gMzAwDQogICAgICAgIHJldHVybiB0cnVlIGVuZA0KICAgIGVsc2VpZiBpc1JpdmVuIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBza2lsbHNob3Quc2tpbGxzaG90LmNjID09ICJ0cnVlIiB0aGVuDQogICAgICAgIGlmIGZvcmNlRGFzaCBvciBocCA8IDAuNCB0aGVuIA0KICAgICAgICBkYXNocmFuZ2UgPSAzMjUgDQogICAgICAgIHJldHVybiB0cnVlIGVuZA0KICAgICAgICBpZiBuU2tpbGxzaG90cyA+IDEgb3IgX2lzRGFuZ2VyU2tpbGxzaG90KHNraWxsc2hvdCkgdGhlbiANCiAgICAgICAgZGFzaHJhbmdlID0gMzI1DQogICAgcmV0dXJuIHRydWUgZW5kDQogICAgZWxzZWlmIGlzR3JhdmVzIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBza2lsbHNob3Quc2tpbGxzaG90LmNjID09ICJ0cnVlIiB0aGVuDQogICAgaWYgZm9yY2VEYXNoIG9yIGhwIDwgMC40IHRoZW4NCiAgICBkYXNocmFuZ2UgPSA0MjUNCiAgICByZXR1cm4gdHJ1ZSBlbmQNCiAgICBpZiBfaXNEYW5nZXJTa2lsbHNob3Qoc2tpbGxzaG90KSB0aGVuDQogICAgZGFzaHJhbmdlID0gNDI1DQogICAgcmV0dXJuIHRydWUgZW5kDQogICAgaWYgX2lzRGFuZ2VyU2tpbGxzaG90KHNraWxsc2hvdCkgdGhlbg0KICAgIGRhc2hyYW5nZSA9IDY2MA0KICAgIHJldHVybiB0cnVlIGVuZA0KICAgIGVsc2VpZiBpc1NoYWNvIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX1EpID09IFJFQURZIGFuZCBza2lsbHNob3Quc2tpbGxzaG90LmNjID09ICJ0cnVlIiB0aGVuDQogICAgaWYgc2tpbGxzaG90IG9yIGhwIDwgMC40IHRoZW4NCiAgICBkYXNocmFuZ2UgPSA0MDANCiAgICByZXR1cm4gdHJ1ZSBlbmQNCiAgICBpZiBfaXNEYW5nZXJTa2lsbHNob3Qoc2tpbGxzaG90KSB0aGVuDQogICAgICAgIGRhc2hyYW5nZSA9IDQwMA0KICAgICAgICByZXR1cm4gdHJ1ZSBlbmQNCiAgICBlbHNlaWYgaXNFenJlYWwgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgYW5kIHNraWxsc2hvdC5za2lsbHNob3QuY2MgPT0gInRydWUiIHRoZW4NCiAgICBpZiBmb3JjZURhc2ggb3IgaHAgPCAwLjQgdGhlbg0KICAgICAgICBkYXNocmFuZ2UgPSA0NTANCiAgICAgICAgcmV0dXJuIHRydWUgZW5kDQogICAgaWYgX2lzRGFuZ2VyU2tpbGxzaG90KHNraWxsc2hvdCkgdGhlbg0KICAgICAgICBkYXNocmFuZ2UgPSA0NTANCiAgICAgICAgcmV0dXJuIHRydWUgZW5kDQogICAgZWxzZWlmIGlzRml6eiBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSBhbmQgc2tpbGxzaG90LnNraWxsc2hvdC5jYyA9PSAidHJ1ZSIgdGhlbg0KICAgIGlmIHNraWxsc2hvdCBvciBocCA8IDAuNCB0aGVuDQogICAgICAgIGRhc2hyYW5nZSA9IDQwMA0KICAgICAgICByZXR1cm4gdHJ1ZSBlbmQNCiAgICBpZiBfaXNEYW5nZXJTa2lsbHNob3Qoc2tpbGxzaG90KSB0aGVuDQogICAgICAgIGRhc2hyYW5nZSA9IDQwMA0KICAgICAgICByZXR1cm4gdHJ1ZSBlbmQNCiAgICBlbHNlaWYgaXNLYXNzYWRpbiBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKF9SKSA9PSBSRUFEWSBhbmQgc2tpbGxzaG90LnNraWxsc2hvdC5jYyA9PSAidHJ1ZSIgdGhlbg0KICAgIGlmIGZvcmNlRGFzaCBvciBocCA8IDAuNCB0aGVuDQogICAgICAgIGRhc2hyYW5nZSA9IDcwMA0KICAgICAgICByZXR1cm4gdHJ1ZSBlbmQNCiAgICBpZiBfaXNEYW5nZXJTa2lsbHNob3Qoc2tpbGxzaG90KSB0aGVuDQogICAgICAgIGRhc2hyYW5nZSA9IDcwMA0KICAgICAgICByZXR1cm4gdHJ1ZSBlbmQNCiAgICBlbHNlaWYgaXNMZWJsYW5jIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX1cpID09IFJFQURZIGFuZCBza2lsbHNob3Quc2tpbGxzaG90LmNjID09ICJ0cnVlIiB0aGVuDQogICAgaWYgZm9yY2VEYXNoIG9yIGhwIDwgMC40IHRoZW4NCiAgICAgICAgZGFzaHJhbmdlID0gNjAwDQogICAgICAgIHJldHVybiB0cnVlIGVuZA0KICAgIGlmIF9pc0RhbmdlclNraWxsc2hvdChza2lsbHNob3QpIHRoZW4NCiAgICAgICAgZGFzaHJhbmdlID0gNjAwDQogICAgICAgIHJldHVybiB0cnVlIGVuZA0KICAgIGVsc2VpZiBpc0xlYmxhbmMgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChfUikgPT0gUkVBRFkgYW5kIHNraWxsc2hvdC5za2lsbHNob3QuY2MgPT0gInRydWUiIGFuZCBsYXN0c3BlbGwgPT0gIlciIHRoZW4NCiAgICBpZiBmb3JjZURhc2ggb3IgaHAgPCAwLjQgdGhlbg0KICAgICAgICBkYXNocmFuZ2UgPSA2MDANCiAgICAgICAgcmV0dXJuIHRydWUgZW5kDQogICAgaWYgX2lzRGFuZ2VyU2tpbGxzaG90KHNraWxsc2hvdCkgdGhlbg0KICAgIGRhc2hyYW5nZSA9IDYwMA0KICAgIHJldHVybiB0cnVlIGVuZA0KICAgIGVsc2VpZiBpc1JlbmVrdG9uIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBza2lsbHNob3Quc2tpbGxzaG90LmNjID09ICJ0cnVlIiB0aGVuDQogICAgICAgIGlmIGZvcmNlRGFzaCBvciBocCA8IDAuNCB0aGVuDQogICAgICAgIGRhc2hyYW5nZSA9IDQ1MA0KICAgIHJldHVybiB0cnVlIGVuZA0KICAgIGlmIF9pc0RhbmdlclNraWxsc2hvdChza2lsbHNob3QpIHRoZW4NCiAgICAgICAgZGFzaHJhbmdlID0gNDUwDQogICAgICAgIHJldHVybiB0cnVlIGVuZA0KICAgIGVsc2VpZiBpc0NvcmtpIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX1cpID09IFJFQURZIGFuZCBza2lsbHNob3Quc2tpbGxzaG90LmNjID09ICJ0cnVlIiB0aGVuDQogICAgaWYgX2lzRGFuZ2VyU2tpbGxzaG90KHNraWxsc2hvdCkgdGhlbg0KICAgICAgICBkYXNocmFuZ2UgPSA4MDANCiAgICAgICAgcmV0dXJuIHRydWUgZW5kDQogICAgZWxzZWlmIGlzTHVjaWFuIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBza2lsbHNob3Quc2tpbGxzaG90LmNjID09ICJ0cnVlIiB0aGVuDQogICAgaWYgZm9yY2VEYXNoIG9yIGhwIDwgMC40IHRoZW4NCiAgICAgICAgZGFzaHJhbmdlID0gNDI1DQogICAgICAgIHJldHVybiB0cnVlIGVuZA0KICAgIGlmIF9pc0RhbmdlclNraWxsc2hvdChza2lsbHNob3QpIHRoZW4NCiAgICAgICAgZGFzaHJhbmdlID0gNDI1DQogICAgICAgIHJldHVybiB0cnVlIGVuZA0KICAgIGVsc2VpZiBoYXZlZmxhc2ggYW5kIGZsYXNocmVhZHkgYW5kIEdvb2RFdmFkZUNvbmZpZy51c2VmbGFzaCBhbmQgaXNyZWFsbHlkYW5nZXJvdXMoc2tpbGxzaG90KSB0aGVuDQogICAgICAgIGRhc2hyYW5nZSA9IDQwMA0KICAgICAgICB1c2VmbGFzaCA9IHRydWUNCiAgICAgICAgcmV0dXJuIHRydWUNCiAgICBlbHNlaWYgaXNUcnluZGFtZXJlIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBza2lsbHNob3Quc2tpbGxzaG90LmNjID09ICJ0cnVlIiB0aGVuDQogICAgaWYgZm9yY2VEYXNoIG9yIGhwIDwgMC40IHRoZW4NCiAgICAgICAgZGFzaHJhbmdlID0gNjYwDQogICAgICAgIHJldHVybiB0cnVlIGVuZA0KICAgIGVsc2VpZiBpc0NhaXRseW4gYW5kIG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgYW5kIHNraWxsc2hvdC5za2lsbHNob3QuY2MgPT0gInRydWUiIHRoZW4NCiAgICBpZiBmb3JjZURhc2ggb3IgaHAgPCAwLjQgdGhlbg0KICAgICAgICBkYXNocmFuZ2UgPSA0MDANCiAgICAgICAgcmV0dXJuIHRydWUgZW5kDQogICAgZWxzZWlmIGlzVHJpc3RhbmEgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChfVykgPT0gUkVBRFkgYW5kIHNraWxsc2hvdC5za2lsbHNob3QuY2MgPT0gInRydWUiIHRoZW4NCiAgICBpZiBfaXNEYW5nZXJTa2lsbHNob3Qoc2tpbGxzaG90KSB0aGVuDQogICAgICAgIGRhc2hyYW5nZSA9IDkwMA0KICAgICAgICByZXR1cm4gdHJ1ZSBlbmQNCiAgICBlbHNlaWYgaXNTaGVuIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBza2lsbHNob3Quc2tpbGxzaG90LmNjID09ICJ0cnVlIiB0aGVuDQogICAgaWYgZm9yY2VEYXNoIG9yIGhwIDwgMC40IHRoZW4NCiAgICAgICAgZGFzaHJhbmdlID0gNjAwDQogICAgcmV0dXJuIHRydWUgZW5kDQogICAgaWYgX2lzRGFuZ2VyU2tpbGxzaG90KHNraWxsc2hvdCkgdGhlbg0KICAgICAgICBkYXNocmFuZ2UgPSA2MDANCiAgICByZXR1cm4gdHJ1ZSBlbmQNCiAgICAgICAgZW5kICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIGV2YWRlVG8oeCwgeSwgZm9yY2VEYXNoKQ0Kc3RhcnRFdmFkZSgpDQpldmFkZVBvaW50ID0gUG9pbnQyKHgsIHkpDQphbGxvd0N1c3RvbU1vdmVtZW50ID0gdHJ1ZQ0KY2FwdHVyZU1vdmVtZW50cyA9IGZhbHNlDQppZiBmb3JjZURhc2ggdGhlbg0KICAgIGxvY2FsIGV2YWRlUG9zID0gUG9pbnQyKHgsIHkpDQogICAgbG9jYWwgbXlQb3MgPSBQb2ludDIobXlIZXJvLngsIG15SGVyby56KQ0KICAgIGxvY2FsIG91cmRpc3RhbmNlID0gZXZhZGVQb3M6ZGlzdGFuY2UobXlQb3MpDQpsb2NhbCBkYXNoUG9zID0gbXlQb3MgLSAobXlQb3MgLSBldmFkZVBvcyk6bm9ybWFsaXplZCgpICogZGFzaHJhbmdlDQogICAgRGFzaFRvKGRhc2hQb3MueCwgZGFzaFBvcy55KSANCmVuZCAgICANCm15SGVybzpNb3ZlVG8oeCwgeSkNCmxhc3RNb3ZlbWVudC5tb3ZlQ29tbWFuZCA9IFBvaW50Mih4LCB5KQ0KY2FwdHVyZU1vdmVtZW50cyA9IHRydWUNCmFsbG93Q3VzdG9tTW92ZW1lbnQgPSBmYWxzZQ0KZXZhZGluZyA9IHRydWUNCmV2YWRpbmdUaWNrID0gR2V0VGlja0NvdW50KCkNCmVuZA0KDQpmdW5jdGlvbiBjb250aW51ZU1vdmVtZW50KHNraWxsc2hvdCkNCmlmIFZJUF9VU0VSIHRoZW4NCmlmIGV2YWRpbmcgdGhlbg0Kc2tpbGxzaG90LmV2YWRpbmcgPSBmYWxzZQ0KbGFzdE1vdmVtZW50LmFwcHJvYWNoZWRQb2ludCA9IG5pbA0KDQpzdG9wRXZhZGUoKQ0KDQppZiBsYXN0TW92ZW1lbnQudHlwZSA9PSAyIHRoZW4NCmNhcHR1cmVNb3ZlbWVudHMgPSBmYWxzZQ0KbXlIZXJvOk1vdmVUbyhnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpLngsIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkueSkNCmNhcHR1cmVNb3ZlbWVudHMgPSB0cnVlDQplbHNlaWYgbGFzdE1vdmVtZW50LnR5cGUgPT0gMyB0aGVuDQp0YXJnZXQgPSBnZXRUYXJnZXQobGFzdE1vdmVtZW50LnRhcmdldElkKQ0KDQppZiBfaXNWYWxpZFRhcmdldCh0YXJnZXQpIHRoZW4NCmNhcHR1cmVNb3ZlbWVudHMgPSBmYWxzZQ0KbXlIZXJvOkF0dGFjayh0YXJnZXQpDQpjYXB0dXJlTW92ZW1lbnRzID0gdHJ1ZQ0KZWxzZQ0KY2FwdHVyZU1vdmVtZW50cyA9IGZhbHNlDQpteUhlcm86TW92ZVRvKG15SGVyby54LCBteUhlcm8ueikNCmNhcHR1cmVNb3ZlbWVudHMgPSB0cnVlDQplbmQNCmVsc2VpZiBsYXN0TW92ZW1lbnQudHlwZSA9PSAxMCB0aGVuDQpteUhlcm86SG9sZFBvc2l0aW9uKCkNCmVsc2VpZiBsYXN0TW92ZW1lbnQudHlwZSA9PSA3IHRoZW4NCiAgICAgICAgICAgICAgICBsYXN0TW92ZW1lbnQudHlwZSA9IDMNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbHNlaWYgZXZhZGluZyB0aGVuDQogICAgICAgIHNraWxsc2hvdC5ldmFkaW5nID0gZmFsc2UNCiAgICAgICAgbGFzdE1vdmVtZW50LmFwcHJvYWNoZWRQb2ludCA9IG5pbA0KICAgICAgICBzdG9wRXZhZGUoKSAgICANCiAgICAgICAgaWYgY29udGludWV0YXJnZXQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgIGNhcHR1cmVNb3ZlbWVudHMgPSBmYWxzZQ0KICAgICAgICAgICAgbXlIZXJvOk1vdmVUbyhnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpLngsIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkueSkNCiAgICAgICAgICAgIGNhcHR1cmVNb3ZlbWVudHMgPSB0cnVlDQogICAgICAgIGVsc2VpZiBjb250aW51ZXRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgdGFyZ2V0ID0gY29udGludWV0YXJnZXQNCiAgICAgICAgICAgIGlmIF9pc1ZhbGlkVGFyZ2V0KHRhcmdldCkgdGhlbg0KICAgICAgICAgICAgICAgIGNhcHR1cmVNb3ZlbWVudHMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIG15SGVybzpBdHRhY2sodGFyZ2V0KQ0KICAgICAgICAgICAgICAgIGNhcHR1cmVNb3ZlbWVudHMgPSB0cnVlDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgY2FwdHVyZU1vdmVtZW50cyA9IGZhbHNlDQogICAgICAgICAgICAgICAgbXlIZXJvOk1vdmVUbyhteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICAgICAgY2FwdHVyZU1vdmVtZW50cyA9IHRydWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBkcmF3TGluZXNoaXQocG9pbnQxLCBwb2ludDIsIGNvbG9yLCB3aWR0aCkNCiAgICB4MSwgeTEsIG9uU2NyZWVuMSA9IGdldDJERnJvbTNEKHBvaW50MS54LCBteUhlcm8ueSwgcG9pbnQxLnkpDQogICAgeDIsIHkyLCBvblNjcmVlbjIgPSBnZXQyREZyb20zRChwb2ludDIueCwgbXlIZXJvLnksIHBvaW50Mi55KQ0KDQogICAgRHJhd0xpbmUoeDEsIHkxLCB4MiwgeTIsIHdpZHRoLCBjb2xvcikNCmVuZCAgIA0KZnVuY3Rpb24gT25EcmF3KCkNCiAgICBpZiBHb29kRXZhZGVDb25maWcuZHJhd0VuYWJsZWQgdGhlbg0KICAgICAgICBmb3IgaSwgZGV0ZWN0ZWRTa2lsbHNob3QgaW4gcGFpcnMoZGV0ZWN0ZWRTa2lsbHNob3RzKSBkbw0KICAgICAgICAgICAgc2tpbGxzaG90UG9zID0gc2tpbGxzaG90UG9zaXRpb24oZGV0ZWN0ZWRTa2lsbHNob3QsIEdldFRpY2tDb3VudCgpKQ0KICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3QuZHJhd2l0ID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGRldGVjdGVkU2tpbGxzaG90LnNraWxsc2hvdC50eXBlID09ICJsaW5lIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGRyYXdMaW5lc2hpdChkZXRlY3RlZFNraWxsc2hvdC5zdGFydFBvc2l0aW9uLCBkZXRlY3RlZFNraWxsc2hvdC5lbmRQb3NpdGlvbiwgMHhGRkZGMDAwMCwgMykNCiAgICAgICAgICAgICAgICBEcmF3Q2lyY2xlKHNraWxsc2hvdFBvcy54LCBteUhlcm8ueSwgc2tpbGxzaG90UG9zLnksIGRldGVjdGVkU2tpbGxzaG90LnNraWxsc2hvdC5yYWRpdXMsIDB4RkZGRkZGKQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIERyYXdDaXJjbGUoc2tpbGxzaG90UG9zLngsIG15SGVyby55LCBza2lsbHNob3RQb3MueSwgZGV0ZWN0ZWRTa2lsbHNob3Quc2tpbGxzaG90LnJhZGl1cywgMHgwMEZGMDApDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmVuZA0KDQpmdW5jdGlvbiBfaXNWYWxpZFRhcmdldCh0YXJnZXQpDQogICAgcmV0dXJuIHRhcmdldCB+PSBuaWwgYW5kIHRhcmdldC52YWxpZCBhbmQgdGFyZ2V0LmRlYWQgPT0gZmFsc2UgYW5kIHRhcmdldC5iVGFyZ2V0YWJsZSBhbmQgdGFyZ2V0LmJNYWdpY0ltdW5lYk1hZ2ljSW11bmUgfj0gdHJ1ZSBhbmQgdGFyZ2V0LmJJbnZ1bG5lcmFibGUgfj0gdHJ1ZSBhbmQgdGFyZ2V0LnZpc2libGUNCmVuZA0KDQpmdW5jdGlvbiBzdGFydEV2YWRlKCkNCiAgICBhbGxvd0N1c3RvbU1vdmVtZW50ID0gZmFsc2UNCiAgICBpZiBBdXRvQ2FycnkgDQogICAgICAgIHRoZW4gaWYgQXV0b0NhcnJ5Lk1haW5NZW51IH49IG5pbCB0aGVuDQogICAgICAgIGlmIEF1dG9DYXJyeS5DYW5BdHRhY2sgfj0gbmlsIHRoZW4NCiAgICAgX0cuQXV0b0NhcnJ5LkNhbkF0dGFjayA9IGZhbHNlDQogICAgIF9HLkF1dG9DYXJyeS5DYW5Nb3ZlID0gZmFsc2UNCiBlbmQNCiBlbHNlaWYgQXV0b0NhcnJ5LktleXMgfj0gbmlsIHRoZW4NCiAgICBpZiBBdXRvQ2FycnkuTXlIZXJvIH49IG5pbCB0aGVuDQogICAgX0cuQXV0b0NhcnJ5Lk15SGVybzpNb3ZlbWVudEVuYWJsZWQoZmFsc2UpDQogICAgX0cuQXV0b0NhcnJ5Lk15SGVybzpBdHRhY2tzRW5hYmxlZChmYWxzZSkNCmVuZA0KZW5kDQplbHNlaWYgTU1BX0xvYWRlZCB0aGVuDQogICAgX0cuTU1BX0F0dGFja0F2YWlsYWJsZSA9IGZhbHNlDQogICAgX0cuTU1BX0FibGVUb01vdmUgPSBmYWxzZQ0KZW5kDQpfRy5ldmFkZSA9IHRydWUNCmV2YWRpbmcgPSB0cnVlDQplbmQNCg0KZnVuY3Rpb24gc3RvcEV2YWRlKCkNCiAgICBhbGxvd0N1c3RvbU1vdmVtZW50ID0gdHJ1ZQ0KICAgICAgICBpZiBBdXRvQ2FycnkgdGhlbiBpZiBBdXRvQ2FycnkuTWFpbk1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgaWYgQXV0b0NhcnJ5LkNhbkF0dGFjayB+PSBuaWwgdGhlbg0KICAgICBfRy5BdXRvQ2FycnkuQ2FuQXR0YWNrID0gdHJ1ZQ0KICAgICBfRy5BdXRvQ2FycnkuQ2FuTW92ZSA9IHRydWUNCiBlbmQNCiBlbHNlaWYgQXV0b0NhcnJ5LktleXMgfj0gbmlsIHRoZW4NCiAgICBpZiBBdXRvQ2FycnkuTXlIZXJvIH49IG5pbCB0aGVuDQogICAgX0cuQXV0b0NhcnJ5Lk15SGVybzpNb3ZlbWVudEVuYWJsZWQodHJ1ZSkNCiAgICBfRy5BdXRvQ2FycnkuTXlIZXJvOkF0dGFja3NFbmFibGVkKHRydWUpDQplbmQNCmVuZA0KZWxzZWlmIE1NQV9Mb2FkZWQgdGhlbg0KICAgIF9HLk1NQV9BdHRhY2tBdmFpbGFibGUgPSB0cnVlDQogICAgX0cuTU1BX0FibGVUb01vdmUgPSB0cnVlDQplbmQNCl9HLmV2YWRlID0gZmFsc2UNCmV2YWRpbmcgPSBmYWxzZQ0KZW5kDQoNCmZ1bmN0aW9uIE9uV25kTXNnKG1zZywga2V5KQ0KICAgIGlmIG5vdCBWSVBfVVNFUiB0aGVuDQogICAgICAgIGlmIG1zZyA9PSBXTV9SQlVUVE9ORE9XTiB0aGVuDQogICAgICAgICAgaWYgZXZhZGluZyB0aGVuDQogICAgICAgICAgICBmb3IgaSwgZGV0ZWN0ZWRTa2lsbHNob3QgaW4gcGFpcnMoZGV0ZWN0ZWRTa2lsbHNob3RzKSBkbw0KICAgICAgICAgICAgICAgIGlmIGRldGVjdGVkU2tpbGxzaG90IGFuZCBkZXRlY3RlZFNraWxsc2hvdC5ldmFkaW5nIGFuZCBpbkRhbmdlcm91c0FyZWEoZGV0ZWN0ZWRTa2lsbHNob3QsIFBvaW50MihteUhlcm8ueCwgbXlIZXJvLnopKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGRvZGdlU2tpbGxzaG90KGRldGVjdGVkU2tpbGxzaG90KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBsYXN0TW92ZW1lbnQuZGVzdGluYXRpb24gPSBQb2ludDIobW91c2VQb3MueCwgbW91c2VQb3MueikNCiAgICBlbmQgDQplbmQNCmVuZA0KLS0gYmVnZ2luaW5nIG9mIGNpcmN1bGFyIHNraWxsc2hvdCBkb2RnaW5nIGZ1bmN0aW9ucyAtLQ0KZnVuY3Rpb24gbWFpbkNpcmN1bGFyc2tpbGxzaG90NShza2lsbHNob3QsIHNhZmVUYXJnZXQpDQogICAgaWYgTmVlZERhc2goc2tpbGxzaG90LCB0cnVlKSBhbmQgbm90IHNraWxsc2hvdC5hbHJlYWR5ZGFzaGVkIHRoZW4gDQogICAgICAgIGV2YWRlVG8oc2FmZVRhcmdldC54LCBzYWZlVGFyZ2V0LnksIHRydWUpDQogICAgICAgIHNraWxsc2hvdC5hbHJlYWR5ZGFzaGVkID0gdHJ1ZQ0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICBlbHNlIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KICAgIHJldHVybiBmYWxzZQ0KZW5kDQoNCiAgICBmdW5jdGlvbiBtYWluQ2lyY3VsYXJza2lsbHNob3Q0KHNraWxsc2hvdCwgaGVyb1Bvc2l0aW9uLCBtb3ZlYWJsZURpc3RhbmNlLCBldmFkZVJhZGl1cywgc2FmZVRhcmdldCkNCiAgICAgICAgaWYgTmVlZERhc2goc2tpbGxzaG90LCB0cnVlKSBhbmQgbm90IHNraWxsc2hvdC5hbHJlYWR5ZGFzaGVkIHRoZW4NCiAgICAgICAgICAgIG1vdmVhYmxlRGlzdGFuY2UgPSAobXlIZXJvLm1zICogbWF0aC5tYXgoc2tpbGxzaG90LmVuZFRpY2sgLSBHZXRUaWNrQ291bnQoKSAtIEdldExhdGVuY3koKS8yLCAwKSAvIDEwMDApICsgZGFzaHJhbmdlDQogICAgICAgICAgICBldmFkZVJhZGl1cyA9IHNraWxsc2hvdC5za2lsbHNob3QucmFkaXVzICsgaGl0Ym94U2l6ZSAvIDIgKyBHb29kRXZhZGVDb25maWcuZXZhZGVCdWZmZXIgKyBtb3ZlQnVmZmVyDQoNCiAgICAgICAgICAgIHNhZmVUYXJnZXQgPSBza2lsbHNob3QuZW5kUG9zaXRpb24gKyAoaGVyb1Bvc2l0aW9uIC0gc2tpbGxzaG90LmVuZFBvc2l0aW9uKTpub3JtYWxpemVkKCkgKiBldmFkZVJhZGl1cyANCmlmIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCk6ZGlzdGFuY2Uoc2tpbGxzaG90LmVuZFBvc2l0aW9uKSA8PSBldmFkZVJhZGl1cyB0aGVuDQogICAgICAgICAgICBjbG9zZXN0VGFyZ2V0ID0gc2tpbGxzaG90LmVuZFBvc2l0aW9uICsgKGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkgLSBza2lsbHNob3QuZW5kUG9zaXRpb24pOm5vcm1hbGl6ZWQoKSAqIGV2YWRlUmFkaXVzDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGNsb3Nlc3RUYXJnZXQgPSBuaWwNCiAgICAgICAgZW5kDQoNCiAgICAgICAgbGluZURpc3RhbmNlID0gTGluZTIoaGVyb1Bvc2l0aW9uLCBnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpKTpkaXN0YW5jZShza2lsbHNob3QuZW5kUG9zaXRpb24pDQogICAgICAgIGRpcmVjdGlvblRhcmdldCA9IGhlcm9Qb3NpdGlvbiArIChnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpIC0gaGVyb1Bvc2l0aW9uKTpub3JtYWxpemVkKCkgKiAobWF0aC5zcXJ0KGhlcm9Qb3NpdGlvbjpkaXN0YW5jZShza2lsbHNob3QuZW5kUG9zaXRpb24pXjIgLSBsaW5lRGlzdGFuY2VeMikgKyBtYXRoLnNxcnQoZXZhZGVSYWRpdXNeMiAtIGxpbmVEaXN0YW5jZV4yKSkNCiAgICAgICAgaWYgZGlyZWN0aW9uVGFyZ2V0OmRpc3RhbmNlKHNraWxsc2hvdC5lbmRQb3NpdGlvbikgPj0gZXZhZGVSYWRpdXMgKyAxIHRoZW4NCiAgICAgICAgZGlyZWN0aW9uVGFyZ2V0ID0gaGVyb1Bvc2l0aW9uICsgKGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkgLSBoZXJvUG9zaXRpb24pOm5vcm1hbGl6ZWQoKSAqIChtYXRoLnNxcnQoZXZhZGVSYWRpdXNeMiAtIGxpbmVEaXN0YW5jZV4yKSAtIG1hdGguc3FydChoZXJvUG9zaXRpb246ZGlzdGFuY2Uoc2tpbGxzaG90LmVuZFBvc2l0aW9uKV4yIC0gbGluZURpc3RhbmNlXjIpKQ0KICAgIGVuZA0KDQogICAgcG9zc2libGVNb3ZlbWVudFRhcmdldHMgPSB7fQ0KICAgIGludGVyc2VjdGlvblBvaW50cyA9IENpcmNsZTIoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBldmFkZVJhZGl1cyk6aW50ZXJzZWN0aW9uUG9pbnRzKENpcmNsZTIoaGVyb1Bvc2l0aW9uLCBtb3ZlYWJsZURpc3RhbmNlKSkNCiAgICBpZiAjaW50ZXJzZWN0aW9uUG9pbnRzID09IDIgdGhlbg0KICAgICAgICBsZWZ0VGFyZ2V0ID0gaW50ZXJzZWN0aW9uUG9pbnRzWzFdDQogICAgICAgIHJpZ2h0VGFyZ2V0ID0gaW50ZXJzZWN0aW9uUG9pbnRzWzJdDQoNCiAgICAgICAgbG9jYWwgdGhldGEgPSAoKC1za2lsbHNob3QuZW5kUG9zaXRpb24gKyBsZWZ0VGFyZ2V0KTpwb2xhcigpIC0gKC1za2lsbHNob3QuZW5kUG9zaXRpb24gKyByaWdodFRhcmdldCk6cG9sYXIoKSkgJSAzNjANCiAgICAgICAgaWYgKCh0aGV0YSA+PSAxODAgYW5kIGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBsZWZ0VGFyZ2V0LCBkaXJlY3Rpb25UYXJnZXQpID09IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBsZWZ0VGFyZ2V0LCBoZXJvUG9zaXRpb24pIGFuZCBnZXRTaWRlT2ZMaW5lKHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgcmlnaHRUYXJnZXQsIGRpcmVjdGlvblRhcmdldCkgPT0gZ2V0U2lkZU9mTGluZShza2lsbHNob3QuZW5kUG9zaXRpb24sIHJpZ2h0VGFyZ2V0LCBoZXJvUG9zaXRpb24pKSBvciAodGhldGEgPD0gMTgwIGFuZCAoZ2V0U2lkZU9mTGluZShza2lsbHNob3QuZW5kUG9zaXRpb24sIGxlZnRUYXJnZXQsIGRpcmVjdGlvblRhcmdldCkgPT0gZ2V0U2lkZU9mTGluZShza2lsbHNob3QuZW5kUG9zaXRpb24sIGxlZnRUYXJnZXQsIGhlcm9Qb3NpdGlvbikgb3IgZ2V0U2lkZU9mTGluZShza2lsbHNob3QuZW5kUG9zaXRpb24sIHJpZ2h0VGFyZ2V0LCBkaXJlY3Rpb25UYXJnZXQpID09IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCByaWdodFRhcmdldCwgaGVyb1Bvc2l0aW9uKSkpKSB0aGVuDQogICAgICAgICAgICB0YWJsZS5pbnNlcnQocG9zc2libGVNb3ZlbWVudFRhcmdldHMsIGRpcmVjdGlvblRhcmdldCkNCiAgICAgICAgZW5kDQogDQogICAgICAgIGlmIGNsb3Nlc3RUYXJnZXQgfj0gbmlsIGFuZCAoKHRoZXRhID49IDE4MCBhbmQgZ2V0U2lkZU9mTGluZShza2lsbHNob3QuZW5kUG9zaXRpb24sIGxlZnRUYXJnZXQsIGNsb3Nlc3RUYXJnZXQpID09IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBsZWZ0VGFyZ2V0LCBoZXJvUG9zaXRpb24pIGFuZCBnZXRTaWRlT2ZMaW5lKHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgcmlnaHRUYXJnZXQsIGNsb3Nlc3RUYXJnZXQpID09IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCByaWdodFRhcmdldCwgaGVyb1Bvc2l0aW9uKSkgb3IgKHRoZXRhIDw9IDE4MCBhbmQgKGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBsZWZ0VGFyZ2V0LCBjbG9zZXN0VGFyZ2V0KSA9PSBnZXRTaWRlT2ZMaW5lKHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgbGVmdFRhcmdldCwgaGVyb1Bvc2l0aW9uKSBvciBnZXRTaWRlT2ZMaW5lKHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgcmlnaHRUYXJnZXQsIGNsb3Nlc3RUYXJnZXQpID09IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCByaWdodFRhcmdldCwgaGVyb1Bvc2l0aW9uKSkpKSB0aGVuDQogICAgICAgICAgICB0YWJsZS5pbnNlcnQocG9zc2libGVNb3ZlbWVudFRhcmdldHMsIGNsb3Nlc3RUYXJnZXQpDQogICAgICAgIGVuZA0KDQoNCiAgICB0YWJsZS5pbnNlcnQocG9zc2libGVNb3ZlbWVudFRhcmdldHMsIHNhZmVUYXJnZXQpDQogICAgdGFibGUuaW5zZXJ0KHBvc3NpYmxlTW92ZW1lbnRUYXJnZXRzLCBsZWZ0VGFyZ2V0KQ0KICAgIHRhYmxlLmluc2VydChwb3NzaWJsZU1vdmVtZW50VGFyZ2V0cywgcmlnaHRUYXJnZXQpDQplbHNlDQogICAgaWYgc2tpbGxzaG90LnNraWxsc2hvdC5yYWRpdXMgPD0gbW92ZWFibGVEaXN0YW5jZSB0aGVuDQogICAgICAgIHRhYmxlLmluc2VydChwb3NzaWJsZU1vdmVtZW50VGFyZ2V0cywgY2xvc2VzdFRhcmdldCkNCiAgICAgICAgdGFibGUuaW5zZXJ0KHBvc3NpYmxlTW92ZW1lbnRUYXJnZXRzLCBkaXJlY3Rpb25UYXJnZXQpDQogICAgICAgIHRhYmxlLmluc2VydChwb3NzaWJsZU1vdmVtZW50VGFyZ2V0cywgc2FmZVRhcmdldCkNCiAgICBlbmQNCmVuZA0KDQpjbG9zZXN0UG9pbnQgPSBmaW5kQmVzdERpcmVjdGlvbihza2lsbHNob3QsIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCksIHBvc3NpYmxlTW92ZW1lbnRUYXJnZXRzKQ0KaWYgY2xvc2VzdFBvaW50IH49IG5pbCB0aGVuDQogICAgY2xvc2VzdFBvaW50ID0gY2xvc2VzdFBvaW50ICsgKGNsb3Nlc3RQb2ludCAtIGhlcm9Qb3NpdGlvbik6bm9ybWFsaXplZCgpICogc21vb3RoaW5nDQogICAgZXZhZGVUbyhjbG9zZXN0UG9pbnQueCwgY2xvc2VzdFBvaW50LnksIHRydWUpDQogICAgc2tpbGxzaG90LmFscmVhZHlkYXNoZWQgPSB0cnVlDQogICAgcmV0dXJuIHRydWUNCiAgICBlbHNlIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KICAgIGVsc2UgcmV0dXJuIGZhbHNlDQogICAgZW5kDQogICAgcmV0dXJuIGZhbHNlDQplbmQNCg0KZnVuY3Rpb24gbWFpbkNpcmN1bGFyc2tpbGxzaG90Myhza2lsbHNob3QsIGhlcm9Qb3NpdGlvbikNCiAgICBpZiBnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpOmRpc3RhbmNlKGhlcm9Qb3NpdGlvbikgPiAyMCBhbmQgTmVlZERhc2goc2tpbGxzaG90LCB0cnVlKSBhbmQgbm90IHNraWxsc2hvdC5hbHJlYWR5ZGFzaGVkIHRoZW4NCiAgICAgICAgZGFzaHBvcyA9IGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkgKyAoZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKSAtIGhlcm9Qb3NpdGlvbik6bm9ybWFsaXplZCgpICogZGFzaHJhbmdlDQogICAgICAgIGlmIGRhc2hwb3M6ZGlzdGFuY2Uoc2tpbGxzaG90LmVuZFBvc2l0aW9uKSA+IHNraWxsc2hvdC5za2lsbHNob3QucmFkaXVzIGFuZCBub3QgSW5zaWRlVGhlV2FsbChkYXNocG9zKSB0aGVuDQogICAgICAgIGV2YWRlVG8oZGFzaHBvcy54LCBkYXNocG9zLnksIHRydWUpDQogICAgICAgIHNraWxsc2hvdC5hbHJlYWR5ZGFzaGVkID0gdHJ1ZQ0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICBlbHNlIHJldHVybiBmYWxzZQ0KICAgICAgICBlbmQNCiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2UNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiBmYWxzZQ0KZW5kDQoNCmZ1bmN0aW9uIG1haW5DaXJjdWxhcnNraWxsc2hvdDIoc2tpbGxzaG90KQ0KICAgICAgICBpZiBoYXZlU2hpZWxkKCkgdGhlbiANCiAgICAgICAgICAgIGZvciBpLCBkZXRlY3RlZFNraWxsc2hvdCBpbiBpcGFpcnMoZGV0ZWN0ZWRTa2lsbHNob3RzKSBkbw0KICAgICAgICAgICAgICAgIGlmIGRldGVjdGVkU2tpbGxzaG90LnNraWxsc2hvdC5uYW1lID09IHNraWxsc2hvdC5za2lsbHNob3QubmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZShkZXRlY3RlZFNraWxsc2hvdHMsIGkpDQogICAgICAgICAgICAgICAgICAgIGkgPSBpLTENCiAgICAgICAgICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3QuZXZhZGluZyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZU1vdmVtZW50KGRldGVjdGVkU2tpbGxzaG90KQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgc2tpbGxzaG90LnNraWxsc2hvdC5zaGllbGRub3cgPT0gInRydWUiIHRoZW4gDQogICAgICAgICAgICAgICAgaWYgaXNTaXZpciB0aGVuDQogICAgICAgICAgICAgICAgICAgIENhc3RTcGVsbChfRSkNCiAgICAgICAgICAgICAgICBlbHNlaWYgaXNOb2N0dXJuZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIENhc3RTcGVsbChfVykNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICAgICAgZWxzZWlmIHNraWxsc2hvdC5za2lsbHNob3Quc2hpZWxkbm93ID09ICJmYWxzZSIgdGhlbg0KICAgICAgICAgICAgICAgIHNoaWVsZHRpY2sgPSBza2lsbHNob3QuZW5kVGljayAtIDUwIC0gR2V0TGF0ZW5jeSgpDQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2UNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIGVuZA0KDQpmdW5jdGlvbiBtYWluQ2lyY3VsYXJza2lsbHNob3QxKHNraWxsc2hvdCwgaGVyb1Bvc2l0aW9uLCBtb3ZlYWJsZURpc3RhbmNlLCBldmFkZVJhZGl1cywgc2FmZVRhcmdldCkNCiAgICAgICAgICAgICAgIGlmIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCk6ZGlzdGFuY2Uoc2tpbGxzaG90LmVuZFBvc2l0aW9uKSA8PSBldmFkZVJhZGl1cyB0aGVuDQogICAgICAgICAgICBjbG9zZXN0VGFyZ2V0ID0gc2tpbGxzaG90LmVuZFBvc2l0aW9uICsgKGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkgLSBza2lsbHNob3QuZW5kUG9zaXRpb24pOm5vcm1hbGl6ZWQoKSAqIGV2YWRlUmFkaXVzDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGNsb3Nlc3RUYXJnZXQgPSBuaWwNCiAgICAgICAgZW5kDQoNCiAgICAgICAgbGluZURpc3RhbmNlID0gTGluZTIoaGVyb1Bvc2l0aW9uLCBnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpKTpkaXN0YW5jZShza2lsbHNob3QuZW5kUG9zaXRpb24pDQogICAgICAgIGRpcmVjdGlvblRhcmdldCA9IGhlcm9Qb3NpdGlvbiArIChnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpIC0gaGVyb1Bvc2l0aW9uKTpub3JtYWxpemVkKCkgKiAobWF0aC5zcXJ0KGhlcm9Qb3NpdGlvbjpkaXN0YW5jZShza2lsbHNob3QuZW5kUG9zaXRpb24pXjIgLSBsaW5lRGlzdGFuY2VeMikgKyBtYXRoLnNxcnQoZXZhZGVSYWRpdXNeMiAtIGxpbmVEaXN0YW5jZV4yKSkNCiAgICAgICAgaWYgZGlyZWN0aW9uVGFyZ2V0OmRpc3RhbmNlKHNraWxsc2hvdC5lbmRQb3NpdGlvbikgPj0gZXZhZGVSYWRpdXMgKyAxIHRoZW4NCiAgICAgICAgZGlyZWN0aW9uVGFyZ2V0ID0gaGVyb1Bvc2l0aW9uICsgKGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkgLSBoZXJvUG9zaXRpb24pOm5vcm1hbGl6ZWQoKSAqIChtYXRoLnNxcnQoZXZhZGVSYWRpdXNeMiAtIGxpbmVEaXN0YW5jZV4yKSAtIG1hdGguc3FydChoZXJvUG9zaXRpb246ZGlzdGFuY2Uoc2tpbGxzaG90LmVuZFBvc2l0aW9uKV4yIC0gbGluZURpc3RhbmNlXjIpKQ0KICAgIGVuZA0KDQogICAgcG9zc2libGVNb3ZlbWVudFRhcmdldHMgPSB7fQ0KICAgIGludGVyc2VjdGlvblBvaW50cyA9IENpcmNsZTIoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBldmFkZVJhZGl1cyk6aW50ZXJzZWN0aW9uUG9pbnRzKENpcmNsZTIoaGVyb1Bvc2l0aW9uLCBtb3ZlYWJsZURpc3RhbmNlKSkNCiAgICBpZiAjaW50ZXJzZWN0aW9uUG9pbnRzID09IDIgdGhlbg0KICAgICAgICBsZWZ0VGFyZ2V0ID0gaW50ZXJzZWN0aW9uUG9pbnRzWzFdDQogICAgICAgIHJpZ2h0VGFyZ2V0ID0gaW50ZXJzZWN0aW9uUG9pbnRzWzJdDQoNCiAgICAgICAgbG9jYWwgdGhldGEgPSAoKC1za2lsbHNob3QuZW5kUG9zaXRpb24gKyBsZWZ0VGFyZ2V0KTpwb2xhcigpIC0gKC1za2lsbHNob3QuZW5kUG9zaXRpb24gKyByaWdodFRhcmdldCk6cG9sYXIoKSkgJSAzNjANCiAgICAgICAgaWYgKCh0aGV0YSA+PSAxODAgYW5kIGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBsZWZ0VGFyZ2V0LCBkaXJlY3Rpb25UYXJnZXQpID09IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBsZWZ0VGFyZ2V0LCBoZXJvUG9zaXRpb24pIGFuZCBnZXRTaWRlT2ZMaW5lKHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgcmlnaHRUYXJnZXQsIGRpcmVjdGlvblRhcmdldCkgPT0gZ2V0U2lkZU9mTGluZShza2lsbHNob3QuZW5kUG9zaXRpb24sIHJpZ2h0VGFyZ2V0LCBoZXJvUG9zaXRpb24pKSBvciAodGhldGEgPD0gMTgwIGFuZCAoZ2V0U2lkZU9mTGluZShza2lsbHNob3QuZW5kUG9zaXRpb24sIGxlZnRUYXJnZXQsIGRpcmVjdGlvblRhcmdldCkgPT0gZ2V0U2lkZU9mTGluZShza2lsbHNob3QuZW5kUG9zaXRpb24sIGxlZnRUYXJnZXQsIGhlcm9Qb3NpdGlvbikgb3IgZ2V0U2lkZU9mTGluZShza2lsbHNob3QuZW5kUG9zaXRpb24sIHJpZ2h0VGFyZ2V0LCBkaXJlY3Rpb25UYXJnZXQpID09IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCByaWdodFRhcmdldCwgaGVyb1Bvc2l0aW9uKSkpKSB0aGVuDQogICAgICAgICAgICB0YWJsZS5pbnNlcnQocG9zc2libGVNb3ZlbWVudFRhcmdldHMsIGRpcmVjdGlvblRhcmdldCkNCiAgICAgICAgZW5kDQogDQogICAgICAgIGlmIGNsb3Nlc3RUYXJnZXQgfj0gbmlsIGFuZCAoKHRoZXRhID49IDE4MCBhbmQgZ2V0U2lkZU9mTGluZShza2lsbHNob3QuZW5kUG9zaXRpb24sIGxlZnRUYXJnZXQsIGNsb3Nlc3RUYXJnZXQpID09IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBsZWZ0VGFyZ2V0LCBoZXJvUG9zaXRpb24pIGFuZCBnZXRTaWRlT2ZMaW5lKHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgcmlnaHRUYXJnZXQsIGNsb3Nlc3RUYXJnZXQpID09IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCByaWdodFRhcmdldCwgaGVyb1Bvc2l0aW9uKSkgb3IgKHRoZXRhIDw9IDE4MCBhbmQgKGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBsZWZ0VGFyZ2V0LCBjbG9zZXN0VGFyZ2V0KSA9PSBnZXRTaWRlT2ZMaW5lKHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgbGVmdFRhcmdldCwgaGVyb1Bvc2l0aW9uKSBvciBnZXRTaWRlT2ZMaW5lKHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgcmlnaHRUYXJnZXQsIGNsb3Nlc3RUYXJnZXQpID09IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LmVuZFBvc2l0aW9uLCByaWdodFRhcmdldCwgaGVyb1Bvc2l0aW9uKSkpKSB0aGVuDQogICAgICAgICAgICB0YWJsZS5pbnNlcnQocG9zc2libGVNb3ZlbWVudFRhcmdldHMsIGNsb3Nlc3RUYXJnZXQpDQogICAgICAgIGVuZA0KDQoNCiAgICB0YWJsZS5pbnNlcnQocG9zc2libGVNb3ZlbWVudFRhcmdldHMsIHNhZmVUYXJnZXQpDQogICAgdGFibGUuaW5zZXJ0KHBvc3NpYmxlTW92ZW1lbnRUYXJnZXRzLCBsZWZ0VGFyZ2V0KQ0KICAgIHRhYmxlLmluc2VydChwb3NzaWJsZU1vdmVtZW50VGFyZ2V0cywgcmlnaHRUYXJnZXQpDQplbHNlDQogICAgaWYgc2tpbGxzaG90LnNraWxsc2hvdC5yYWRpdXMgPD0gbW92ZWFibGVEaXN0YW5jZSB0aGVuDQogICAgICAgIHRhYmxlLmluc2VydChwb3NzaWJsZU1vdmVtZW50VGFyZ2V0cywgY2xvc2VzdFRhcmdldCkNCiAgICAgICAgdGFibGUuaW5zZXJ0KHBvc3NpYmxlTW92ZW1lbnRUYXJnZXRzLCBkaXJlY3Rpb25UYXJnZXQpDQogICAgICAgIHRhYmxlLmluc2VydChwb3NzaWJsZU1vdmVtZW50VGFyZ2V0cywgc2FmZVRhcmdldCkNCiAgICBlbmQNCmVuZA0KDQpjbG9zZXN0UG9pbnQgPSBmaW5kQmVzdERpcmVjdGlvbihza2lsbHNob3QsIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCksIHBvc3NpYmxlTW92ZW1lbnRUYXJnZXRzKQ0KaWYgY2xvc2VzdFBvaW50IH49IG5pbCB0aGVuDQogICAgY2xvc2VzdFBvaW50ID0gY2xvc2VzdFBvaW50ICsgKGNsb3Nlc3RQb2ludCAtIGhlcm9Qb3NpdGlvbik6bm9ybWFsaXplZCgpICogc21vb3RoaW5nDQogICAgZXZhZGVUbyhjbG9zZXN0UG9pbnQueCwgY2xvc2VzdFBvaW50LnkpDQogICAgcmV0dXJuIHRydWUNCiAgICBlbHNlIHJldHVybiBmYWxzZQ0KZW5kDQpyZXR1cm4gZmFsc2UNCmVuZA0KDQpmdW5jdGlvbiBBTTEoc2tpbGxzaG90KSAgICAgICAgIA0KICAgIGlmIGhhdmVTaGllbGQoKSB0aGVuDQogICAgICAgIGZvciBpLCBkZXRlY3RlZFNraWxsc2hvdCBpbiBpcGFpcnMoZGV0ZWN0ZWRTa2lsbHNob3RzKSBkbw0KICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3Quc2tpbGxzaG90Lm5hbWUgPT0gc2tpbGxzaG90LnNraWxsc2hvdC5uYW1lIHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUoZGV0ZWN0ZWRTa2lsbHNob3RzLCBpKQ0KICAgICAgICAgICAgICAgIGkgPSBpLTENCiAgICAgICAgICAgICAgICBpZiBkZXRlY3RlZFNraWxsc2hvdC5ldmFkaW5nIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgY29udGludWVNb3ZlbWVudChkZXRlY3RlZFNraWxsc2hvdCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgaXNTaXZpciB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoX0UpDQogICAgICAgIGVsc2VpZiBpc05vY3R1cm5lIHRoZW4NCiAgICAgICAgICAgIENhc3RTcGVsbChfVykNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQNCg0KZnVuY3Rpb24gQU0yKHNraWxsc2hvdCwgaGVyb1Bvc2l0aW9uKQ0KICAgIGlmIGZsYXNocmVhZHkgYW5kIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCk6ZGlzdGFuY2UoaGVyb1Bvc2l0aW9uKSA+IDIwIGFuZCBub3Qgc2tpbGxzaG90LmFscmVhZHlkYXNoZWQgdGhlbg0KICAgICAgICBkYXNocG9zID0gZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKSArIChnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpIC0gaGVyb1Bvc2l0aW9uKTpub3JtYWxpemVkKCkgKiA0MDANCiAgICAgICAgaWYgZGFzaHBvczpkaXN0YW5jZShza2lsbHNob3QuZW5kUG9zaXRpb24pID4gc2tpbGxzaG90LnNraWxsc2hvdC5yYWRpdXMgYW5kIG5vdCBJbnNpZGVUaGVXYWxsKGRhc2hwb3MpIHRoZW4NCiAgICAgICAgRmxhc2hUbyhkYXNocG9zLngsIGRhc2hwb3MueSkNCiAgICAgICAgc2tpbGxzaG90LmFscmVhZHlkYXNoZWQgPSB0cnVlDQogICAgICAgIGZvciBpLCBkZXRlY3RlZFNraWxsc2hvdCBpbiBpcGFpcnMoZGV0ZWN0ZWRTa2lsbHNob3RzKSBkbw0KICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3Quc2tpbGxzaG90Lm5hbWUgPT0gc2tpbGxzaG90LnNraWxsc2hvdC5uYW1lIHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUoZGV0ZWN0ZWRTa2lsbHNob3RzLCBpKQ0KICAgICAgICAgICAgICAgIGkgPSBpLTENCiAgICAgICAgICAgICAgICBpZiBkZXRlY3RlZFNraWxsc2hvdC5ldmFkaW5nIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgY29udGludWVNb3ZlbWVudChkZXRlY3RlZFNraWxsc2hvdCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2UNCiAgICAgICAgZW5kDQogICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gZmFsc2UNCmVuZA0KDQpmdW5jdGlvbiBBTTMoc2tpbGxzaG90LCBzYWZlVGFyZ2V0KQ0KICAgIGlmIGZsYXNocmVhZHkgYW5kIG5vdCBza2lsbHNob3QuYWxyZWFkeWRhc2hlZCB0aGVuDQogICAgICAgIEZsYXNoVG8oc2FmZVRhcmdldC54LCBzYWZlVGFyZ2V0LnkpDQogICAgICAgIHNraWxsc2hvdC5hbHJlYWR5ZGFzaGVkID0gdHJ1ZQ0KICAgICAgICBmb3IgaSwgZGV0ZWN0ZWRTa2lsbHNob3QgaW4gaXBhaXJzKGRldGVjdGVkU2tpbGxzaG90cykgZG8NCiAgICAgICAgICAgIGlmIGRldGVjdGVkU2tpbGxzaG90LnNraWxsc2hvdC5uYW1lID09IHNraWxsc2hvdC5za2lsbHNob3QubmFtZSB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKGRldGVjdGVkU2tpbGxzaG90cywgaSkNCiAgICAgICAgICAgICAgICBpID0gaS0xDQogICAgICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3QuZXZhZGluZyB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlTW92ZW1lbnQoZGV0ZWN0ZWRTa2lsbHNob3QpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gZmFsc2UNCmVuZA0KIC0tIGVuZCBvZiBjaXJjdWxhciBza2lsbHNob3QgZG9kZ2luZyBmdW5jdGlvbnMgLS0NCiAtLSBiZWdnaW5pbmcgb2YgbGluZSBza2lsbHNob3QgZG9kZ2luZyBmdW5jdGlvbnMgLS0NCmZ1bmN0aW9uIGxpbmVTa2lsbHNob3QxKHNraWxsc2hvdCwgaGVyb1Bvc2l0aW9uLCBza2lsbHNob3RMaW5lLCBkaXN0YW5jZUZyb21Ta2lsbHNob3RQYXRoLCBldmFkZURpc3RhbmNlLCBub3JtYWxWZWN0b3IsIG5lc3NlY2FyeU1vdmVXaWR0aCwgZXZhZGVUbzEsIGV2YWRlVG8yKQ0KICAgIGlmIHNraWxsc2hvdExpbmU6ZGlzdGFuY2UoZXZhZGVUbzEpID49IHNraWxsc2hvdExpbmU6ZGlzdGFuY2UoZXZhZGVUbzIpIHRoZW4NCiAgICAgICAgbG9uZ2l0dWRpbmFsQXBwcm9hY2hMZW5ndGggPSBjYWxjdWxhdGVMb25naXR1ZGluYWxBcHByb2FjaExlbmd0aChza2lsbHNob3QsIG5lc3NlY2FyeU1vdmVXaWR0aCkNCiAgICAgICAgaWYgbG9uZ2l0dWRpbmFsQXBwcm9hY2hMZW5ndGggPj0gMCB0aGVuDQogICAgICAgICAgICBldmFkZVRvVGFyZ2V0MSA9IGV2YWRlVG8xIC0gc2tpbGxzaG90LmRpcmVjdGlvblZlY3RvciAqIGxvbmdpdHVkaW5hbEFwcHJvYWNoTGVuZ3RoDQogICAgICAgIGVuZA0KDQogICAgICAgIGxvbmdpdHVkaW5hbEFwcHJvYWNoTGVuZ3RoID0gY2FsY3VsYXRlTG9uZ2l0dWRpbmFsQXBwcm9hY2hMZW5ndGgoc2tpbGxzaG90LCBldmFkZURpc3RhbmNlICsgZGlzdGFuY2VGcm9tU2tpbGxzaG90UGF0aCkNCiAgICAgICAgaWYgbG9uZ2l0dWRpbmFsQXBwcm9hY2hMZW5ndGggPj0gMCB0aGVuDQogICAgICAgICAgICBldmFkZVRvVGFyZ2V0MiA9IGhlcm9Qb3NpdGlvbiAtIG5vcm1hbFZlY3RvciAqIChldmFkZURpc3RhbmNlICsgZGlzdGFuY2VGcm9tU2tpbGxzaG90UGF0aCkgLSBza2lsbHNob3QuZGlyZWN0aW9uVmVjdG9yICogbG9uZ2l0dWRpbmFsQXBwcm9hY2hMZW5ndGgNCiAgICAgICAgZW5kDQoNCiAgICAgICAgbG9uZ2l0dWRpbmFsUmV0cmVhdExlbmd0aCA9IGNhbGN1bGF0ZUxvbmdpdHVkaW5hbFJldHJlYXRMZW5ndGgoc2tpbGxzaG90LCBuZXNzZWNhcnlNb3ZlV2lkdGgpDQogICAgICAgIGlmIGxvbmdpdHVkaW5hbFJldHJlYXRMZW5ndGggPj0gMCB0aGVuDQogICAgICAgICAgICBldmFkZVRvVGFyZ2V0MyA9IGV2YWRlVG8xICsgc2tpbGxzaG90LmRpcmVjdGlvblZlY3RvciAqIGxvbmdpdHVkaW5hbFJldHJlYXRMZW5ndGgNCiAgICAgICAgZW5kDQoNCiAgICAgICAgbG9uZ2l0dWRpbmFsUmV0cmVhdExlbmd0aCA9IGNhbGN1bGF0ZUxvbmdpdHVkaW5hbFJldHJlYXRMZW5ndGgoc2tpbGxzaG90LCBldmFkZURpc3RhbmNlICsgZGlzdGFuY2VGcm9tU2tpbGxzaG90UGF0aCkNCiAgICAgICAgaWYgbG9uZ2l0dWRpbmFsUmV0cmVhdExlbmd0aCA+PSAwIHRoZW4NCiAgICAgICAgICAgIGV2YWRlVG9UYXJnZXQ0ID0gaGVyb1Bvc2l0aW9uIC0gbm9ybWFsVmVjdG9yICogKGV2YWRlRGlzdGFuY2UgKyBkaXN0YW5jZUZyb21Ta2lsbHNob3RQYXRoKSArIHNraWxsc2hvdC5kaXJlY3Rpb25WZWN0b3IgKiBsb25naXR1ZGluYWxSZXRyZWF0TGVuZ3RoDQogICAgICAgIGVuZA0KDQogICAgICAgIHNhZmVUYXJnZXQgPSBldmFkZVRvMQ0KDQogICAgICAgIGNsb3Nlc3RQb2ludCA9IGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkgKyBub3JtYWxWZWN0b3IgKiAoZXZhZGVEaXN0YW5jZSAtIHNraWxsc2hvdExpbmU6ZGlzdGFuY2UoZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKSkpDQogICAgICAgIGNsb3Nlc3RQb2ludDIgPSBnZXRQZXJwZW5kaWN1bGFyRm9vdHBvaW50KHNraWxsc2hvdC5zdGFydFBvc2l0aW9uLCBza2lsbHNob3QuZW5kUG9zaXRpb24sIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkpICsgbm9ybWFsVmVjdG9yICogZXZhZGVEaXN0YW5jZQ0KICAgIGVsc2UNCiAgICAgICAgbG9uZ2l0dWRpbmFsQXBwcm9hY2hMZW5ndGggPSBjYWxjdWxhdGVMb25naXR1ZGluYWxBcHByb2FjaExlbmd0aChza2lsbHNob3QsIG5lc3NlY2FyeU1vdmVXaWR0aCkNCiAgICAgICAgaWYgbG9uZ2l0dWRpbmFsQXBwcm9hY2hMZW5ndGggPj0gMCB0aGVuDQogICAgICAgICAgICBldmFkZVRvVGFyZ2V0MSA9IGV2YWRlVG8yIC0gc2tpbGxzaG90LmRpcmVjdGlvblZlY3RvciAqIGxvbmdpdHVkaW5hbEFwcHJvYWNoTGVuZ3RoDQogICAgICAgIGVuZA0KDQogICAgICAgIGxvbmdpdHVkaW5hbEFwcHJvYWNoTGVuZ3RoID0gY2FsY3VsYXRlTG9uZ2l0dWRpbmFsQXBwcm9hY2hMZW5ndGgoc2tpbGxzaG90LCBldmFkZURpc3RhbmNlICsgZGlzdGFuY2VGcm9tU2tpbGxzaG90UGF0aCkNCiAgICAgICAgaWYgbG9uZ2l0dWRpbmFsQXBwcm9hY2hMZW5ndGggPj0gMCB0aGVuDQogICAgICAgICAgICBldmFkZVRvVGFyZ2V0MiA9IGhlcm9Qb3NpdGlvbiArIG5vcm1hbFZlY3RvciAqIChldmFkZURpc3RhbmNlICsgZGlzdGFuY2VGcm9tU2tpbGxzaG90UGF0aCkgLSBza2lsbHNob3QuZGlyZWN0aW9uVmVjdG9yICogbG9uZ2l0dWRpbmFsQXBwcm9hY2hMZW5ndGgNCiAgICAgICAgZW5kDQoNCiAgICAgICAgbG9uZ2l0dWRpbmFsUmV0cmVhdExlbmd0aCA9IGNhbGN1bGF0ZUxvbmdpdHVkaW5hbFJldHJlYXRMZW5ndGgoc2tpbGxzaG90LCBuZXNzZWNhcnlNb3ZlV2lkdGgpDQogICAgICAgIGlmIGxvbmdpdHVkaW5hbFJldHJlYXRMZW5ndGggPj0gMCB0aGVuDQogICAgICAgICAgICBldmFkZVRvVGFyZ2V0MyA9IGV2YWRlVG8yICsgc2tpbGxzaG90LmRpcmVjdGlvblZlY3RvciAqIGxvbmdpdHVkaW5hbFJldHJlYXRMZW5ndGgNCiAgICAgICAgZW5kDQoNCiAgICAgICAgbG9uZ2l0dWRpbmFsUmV0cmVhdExlbmd0aCA9IGNhbGN1bGF0ZUxvbmdpdHVkaW5hbFJldHJlYXRMZW5ndGgoc2tpbGxzaG90LCBldmFkZURpc3RhbmNlICsgZGlzdGFuY2VGcm9tU2tpbGxzaG90UGF0aCkNCiAgICAgICAgaWYgbG9uZ2l0dWRpbmFsUmV0cmVhdExlbmd0aCA+PSAwIHRoZW4NCiAgICAgICAgICAgIGV2YWRlVG9UYXJnZXQ0ID0gaGVyb1Bvc2l0aW9uICsgbm9ybWFsVmVjdG9yICogKGV2YWRlRGlzdGFuY2UgKyBkaXN0YW5jZUZyb21Ta2lsbHNob3RQYXRoKSArIHNraWxsc2hvdC5kaXJlY3Rpb25WZWN0b3IgKiBsb25naXR1ZGluYWxSZXRyZWF0TGVuZ3RoDQogICAgICAgIGVuZA0KDQogICAgICAgIHNhZmVUYXJnZXQgPSBldmFkZVRvMg0KDQogICAgICAgIGNsb3Nlc3RQb2ludCA9IGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkgLSBub3JtYWxWZWN0b3IgKiAoZXZhZGVEaXN0YW5jZSAtIHNraWxsc2hvdExpbmU6ZGlzdGFuY2UoZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKSkpDQogICAgICAgIGNsb3Nlc3RQb2ludDIgPSBnZXRQZXJwZW5kaWN1bGFyRm9vdHBvaW50KHNraWxsc2hvdC5zdGFydFBvc2l0aW9uLCBza2lsbHNob3QuZW5kUG9zaXRpb24sIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkpIC0gbm9ybWFsVmVjdG9yICogZXZhZGVEaXN0YW5jZQ0KICAgIGVuZA0KDQogICAgaWYgc2tpbGxzaG90TGluZTpkaXN0YW5jZShnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpKSA8PSBldmFkZURpc3RhbmNlIHRoZW4NCiAgICAgICAgZGlyZWN0aW9uVGFyZ2V0ID0gZmluZEJlc3REaXJlY3Rpb24oc2tpbGxzaG90LGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCksIHtjbG9zZXN0UG9pbnQsIGNsb3Nlc3RQb2ludDIsIGdldFBlcnBlbmRpY3VsYXJGb290cG9pbnQoc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKSkgLSBub3JtYWxWZWN0b3IgKiBldmFkZURpc3RhbmNlLCBnZXRQZXJwZW5kaWN1bGFyRm9vdHBvaW50KHNraWxsc2hvdC5zdGFydFBvc2l0aW9uLCBza2lsbHNob3QuZW5kUG9zaXRpb24sIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkpICsgbm9ybWFsVmVjdG9yICogZXZhZGVEaXN0YW5jZX0pDQogICAgZWxzZQ0KICAgICAgICBpZiBnZXRTaWRlT2ZMaW5lKHNraWxsc2hvdC5zdGFydFBvc2l0aW9uLCBza2lsbHNob3QuZW5kUG9zaXRpb24sIGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkpID09IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgaGVyb1Bvc2l0aW9uKSB0aGVuDQogICAgICAgIGlmIHNraWxsc2hvdExpbmU6ZGlzdGFuY2UoaGVyb1Bvc2l0aW9uKSA8PSBza2lsbHNob3RMaW5lOmRpc3RhbmNlKGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkpIHRoZW4NCiAgICAgICAgICAgIGRpcmVjdGlvblRhcmdldCA9IGhlcm9Qb3NpdGlvbiArIChnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpLWhlcm9Qb3NpdGlvbik6bm9ybWFsaXplZCgpICogKChldmFkZURpc3RhbmNlIC0gZGlzdGFuY2VGcm9tU2tpbGxzaG90UGF0aCkgKiBoZXJvUG9zaXRpb246ZGlzdGFuY2UoZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKSkpIC8gKHNraWxsc2hvdExpbmU6ZGlzdGFuY2UoZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKSkgLSBkaXN0YW5jZUZyb21Ta2lsbHNob3RQYXRoKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBkaXJlY3Rpb25UYXJnZXQgPSBoZXJvUG9zaXRpb24gKyAoZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKS1oZXJvUG9zaXRpb24pOm5vcm1hbGl6ZWQoKSAqICgoZXZhZGVEaXN0YW5jZSArIGRpc3RhbmNlRnJvbVNraWxsc2hvdFBhdGgpICogaGVyb1Bvc2l0aW9uOmRpc3RhbmNlKGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkpKSAvIChkaXN0YW5jZUZyb21Ta2lsbHNob3RQYXRoIC0gc2tpbGxzaG90TGluZTpkaXN0YW5jZShnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpKSkNCiAgICAgICAgZW5kDQogICAgZWxzZQ0KICAgICAgICBkaXJlY3Rpb25UYXJnZXQgPSBoZXJvUG9zaXRpb24gKyAoZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKSAtIGhlcm9Qb3NpdGlvbik6bm9ybWFsaXplZCgpICogKGV2YWRlRGlzdGFuY2UgKyBkaXN0YW5jZUZyb21Ta2lsbHNob3RQYXRoKSAqIGhlcm9Qb3NpdGlvbjpkaXN0YW5jZShnZXRMYXN0TW92ZW1lbnREZXN0aW5hdGlvbigpKSAvIChza2lsbHNob3RMaW5lOmRpc3RhbmNlKGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkpICsgZGlzdGFuY2VGcm9tU2tpbGxzaG90UGF0aCkNCiAgICBlbmQNCmVuZA0KDQpldmFkZVRhcmdldCA9IG5pbA0KaWYgKGV2YWRlVG9UYXJnZXQxIH49IG5pbCBhbmQgZXZhZGVUb1RhcmdldDMgfj0gbmlsIGFuZCBMaW5lMihldmFkZVRvVGFyZ2V0MSwgZXZhZGVUb1RhcmdldDMpOmRpc3RhbmNlKGRpcmVjdGlvblRhcmdldCkgPD0gMSBhbmQgZ2V0U2lkZU9mTGluZShldmFkZVRvVGFyZ2V0MSwgZ2V0UGVycGVuZGljdWxhckZvb3Rwb2ludChza2lsbHNob3Quc3RhcnRQb3NpdGlvbiwgc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBldmFkZVRvVGFyZ2V0MSksIGRpcmVjdGlvblRhcmdldCkgfj0gZ2V0U2lkZU9mTGluZShldmFkZVRvVGFyZ2V0MywgZ2V0UGVycGVuZGljdWxhckZvb3Rwb2ludChza2lsbHNob3Quc3RhcnRQb3NpdGlvbiwgc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBldmFkZVRvVGFyZ2V0MyksIGRpcmVjdGlvblRhcmdldCkpIG9yIChldmFkZVRvVGFyZ2V0MiB+PSBuaWwgYW5kIGV2YWRlVG9UYXJnZXQ0IH49IG5pbCBhbmQgTGluZTIoZXZhZGVUb1RhcmdldDIsIGV2YWRlVG9UYXJnZXQ0KTpkaXN0YW5jZShkaXJlY3Rpb25UYXJnZXQpIDw9IDEgYW5kIGdldFNpZGVPZkxpbmUoZXZhZGVUb1RhcmdldDIsIGdldFBlcnBlbmRpY3VsYXJGb290cG9pbnQoc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgZXZhZGVUb1RhcmdldDIpLCBkaXJlY3Rpb25UYXJnZXQpIH49IGdldFNpZGVPZkxpbmUoZXZhZGVUb1RhcmdldDQsIGdldFBlcnBlbmRpY3VsYXJGb290cG9pbnQoc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgZXZhZGVUb1RhcmdldDQpLCBkaXJlY3Rpb25UYXJnZXQpKSBvciAoZXZhZGVUb1RhcmdldDEgfj0gbmlsIGFuZCBldmFkZVRvVGFyZ2V0MyA9PSBuaWwgYW5kIGdldFNpZGVPZkxpbmUoaGVyb1Bvc2l0aW9uLCBldmFkZVRvVGFyZ2V0MSwgc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24pIH49IGdldFNpZGVPZkxpbmUoaGVyb1Bvc2l0aW9uLCBldmFkZVRvVGFyZ2V0MSwgZGlyZWN0aW9uVGFyZ2V0KSkgb3IgKGV2YWRlVG9UYXJnZXQyIH49IG5pbCBhbmQgZXZhZGVUb1RhcmdldDQgPT0gbmlsIGFuZCBnZXRTaWRlT2ZMaW5lKGhlcm9Qb3NpdGlvbiwgZXZhZGVUb1RhcmdldDIsIHNraWxsc2hvdC5zdGFydFBvc2l0aW9uKSB+PSBnZXRTaWRlT2ZMaW5lKGhlcm9Qb3NpdGlvbiwgZXZhZGVUb1RhcmdldDIsIGRpcmVjdGlvblRhcmdldCkpIHRoZW4NCmV2YWRlVGFyZ2V0ID0gZGlyZWN0aW9uVGFyZ2V0DQplbHNlDQogICAgcG9zc2libGVNb3ZlbWVudFRhcmdldHMgPSB7fQ0KDQogICAgaWYgKGV2YWRlVG9UYXJnZXQxIH49IG5pbCBhbmQgZXZhZGVUb1RhcmdldDMgfj0gbmlsIGFuZCBMaW5lMihldmFkZVRvVGFyZ2V0MSwgZXZhZGVUb1RhcmdldDMpOmRpc3RhbmNlKGNsb3Nlc3RQb2ludDIpIDw9IDEgYW5kIGdldFNpZGVPZkxpbmUoZXZhZGVUb1RhcmdldDEsIGdldFBlcnBlbmRpY3VsYXJGb290cG9pbnQoc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgZXZhZGVUb1RhcmdldDEpLCBjbG9zZXN0UG9pbnQyKSB+PSBnZXRTaWRlT2ZMaW5lKGV2YWRlVG9UYXJnZXQzLCBnZXRQZXJwZW5kaWN1bGFyRm9vdHBvaW50KHNraWxsc2hvdC5zdGFydFBvc2l0aW9uLCBza2lsbHNob3QuZW5kUG9zaXRpb24sIGV2YWRlVG9UYXJnZXQzKSwgY2xvc2VzdFBvaW50MikpIG9yIChldmFkZVRvVGFyZ2V0MiB+PSBuaWwgYW5kIGV2YWRlVG9UYXJnZXQ0IH49IG5pbCBhbmQgTGluZTIoZXZhZGVUb1RhcmdldDIsIGV2YWRlVG9UYXJnZXQ0KTpkaXN0YW5jZShjbG9zZXN0UG9pbnQyKSA8PSAxIGFuZCBnZXRTaWRlT2ZMaW5lKGV2YWRlVG9UYXJnZXQyLCBnZXRQZXJwZW5kaWN1bGFyRm9vdHBvaW50KHNraWxsc2hvdC5zdGFydFBvc2l0aW9uLCBza2lsbHNob3QuZW5kUG9zaXRpb24sIGV2YWRlVG9UYXJnZXQyKSwgY2xvc2VzdFBvaW50Mikgfj0gZ2V0U2lkZU9mTGluZShldmFkZVRvVGFyZ2V0NCwgZ2V0UGVycGVuZGljdWxhckZvb3Rwb2ludChza2lsbHNob3Quc3RhcnRQb3NpdGlvbiwgc2tpbGxzaG90LmVuZFBvc2l0aW9uLCBldmFkZVRvVGFyZ2V0NCksIGNsb3Nlc3RQb2ludDIpKSBvciAoZXZhZGVUb1RhcmdldDEgfj0gbmlsIGFuZCBldmFkZVRvVGFyZ2V0MyA9PSBuaWwgYW5kIGdldFNpZGVPZkxpbmUoaGVyb1Bvc2l0aW9uLCBldmFkZVRvVGFyZ2V0MSwgc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24pIH49IGdldFNpZGVPZkxpbmUoaGVyb1Bvc2l0aW9uLCBldmFkZVRvVGFyZ2V0MSwgY2xvc2VzdFBvaW50MikpIG9yIChldmFkZVRvVGFyZ2V0MiB+PSBuaWwgYW5kIGV2YWRlVG9UYXJnZXQ0ID09IG5pbCBhbmQgZ2V0U2lkZU9mTGluZShoZXJvUG9zaXRpb24sIGV2YWRlVG9UYXJnZXQyLCBza2lsbHNob3Quc3RhcnRQb3NpdGlvbikgfj0gZ2V0U2lkZU9mTGluZShoZXJvUG9zaXRpb24sIGV2YWRlVG9UYXJnZXQyLCBjbG9zZXN0UG9pbnQyKSkgdGhlbg0KICAgIHRhYmxlLmluc2VydChwb3NzaWJsZU1vdmVtZW50VGFyZ2V0cywgY2xvc2VzdFBvaW50MikNCmVuZA0KDQppZiBldmFkZVRvVGFyZ2V0MSB+PSBuaWwgdGhlbg0KICAgIHRhYmxlLmluc2VydChwb3NzaWJsZU1vdmVtZW50VGFyZ2V0cywgZXZhZGVUb1RhcmdldDEpDQplbmQNCg0KaWYgZXZhZGVUb1RhcmdldDIgfj0gbmlsIHRoZW4NCiAgICB0YWJsZS5pbnNlcnQocG9zc2libGVNb3ZlbWVudFRhcmdldHMsIGV2YWRlVG9UYXJnZXQyKQ0KZW5kDQoNCmlmIGV2YWRlVG9UYXJnZXQzIH49IG5pbCB0aGVuDQogICAgdGFibGUuaW5zZXJ0KHBvc3NpYmxlTW92ZW1lbnRUYXJnZXRzLCBldmFkZVRvVGFyZ2V0MykNCmVuZA0KDQppZiBldmFkZVRvVGFyZ2V0NCB+PSBuaWwgdGhlbg0KICAgIHRhYmxlLmluc2VydChwb3NzaWJsZU1vdmVtZW50VGFyZ2V0cywgZXZhZGVUb1RhcmdldDQpDQplbmQNCg0KZXZhZGVUYXJnZXQgPSBmaW5kQmVzdERpcmVjdGlvbihza2lsbHNob3QsZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKSwgcG9zc2libGVNb3ZlbWVudFRhcmdldHMpDQplbmQNCg0KaWYgZXZhZGVUYXJnZXQgdGhlbg0KICAgIGlmIGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgZXZhZGVUYXJnZXQpID09IGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKSkgYW5kIHNraWxsc2hvdExpbmU6ZGlzdGFuY2UoZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKSkgPiBldmFkZURpc3RhbmNlIHRoZW4NCiAgICBwYXRoRGlyZWN0aW9uVmVjdG9yID0gKGV2YWRlVGFyZ2V0IC0gaGVyb1Bvc2l0aW9uKQ0KICAgIGlmIGdldFNpZGVPZkxpbmUoc2tpbGxzaG90LnN0YXJ0UG9zaXRpb24sIHNraWxsc2hvdC5lbmRQb3NpdGlvbiwgaGVyb1Bvc2l0aW9uKSA9PSBnZXRTaWRlT2ZMaW5lKHNraWxsc2hvdC5zdGFydFBvc2l0aW9uLCBza2lsbHNob3QuZW5kUG9zaXRpb24sIGV2YWRlVGFyZ2V0KSB0aGVuDQogICAgZXZhZGVUYXJnZXQgPSBldmFkZVRhcmdldCArIHBhdGhEaXJlY3Rpb25WZWN0b3I6bm9ybWFsaXplZCgpICogKHBhdGhEaXJlY3Rpb25WZWN0b3I6bGVuKCkgKyBzbW9vdGhpbmcgLyAoZXZhZGVEaXN0YW5jZSAtIGRpc3RhbmNlRnJvbVNraWxsc2hvdFBhdGgpICogcGF0aERpcmVjdGlvblZlY3RvcjpsZW4oKSkNCmVsc2UNCiAgICBldmFkZVRhcmdldCA9IGV2YWRlVGFyZ2V0ICsgcGF0aERpcmVjdGlvblZlY3Rvcjpub3JtYWxpemVkKCkgKiAocGF0aERpcmVjdGlvblZlY3RvcjpsZW4oKSArIHNtb290aGluZyAvIChldmFkZURpc3RhbmNlICsgZGlzdGFuY2VGcm9tU2tpbGxzaG90UGF0aCkgKiBwYXRoRGlyZWN0aW9uVmVjdG9yOmxlbigpKQ0KZW5kDQplbmQNCmV2YWRlVG8oZXZhZGVUYXJnZXQueCwgZXZhZGVUYXJnZXQueSkNCnJldHVybiB0cnVlDQplbHNlIHJldHVybiBmYWxzZQ0KZW5kDQpyZXR1cm4gZmFsc2UNCmVuZA0KDQpmdW5jdGlvbiBsaW5lU2tpbGxzaG90Mihza2lsbHNob3QpDQogICAgaWYgaGF2ZVNoaWVsZCgpIHRoZW4gDQogICAgICAgIGZvciBpLCBkZXRlY3RlZFNraWxsc2hvdCBpbiBpcGFpcnMoZGV0ZWN0ZWRTa2lsbHNob3RzKSBkbw0KICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3Quc2tpbGxzaG90Lm5hbWUgPT0gc2tpbGxzaG90LnNraWxsc2hvdC5uYW1lIHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUoZGV0ZWN0ZWRTa2lsbHNob3RzLCBpKQ0KICAgICAgICAgICAgICAgIGkgPSBpLTENCiAgICAgICAgICAgICAgICBpZiBkZXRlY3RlZFNraWxsc2hvdC5ldmFkaW5nIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgY29udGludWVNb3ZlbWVudChkZXRlY3RlZFNraWxsc2hvdCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgaXNTaXZpciB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoX0UpDQogICAgICAgIGVsc2VpZiBpc05vY3R1cm5lIHRoZW4NCiAgICAgICAgICAgIENhc3RTcGVsbChfVykNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlDQogICAgZW5kDQogICAgcmV0dXJuIGZhbHNlDQplbmQNCg0KZnVuY3Rpb24gbGluZVNraWxsc2hvdDMoc2tpbGxzaG90LCBldmFkZVRvMSwgZXZhZGVUbzIpDQogICAgaWYgbm90IHNraWxsc2hvdC5hbHJlYWR5ZGFzaGVkIHRoZW4NCiAgICBsb2NhbCBzYWZlVGFyZ2V0ID0gbmlsDQogICAgaWYgTmVlZERhc2goc2tpbGxzaG90LCB0cnVlKQ0KICAgICAgICB0aGVuIGlmIChldmFkZVRvMTpkaXN0YW5jZShsYXN0TW92ZW1lbnQuZGVzdGluYXRpb24pID4gZXZhZGVUbzI6ZGlzdGFuY2UobGFzdE1vdmVtZW50LmRlc3RpbmF0aW9uKSkgYW5kIG5vdCBJbnNpZGVUaGVXYWxsKGV2YWRlVG8yKSB0aGVuDQogICAgICAgICAgICBzYWZlVGFyZ2V0ID0gZXZhZGVUbzINCiAgICAgICAgZWxzZWlmIChldmFkZVRvMjpkaXN0YW5jZShsYXN0TW92ZW1lbnQuZGVzdGluYXRpb24pID4gZXZhZGVUbzE6ZGlzdGFuY2UobGFzdE1vdmVtZW50LmRlc3RpbmF0aW9uKSkgYW5kIG5vdCBJbnNpZGVUaGVXYWxsKGV2YWRlVG8xKSB0aGVuDQogICAgICAgICAgICBzYWZlVGFyZ2V0ID0gZXZhZGVUbzENCiAgICAgICAgZWxzZWlmIEluc2lkZVRoZVdhbGwoZXZhZGVUbzIpIHRoZW4NCiAgICAgICAgICAgIHNhZmVUYXJnZXQgPSBldmFkZVRvMQ0KICAgICAgICBlbHNlaWYgSW5zaWRlVGhlV2FsbChldmFkZVRvMSkgdGhlbg0KICAgICAgICAgICAgc2FmZVRhcmdldCA9IGV2YWRlVG8yDQogICAgICAgIGVuZA0KICAgICAgICBpZiBzYWZlVGFyZ2V0IH49IG5pbCB0aGVuDQogICAgICAgICAgICBldmFkZVRvKHNhZmVUYXJnZXQueCwgc2FmZVRhcmdldC55LCB0cnVlKQ0KICAgICAgICAgICAgc2tpbGxzaG90LmFscmVhZHlkYXNoZWQgPSB0cnVlDQogICAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2UNCiAgICAgICAgZW5kDQogICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlDQogICAgZW5kDQplbHNlIHJldHVybiBmYWxzZQ0KZW5kDQpyZXR1cm4gZmFsc2UNCmVuZA0KDQpmdW5jdGlvbiBsaW5lU2tpbGxzaG90NChza2lsbHNob3QsIGV2YWRlVG8xLCBldmFkZVRvMikNCiAgICBpZiBHb29kRXZhZGVDb25maWcubGluZWFsbHdheXMgdGhlbg0KICAgICAgICBpZiBza2lsbHNob3RMaW5lOmRpc3RhbmNlKGV2YWRlVG8xKSA+PSBza2lsbHNob3RMaW5lOmRpc3RhbmNlKGV2YWRlVG8yKSB0aGVuDQogICAgICAgICAgICBpZiBub3QgSW5zaWRlVGhlV2FsbChldmFkZVRvMSkgdGhlbg0KICAgICAgICAgICAgICAgIHNhZmVUYXJnZXQgPSBldmFkZVRvMQ0KICAgICAgICAgICAgZWxzZWlmIG5vdCBJbnNpZGVUaGVXYWxsKGV2YWRlVG8yKSB0aGVuDQogICAgICAgICAgICAgICAgc2FmZVRhcmdldCA9IGV2YWRlVG8yDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgc2FmZVRhcmdldCA9IGdldExhc3RNb3ZlbWVudERlc3RpbmF0aW9uKCkNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGlmIG5vdCBJbnNpZGVUaGVXYWxsKGV2YWRlVG8yKSB0aGVuDQogICAgICAgICAgICAgICAgc2FmZVRhcmdldCA9IGV2YWRlVG8yDQogICAgICAgICAgICBlbHNlaWYgbm90IEluc2lkZVRoZVdhbGwoZXZhZGVUbzEpIHRoZW4NCiAgICAgICAgICAgICAgICBzYWZlVGFyZ2V0ID0gZXZhZGVUbzENCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBzYWZlVGFyZ2V0ID0gZ2V0TGFzdE1vdmVtZW50RGVzdGluYXRpb24oKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KDQogICAgICAgIGlmIHNhZmVUYXJnZXQgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGV2YWRlVG8oc2FmZVRhcmdldC54LCBzYWZlVGFyZ2V0LnkpDQogICAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2UNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2UNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlDQplbmQNCg0KZnVuY3Rpb24gZG9kZ2VDcmVzY2VuZG8xKHNraWxsc2hvdCkNCmlmIGhhdmVTaGllbGQoKSB0aGVuIA0KICAgICAgICBmb3IgaSwgZGV0ZWN0ZWRTa2lsbHNob3QgaW4gaXBhaXJzKGRldGVjdGVkU2tpbGxzaG90cykgZG8NCiAgICAgICAgICAgIGlmIGRldGVjdGVkU2tpbGxzaG90LnNraWxsc2hvdC5uYW1lID09IHNraWxsc2hvdC5za2lsbHNob3QubmFtZSB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKGRldGVjdGVkU2tpbGxzaG90cywgaSkNCiAgICAgICAgICAgICAgICBpID0gaS0xDQogICAgICAgICAgICAgICAgaWYgZGV0ZWN0ZWRTa2lsbHNob3QuZXZhZGluZyB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlTW92ZW1lbnQoZGV0ZWN0ZWRTa2lsbHNob3QpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGlmIGlzU2l2aXIgdGhlbg0KICAgICAgICAgICAgQ2FzdFNwZWxsKF9FKQ0KICAgICAgICBlbHNlaWYgaXNOb2N0dXJuZSB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoX1cpDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICBlbHNlIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KICAgIHJldHVybiBmYWxzZQ0KZW5kDQoNCmZ1bmN0aW9uIGRvZGdlQ3Jlc2NlbmRvMihza2lsbHNob3QsIGV2YWRlVG8xLCBldmFkZVRvMikNCmxvY2FsIHNhZmVUYXJnZXQgPSBuaWwNCiAgICBpZiBoYXZlZmxhc2ggYW5kIHVzZWZsYXNoIGFuZCBub3Qgc2tpbGxzaG90LmFscmVhZHlkYXNoZWQNCiAgICAgICAgdGhlbiBpZiAoZXZhZGVUbzE6ZGlzdGFuY2UobGFzdE1vdmVtZW50LmRlc3RpbmF0aW9uKSA+IGV2YWRlVG8yOmRpc3RhbmNlKGxhc3RNb3ZlbWVudC5kZXN0aW5hdGlvbikpIGFuZCBub3QgSW5zaWRlVGhlV2FsbChldmFkZVRvMikgdGhlbg0KICAgICAgICAgICAgc2FmZVRhcmdldCA9IGV2YWRlVG8yDQogICAgICAgIGVsc2VpZiAoZXZhZGVUbzI6ZGlzdGFuY2UobGFzdE1vdmVtZW50LmRlc3RpbmF0aW9uKSA+IGV2YWRlVG8xOmRpc3RhbmNlKGxhc3RNb3ZlbWVudC5kZXN0aW5hdGlvbikpIGFuZCBub3QgSW5zaWRlVGhlV2FsbChldmFkZVRvMSkgdGhlbg0KICAgICAgICAgICAgc2FmZVRhcmdldCA9IGV2YWRlVG8xDQogICAgICAgIGVsc2VpZiBJbnNpZGVUaGVXYWxsKGV2YWRlVG8yKSB0aGVuDQogICAgICAgICAgICBzYWZlVGFyZ2V0ID0gZXZhZGVUbzENCiAgICAgICAgZWxzZWlmIEluc2lkZVRoZVdhbGwoZXZhZGVUbzEpIHRoZW4NCiAgICAgICAgICAgIHNhZmVUYXJnZXQgPSBldmFkZVRvMg0KICAgICAgICBlbmQNCiAgICAgICAgaWYgc2FmZVRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgRmxhc2hUbyhzYWZlVGFyZ2V0LngsIHNhZmVUYXJnZXQueSkNCiAgICAgICAgICAgIHNraWxsc2hvdC5hbHJlYWR5ZGFzaGVkID0gdHJ1ZQ0KICAgICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlDQogICAgICAgIGVuZA0KICAgICAgICBlbHNlIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KcmV0dXJuIGZhbHNlDQplbmQNCi0tIGVuZCBvZiBsaW5lIHNraWxsc2hvdCBkb2RnaW5nIGZ1bmN0aW9ucyAtLQ=="), nil, "bt", _ENV))()
